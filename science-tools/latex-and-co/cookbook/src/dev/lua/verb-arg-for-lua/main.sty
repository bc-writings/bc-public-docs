%%%
% refs::
%     + https://tex.stackexchange.com/a/669633/6880
%%%

%%%
% Le travail est partagé entre \latex à qui l'on demande de manger
% un \arg entre deux accolades de façon "verbatim", et la fonction
% ''calc'' présente dans le fichier ''main.lua''.
%%%

%%%
% Importation du fichier ''main.lua'' contenant la fonction ''calc''.
%%%
\directlua{dofile('main.lua')}

%%%
% prototype::
%     #1 : un contenu à analyser tel que tapé.
%
% note::
%     La \spec ''v'' dans ''\NewDocumentCommand'' demande de lire l'\arg
%     entre deux accolades de façon "verbatim".
%
% caution::
%     Une chaîne "verbatim" côté \latex correspond à une chaîne littéral
%     côté \lua, donc il faut encadrer ''#1'' par des doubles crochets.
%%%
\NewDocumentCommand{\calc}{v}{
  \directlua{calc([[#1]])}
}
