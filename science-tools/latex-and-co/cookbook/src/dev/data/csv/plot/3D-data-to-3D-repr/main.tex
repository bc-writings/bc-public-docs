% !TEX TS-program = lualatex

\documentclass[border = 3pt]{standalone}

\usepackage[svgnames]{xcolor}
\usepackage[3d]{luadraw}

\directlua{dofile("../common/csv.lua")}

\begin{document}

\begin{luadraw}{name = 3D-CSV-data-to-3D-repr}
local data = read_CSV(
  "../common/basic.csv",
  true
)

local graphview = graph3d:new{
  window3d = {-6, 4, -6, 3, -1, 5},
  viewdir  = {60, 50},
  adjust2d = true,
  size     = {14, 14},
  bbox     = false
}

graphview:Dboxaxes3d({
  grid      = true,
  gridcolor = "gray",
  fillcolor = "lightgray"
})

graphview:Linecolor("Crimson")

------
-- Juste un nouvelle façon de traiter les données.
------
local A, B, xyz

for _, xyz in ipairs(data) do
  A = M(xyz[1], xyz[2], 0)
  B = M(xyz[1], xyz[2], 5*xyz[3])

  graphview:Dseg3d({A, B})

  graphview:Dballdots3d({B}, "Crimson")
end

graphview:Show()
\end{luadraw}

\end{document}
