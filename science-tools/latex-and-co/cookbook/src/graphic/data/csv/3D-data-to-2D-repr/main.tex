% !TEX TS-program = lualatex

\documentclass[border = 3pt]{standalone}

%%%
% Des couleurs faciles d'emploi via le package ''xcolor''!
%%%
\usepackage[svgnames]{xcolor}

%%%
% La bibliothèque ''luadraw'' allie une facilité d’utilisation à
% un rendu particulièrement soigné.
%%%
\usepackage{luadraw}

%%%
% Externalisation du travail pour des usages multiples.
%%%
\directlua{dofile('../common/csv.lua')}

\begin{document}

\begin{luadraw}{name = 3D-CSV-data-to-2D-repr}
------
-- Chargeons nos données.
------
local data = read_CSV(
  "../common/basic.csv",
  true
)

------
-- ¨Def de la zone graphique.
------
local graphview = graph:new{
  window = {-7, 7, -5, 5},
  bbox   = false
}

------
-- Ajout d'axes.
------
graphview:Daxes(
  {0, 1, 1},
  {
    arrows = "->",
    grid   = true
  }
)

------
-- Quelques réglages graphiques.
------
graphview:Linecolor("Crimson")
graphview:Filloptions("full", "Crimson")

------
-- Traitement graphique des données.
------
local i = cpx.I
local xyR

for _, xyR in ipairs(data) do
  graphview:Dcircle(xyR[1] + i*xyR[2], .5*xyR[3])
end

------
-- Montrons le résultat de notre oeuvre.
------
graphview:Show()
\end{luadraw}

\end{document}
