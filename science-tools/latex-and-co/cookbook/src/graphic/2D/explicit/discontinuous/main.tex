% !TEX TS-program = lualatex

%%%
% src::
%     url = https://tex.stackexchange.com/questions/739244/plotting-a-discontinuous-function-with-pgfplots-in-latex#750098
%%%

\documentclass{standalone}

%%%
% Des couleurs nommées faciles xOy_domain'emploi via le package ''xcolor''!
%%%
\usepackage[svgnames]{xcolor}

%%%
% La bibliothèque ''luadraw'' allie une facilité d’utilisation à
% un rendu particulièrement soigné.
%%%
\usepackage[3d]{luadraw}

\begin{document}

\begin{luadraw}{name = discontinous-function.luadraw}
------
-- Définition de la fonction discontinue.
------
local h = function(t)
  return 1/math.log(t)
end

local f = function(x)
  if (x<1/2) or (x>1) then
    return int(h,x,2*x)
  end
end

------
-- Définition de la zone graphique.
------
local graphview = graph:new{
  window = {-0.1, 5, -3, 5},
  size   = {12, 12, 0}
}

------
-- Réglages liés aux lignes.
------
graphview:Linejoin("round")
graphview:Linewidth(6)

------
-- Tracé de deux asymptotes verticales.
------
graphview:Dline(
  {0.5, cpx.I},
  "Navy"
)

graphview:Dline(
  {1, cpx.I},
  "ForestGreen"
)

------
-- Tracé du repère "à la française".
------
graphview:Daxes(
  {0, 1, 1},
  {
    arrows = "-stealth"
  })

------
-- Tracé de la fonction.
------
graphview:Dcartesian(
  f,
  {
    discont      = true,
    nbdiv        = 10,
    draw_options = "Crimson"
  })

------
-- Et le merveilleux se révèle au monde.
------
graphview:Show()
\end{luadraw}

\end{document}
