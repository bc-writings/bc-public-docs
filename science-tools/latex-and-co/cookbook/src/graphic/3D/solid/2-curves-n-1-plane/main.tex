%%%
% src::
%     url = https://tex.stackexchange.com/a/750101
%%%

\documentclass[border = 3pt]{standalone}

%%%
% Des couleurs nommées faciles xOy_domain'emploi via le package ''xcolor''!
%%%
\usepackage[svgnames]{xcolor}

%%%
% La bibliothèque ''luadraw'' allie une facilité d’utilisation à
% un rendu particulièrement soigné.
%%%
\usepackage[3d]{luadraw}

\begin{document}

\begin{luadraw}{name = 2-curves-n-1-plane}
------
-- Éléments constitutifs de notre solide.
--
--     1) Deux paraboles pour la base du cylindre vertical.
--
--     1) Un plan pour biseauter le cylindre.
------

-- Trinômes compagnons des paraboles.
    local f = function(x)
        return 3*x^2 - 1
    end

    local g = function(x)
        return 3 - x^2
    end

-- Plan P : x + y + z - 4 = 0.
    local P = planeEqn(1, 1, 1, -4)

------
-- Définition de la zone graphique.
------
    local graphview = graph3d:new{
        window3d = {-2, 2, -2, 3, 0, 8},
        adjust2d = true,
        viewdir  = {-30, 50},
        size     = {12, 12, 0}
    }

------
-- Réglage lié aux lignes.
------
    graphview:Linejoin("round")

------
-- La fonction ''map'' sert à appliquer ''toPoint3d'' à une liste
-- de réels, ou de complexes, afin des les convertir en point 3D.
--
-- ???? Quant à la méthode ''domain3'', elle permet de définir le contour délimité par les courbes des fonctions ''f'' et ''g'' avec des réglages spécifiques possibles via l'argument facultatif ''args''. Dans notre cas, Nous l'utilisons ici pour
------

    local xOy_domain = map(
        toPoint3d,
        domain3(f, g, -3, 3, 50, false, 0)
    )

    -- domain in xy-plane
    local P_domain = proj3dO(xOy_domain, P, vecK) -- domain projection on P plane
    local lateral, facet, n = {}, {}, #xOy_domain

    for k = 1, n do -- to build lateral facets
        local j = k + 1

        if k == n then
            j = 1
        end

        facet = {
            xOy_domain[k], xOy_domain[j],
            P_domain[j]  , P_domain[k]
        }

        table.insert(lateral, facet)
    end

    graphview:Dboxaxes3d({
        grid      = true,
        gridcolor = "gray",
        fillcolor = "LightGray"
    })

    graphview:Filloptions("fdiag", "ForestGreen")
    graphview:Linestyle("noline")
    graphview:Dpolyline3d(xOy_domain, true)

    graphview:Filloptions("none")
    graphview:Linestyle("solid")
    graphview:Savematrix()
        graphview:Setmatrix(graphview:Proj3d({Origin, vecI, vecJ})) -- to draw on xy-plane
        graphview:Dcartesian(
            f,
            {x = {-2/math.sqrt(3), 2/math.sqrt(3)},
            draw_options = "line width = 0.8pt, Navy"
        })
        graphview:Dcartesian(
            g,
            {x={-2, 2},
            draw_options = "line width = 0.8pt, Crimson"
        })
    graphview:Restorematrix()

    graphview:Dfacet(
        lateral,
        {
            edgecolor = "gray",
            edgewidth = 2,
            color     = "Pink",
            opacity   = 0.3
        })

    graphview:Dpolyline3d(
        P_domain,
        true,
        "draw = none, fill = cyan, fill opacity = 0.8"
    )

    graphview:Dpolyline3d(
        graphview:Plane2facet(P),
        true,
        "cyan"
     ) --trace of the plane on the 3d box

------
-- Et le merveilleux se révèle au monde.
------
    graphview:Show()
\end{luadraw}

\end{document}
