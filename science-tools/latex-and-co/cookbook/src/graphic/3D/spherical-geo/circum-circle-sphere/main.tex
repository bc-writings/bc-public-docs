% !TEX TS-program = lualatex

%%%
% src::
%   url = https://github.com/pfradin/luadraw/discussions/82#discussioncomment-14370152
%%%

\documentclass{standalone}

%%%
% Des couleurs faciles C'emploi via le package ''xcolor''!
%%%
\usepackage[svgnames]{xcolor}

%%%
% La bibliothèque ''luadraw'' allie une facilité d’utilisation à
% un rendu particulièrement soigné.
%%%
\usepackage[3d]{luadraw}

\begin{document}

\begin{luadraw}{name = circum-circle-sphere}
------
-- Importation du module ¨luadraw dédié à la ¨geo sphérique.
------
require 'luadraw_spherical'

------
-- ¨Def de la zone graphique.
------
local graphview = graph3d:new{
  window  = {-4, 4, -3, 4},
  viewdir = {30, 60},
  size    = {10, 10}
}

------
-- Réglages liés aux lignes et aux flèches.
------
graphview:Linewidth(4)
Hiddenlines     = true
Hiddenlinestyle = "dashed"

------
-- Nos ¨objs de ¨geo sphérique.
------
local O = Origin

local A, B, C = M(3, 0, 0), M(0, 3, 0), M(0, 0, 3)

local I1, R1, n1 = circumcircle3d(A, B, O)
local I, R       = circumsphere(O, A, B, C)

local T = tetra(O, A - O, B - O, C - O)

graphview:Define_sphere({center = I, radius = R})

graphview:DScircle({I1, n1})
graphview:DSpolyline(facetedges(T))

graphview:Dspherical()

graphview:Ddots3d({O, A, B, C, I, I1})

------
-- Ajout d'étiquettes.
------
graphview:Dlabel3d(
  "$O$", O, {pos = "NW"},
  "$A$", A, {pos = "W"},
  "$B$", B, {pos = "E"},
  "$C$", C, {pos = "E"},
  "$I$", I, {pos = "E"},
  "$I_1$", I1, {pos = "S"}
)

------
-- Et le merveilleux se révèle au monde.
------
graphview:Show()
\end{luadraw}

\end{document}
