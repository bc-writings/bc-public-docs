% !TEX TS-program = lualatex

\documentclass{standalone}

\usepackage[svgnames]{xcolor}

\usepackage[3d]{luadraw}

\begin{document}

\begin{luadraw}{name = nb-edge-colmap}
------
-- Récupération du polyèdre au format Wavefront.
------
local file = "../../models/bitruncated_icosahedron.obj"

local polyhedron, bounding_box = read_obj_file(file)

------
-- ¨Def de la zone graphique.
------
local graphview = graph3d:new{
  window3d = bounding_box,
  viewdir  = {-110, -20},
  adjust2d = true,
  bbox     = false
}

------
-- Coloration des faces suivant leur nombre de côtés.
------
local S4, S6, S10 = {}, {}, {}

for k, f in ipairs(polyhedron.facets) do
  if #f == 4 then
    table.insert(S4, k)

  elseif #f == 6 then
    table.insert(S6, k)

  else
    table.insert(S10, k)
  end
end

------
-- Tracé des faces colorées.
------
graphview:Dscene3d(
-- 4 côtés.
  graphview:addFacet(
    getfacet(polyhedron, S4),
    {color = "Crimson"}
  ),
-- 6 côtés.
  graphview:addFacet(
    getfacet(polyhedron, S6),
    {color = "Gold"}
  ),
-- 10 côtés.
  graphview:addFacet(
    getfacet(polyhedron, S10),
    {color = "SteelBlue"}
  ),
-- Arêtes du polyèdre.
  graphview:addPolyline(
    facetedges(polyhedron),
    {
      color = "Pink",
      width = 4
    }
  )
)

------
-- Montrons le résultat de notre oeuvre.
------
graphview:Show()
\end{luadraw}

\end{document}
