% !TEX TS-program = lualatex

\documentclass{standalone}

\usepackage[svgnames]{xcolor}
\usepackage[3d]{luadraw}

\begin{document}

\begin{luadraw}{name = param-surf-bary-colmap-X}
require 'luadraw_palettes'

local pal = getPal["palBurningGrass"]

local pi, sin, cos = math.pi, math.sin, math.cos

local projplane = surface(
  function(u, v)
    return M(
      3*v*cos(2*u),
      3*v*sin(2*u),
      3*v*cos(u)
    )
  end,
  0, 2*pi, 0, 1,
  {50, 30}
)

local graphview = graph3d:new{
  size    = {12, 12},
  viewdir = {170, 80}
}

------
-- Un seul ¨chgt ici : usage de la méthode ''"x"''.
------
graphview:Dpoly(
  facet2poly(projplane), 
  {
    usepalette = {pal, "x"},
    mode       = mShaded
  }
)

graphview:Show()
\end{luadraw}

\end{document}
