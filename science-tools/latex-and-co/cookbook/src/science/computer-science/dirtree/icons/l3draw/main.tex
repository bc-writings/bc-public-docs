% https://tex.stackexchange.com/a/755257/6880

\documentclass{article}
\usepackage{l3draw}
\usepackage{fontawesome5}

\ExplSyntaxOn

\tl_new:N \l_projetmbc_dirtree_font_tl
\int_new:N \g_projetmbc_dirtree_step_int
\int_new:N \l_projetmbc_dirtree_level_int
\bool_new:N \l_projetmbc_dirtree_first_item_bool
\coffin_new:N \l_projetmbc_dirtree_icon_coffin
\coffin_new:N \l_projetmbc_dirtree_name_coffin

\NewDocumentCommand { \drawpath } { m } {
    \group_begin:
    \nullfont
    \int_gzero:N \g_projetmbc_dirtree_step_int
    \draw_begin:
    #1
    \draw_end:
    \group_end:
}

\color_set:nnn { foldercolor } { RGB } { 124 , 166 , 198 }
\color_set:nnn { filecolor } { RGB } { 88 , 88 , 88 }

\NewDocumentCommand { \pathitem } { O { filecolor } m m m } {
    \hcoffin_set:Nn \l_projetmbc_dirtree_icon_coffin { \color_select:n {#1} #2 }
    \hcoffin_set:Nn \l_projetmbc_dirtree_name_coffin { \normalfont #3 }
    \draw_coffin_use:Nnnn \l_projetmbc_dirtree_icon_coffin { hc } { vc } {
        \l_projetmbc_dirtree_level_int * 0.5cm + 0.2cm ,
        \g_projetmbc_dirtree_step_int * \baselineskip
    }
    \draw_coffin_use:Nnnn \l_projetmbc_dirtree_name_coffin { l } { vc } {
        \l_projetmbc_dirtree_level_int * 0.5cm + 0.5 cm ,
        \g_projetmbc_dirtree_step_int * \baselineskip
    }
    \int_compare:nNnT { \l_projetmbc_dirtree_level_int } > { 0 } {
        \int_step_inline:nn { \l_projetmbc_dirtree_level_int - 1 } {
            \draw_path_moveto:n {
                ##1 * 0.5cm - 0.33cm,
                ( \g_projetmbc_dirtree_step_int + 1 ) * \baselineskip
            }
            \draw_path_lineto:n {
                ##1 * 0.5cm - 0.33cm ,
                \g_projetmbc_dirtree_step_int * \baselineskip
            }
        }
        \bool_if:NTF \l_projetmbc_dirtree_first_item_bool {
            \draw_path_moveto:n {
                \l_projetmbc_dirtree_level_int * 0.5cm - 0.33cm ,
                ( \g_projetmbc_dirtree_step_int + 0.5 ) * \baselineskip
            }
        } {
            \draw_path_moveto:n {
                \l_projetmbc_dirtree_level_int * 0.5cm - 0.33cm ,
                ( \g_projetmbc_dirtree_step_int + 1 ) * \baselineskip
            }
        }
        \draw_path_lineto:n {
            \l_projetmbc_dirtree_level_int * 0.5cm - 0.33cm ,
            \g_projetmbc_dirtree_step_int * \baselineskip
        }
        \draw_path_lineto:n {
            \l_projetmbc_dirtree_level_int * 0.5cm - 0.1cm ,
            \g_projetmbc_dirtree_step_int * \baselineskip
        }
        \draw_path_use_clear:n { stroke }
    }
    \int_gdecr:N \g_projetmbc_dirtree_step_int
    \bool_set_false:N \l_projetmbc_dirtree_first_item_bool
    \group_begin:
        \bool_set_true:N \l_projetmbc_dirtree_first_item_bool
        \int_incr:N \l_projetmbc_dirtree_level_int
        #4
    \group_end:
}

\ExplSyntaxOff

\begin{document}

\drawpath{
    \pathitem[foldercolor]{\faFolderOpen}{system}{
        \pathitem[foldercolor]{\faFolderOpen}{dog}{
            \pathitem[foldercolor]{\faFolderOpen}{Bar}{
                \pathitem{\faFile}{Bazg1}{}
                \pathitem{\faFile}{baz2}{}
            }
            \pathitem{\faFile}{baz3}{}
            \pathitem[foldercolor]{\faFolder}{hide}{}
        }
        \pathitem[red!70]{\faFilePdf}{file.pdf}{}
    }
}

\end{document}
