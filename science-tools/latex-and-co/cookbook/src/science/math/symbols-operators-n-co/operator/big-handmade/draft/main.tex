\documentclass[varwidth, border = 8pt]{standalone}

\usepackage{main}

%%%
% Le chargement suivant est nécessaire pour un bon rendu du tableau
% testant les styles.
%%%
\usepackage{amsmath}

%%%
% Pour simplifier la rédaction des tests.
%%%
\newcommand\exasep{\kern3pt | \kern3pt}

\newcommand\sumexa{\sum_{i = 0}^{9} s_i}
\newcommand\astexa{\bigast_{i = 0}^{9} a_i}
\newcommand\compoexa{\bigcompo_{i = 0}^{9} c_i}

\newcommand{\test}{\astexa}
\newcommand{\verbtest}%
           {\mathmacro{bigast}\_\{i = 0\}\text{\textasciicircum}\{9\} \, a\_i}

\newcommand{\testbis}{\compoexa}
\newcommand{\verbtestbis}%
           {\mathmacro{bigcompo}\_\{i = 0\}\text{\textasciicircum}\{9\} \, c\_i}

\NewDocumentCommand{\mathmacro}{m}%
                   {\;\backslash#1}%\;}

\newcommand{\testmathstyle}{
  \[
    \renewcommand{\arraystretch}{1.2}%
    \begin{array}{lll}
        \textbf{Style}
      & \mathtt{\verbtest}
      & \mathtt{\verbtestbis}
      \\ \hline
        \mathtt{\backslash displaystyle}
      & \displaystyle \test
      & \displaystyle \testbis
      \\
        \mathtt{\backslash textstyle}
      & \textstyle \test
      & \textstyle \testbis
      \\
        \mathtt{\backslash scriptstyle}
      & \scriptstyle \test
      & \scriptstyle \testbis
      \\
        \mathtt{\backslash scriptscriptstyle}
      & \scriptscriptstyle \test
      & \scriptscriptstyle \testbis
    \end{array}
  \]
}

\begin{document}

Mode étendu:
$\displaystyle \sumexa \exasep \astexa \exasep \compoexa$

Mode en ligne:
$\sumexa \exasep \astexa \exasep \compoexa$.

\testmathstyle

\end{document}
