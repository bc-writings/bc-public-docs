% FORCE-CROP

\documentclass[varwidth, border = 20pt]{standalone}

\usepackage{main}

%%%
% Le chargement suivant est nécessaire pour un bon rendu du tableau
% testant les styles.
%%%
\usepackage{amsmath}

%%%
% Pour simplifier la rédaction des tests.
%%%
\newcommand\exasep{\kern3pt | \kern3pt}

\newcommand\limexa{\lim_{k = 0}^{m} \ell_k}
\newcommand\xtrexa{\xtr_{k = 0}^{m} \ell_k}
\newcommand\extexa{\exterior_{k = 0}^{m} \ell_k}

\newcommand{\test}{\extexa}
\newcommand{\verbtest}%
           {\mathmacro{extexa}\_\{k = 0\}\text{\textasciicircum}\{9\} \, a\_k}

\newcommand{\testbis}{\xtrexa}
\newcommand{\verbtestbis}%
           {\mathmacro{xtrexa}\_\{k = 0\}\text{\textasciicircum}\{9\} \, c\_k}

\NewDocumentCommand{\mathmacro}{m}%
                   {\;\backslash#1}%\;}

\newcommand{\testmathstyle}{
  \[
    \renewcommand{\arraystretch}{1.2}%
    \begin{array}{lll}
        \textbf{Style}
      & \mathtt{\verbtest}
      & \mathtt{\verbtestbis}
      \\ \hline
        \mathtt{\backslash displaystyle}
      & \displaystyle \test
      & \displaystyle \testbis
      \\
        \mathtt{\backslash textstyle}
      & \textstyle \test
      & \textstyle \testbis
      \\
        \mathtt{\backslash scriptstyle}
      & \scriptstyle \test
      & \scriptstyle \testbis
      \\
        \mathtt{\backslash scriptscriptstyle}
      & \scriptscriptstyle \test
      & \scriptscriptstyle \testbis
    \end{array}
  \]
}

\begin{document}

Mode étendu:
$\displaystyle \limexa \exasep \extexa \exasep \xtrexa$

Mode en ligne:
$\limexa \exasep \extexa \exasep \xtrexa$.

\testmathstyle

\end{document}
