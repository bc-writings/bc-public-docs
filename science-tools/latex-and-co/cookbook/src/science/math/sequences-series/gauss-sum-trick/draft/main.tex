\documentclass[varwidth, border = 3pt]{standalone}

\usepackage{main}

\begin{document}

\paragraph{Exemple 1.}

% La méthode demande de toujours régler la commande ''\nubdepth''
% qui vaut ''0'' initialement. Cette macro donne la profondeur où
% tracer le trait le plus bas. La valeur donnée est ici simple à
% obtenir, car c'est le successeur du nombre de macros ''\nub''
% utilisées (ceci laisse envisager une automatisation possible).

\renewcommand{\nubdepth}{6}

$ \nub{1}{
    11 + \nub{2}{
      12 + \nub{3}{
        13 + \nub{4}{
          14 + \nub{5}{15 + 16} +
          17} +
        18} +
      19} +
    20}
= 31 \times 5
= 155$

\paragraph{Exemple 2.}

% Un nouvel exemple implique une nouvelle valeur pour ''\nubpre''
% (en coulisse, un compteur pourrait faire ce travail à notre place).

\renewcommand{\nubpre}{usecase-B}
\renewcommand{\nubdepth}{4}

$ \nub{1}{
    1 + \nub{2}{
      3 + \nub{3}{
        5
          + \cdots + % Au milieu, il y a `49 + 51`, donc nous avons
        95} +        % `(49 - 1) / 2 = 24` ajouts du nombre `2` pour
      97} +          % aller de 1 à 49.
    99}
= 100 \times (1 + 24)
= 2500$

\end{document}
