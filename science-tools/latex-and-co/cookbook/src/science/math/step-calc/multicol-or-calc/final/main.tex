\documentclass[varwidth, border = 3pt]{standalone}

\usepackage{main}

\usepackage{amsmath}
\usepackage{witharrows}

\begin{document}

Cas simple à valider.

\begin{orsteps}
    x^2 - 2 = 0      \\
    x^2 = 2          \\
    x = \pm \sqrt{2}
    ---
    -4 x + 3 = 0      \\
    -4 x = - 3        \\
    4 x = 3           \\
    x = \dfrac{3}{4}
    ---
    x - 3 = 0 \\
    x = 3
    ---
    x^6 + 11 = 0 \\
    \text{Impossible !}
\end{orsteps}


Cas utile atypique à valider.

% Nous devons "cacher" les ''\\'' de ''WithArrows'' aux yeux
% de ''orsteps''.
\newcommand\br{\\}

\begin{orsteps}
    \begin{WithArrows}[
        right-overlap = false,
        format        = l
    ]
        f(x) \ge g(x)         \Arrow{E1} \br
        f(x)^2 \ge g(x)^2     \Arrow{E2} \br
        f(x)^2 - g(x)^2 \ge 0
    \end{WithArrows}
    ---
    \text{Utile.}
\end{orsteps}

\end{document}
