"use strict";var Markdown={};(function(){function a(e){return e}function b(e){return false}function d(){}d.prototype={chain:function(g,f){var e=this[g];if(!e){throw new Error("unknown hook "+g)}if(e===a){this[g]=f}else{this[g]=function(h){return f(e(h))}}},set:function(e,f){if(!this[e]){throw new Error("unknown hook "+e)}this[e]=f},addNoop:function(e){this[e]=a},addFalse:function(e){this[e]=b}};Markdown.HookCollection=d;function c(){}c.prototype={set:function(e,f){this["s_"+e]=f},get:function(e){return this["s_"+e]}};Markdown.Converter=function(){var G=this.hooks=new d();G.addNoop("plainLinkText");G.addNoop("preConversion");G.addNoop("postConversion");var j;var K;var k;var D;this.makeHtml=function(O){if(j){throw new Error("Recursive call to converter.makeHtml")}j=new c();K=new c();k=[];D=0;O=G.preConversion(O);O=O.replace(/~/g,"~T");O=O.replace(/\$/g,"~D");O=O.replace(/\r\n/g,"\n");O=O.replace(/\r/g,"\n");O="\n\n"+O+"\n\n";O=v(O);O=O.replace(/^[ \t]+$/mg,"");O=i(O);O=q(O);O=M(O);O=I(O);O=O.replace(/~D/g,"$$");O=O.replace(/~T/g,"~");O=G.postConversion(O);k=K=j=null;return O};function q(O){O=O.replace(/^[ ]{0,3}\[(.+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?(?=\s|$)[ \t]*\n?[ \t]*((\n*)["(](.+?)[")][ \t]*)?(?:\n+)/gm,function(P,Q,R,S,T,U){Q=Q.toLowerCase();j.set(Q,o(R));if(T){return S}else{if(U){K.set(Q,U.replace(/"/g,"&quot;"))}}return""});return O}function i(Q){var O="p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del";var P="p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math";Q=Q.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del)\b[^\r]*?\n<\/\2>[ \t]*(?=\n+))/gm,p);Q=Q.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math)\b[^\r]*?.*<\/\2>[ \t]*(?=\n+)\n)/gm,p);Q=Q.replace(/\n[ ]{0,3}((<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,p);Q=Q.replace(/\n\n[ ]{0,3}(<!(--(?:|(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>[ \t]*(?=\n{2,}))/g,p);Q=Q.replace(/(?:\n\n)([ ]{0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,p);return Q}function p(O,Q){var P=Q;P=P.replace(/^\n+/,"");P=P.replace(/\n+$/g,"");P="\n\n~K"+(k.push(P)-1)+"K\n\n";return P}function M(O,Q){O=H(O);var P="<hr />\n";O=O.replace(/^[ ]{0,2}([ ]?\*[ ]?){3,}[ \t]*$/gm,P);O=O.replace(/^[ ]{0,2}([ ]?-[ ]?){3,}[ \t]*$/gm,P);O=O.replace(/^[ ]{0,2}([ ]?_[ ]?){3,}[ \t]*$/gm,P);O=e(O);O=g(O);O=m(O);O=i(O);O=s(O,Q);return O}function y(O){O=F(O);O=C(O);O=B(O);O=x(O);O=A(O);O=t(O);O=O.replace(/~P/g,"://");O=o(O);O=n(O);O=O.replace(/  +\n/g," <br>\n");return O}function C(O){var P=/(<[a-z\/!$]("[^"]*"|'[^']*'|[^'">])*>|<!(--(?:|(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>)/gi;O=O.replace(P,function(Q){var R=Q.replace(/(.)<\/?code>(?=.)/g,"$1`");R=l(R,Q.charAt(1)=="!"?"\\`*_/":"\\`*_");return R});return O}function A(O){O=O.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,E);O=O.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\]\([ \t]*()<?((?:\([^)]*\)|[^()])*?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,E);O=O.replace(/(\[([^\[\]]+)\])()()()()()/g,E);return O}function E(Y,X,ab,Q,S,W,aa,P){if(P==undefined){P=""}var R=X;var T=ab.replace(/:\/\//g,"~P");var U=Q.toLowerCase();var V=S;var O=P;if(V==""){if(U==""){U=T.toLowerCase().replace(/ ?\n/g," ")}V="#"+U;if(j.get(U)!=undefined){V=j.get(U);if(K.get(U)!=undefined){O=K.get(U)}}else{if(R.search(/\(\s*\)$/m)>-1){V=""}else{return R}}}V=N(V);V=l(V,"*_");var Z='<a href="'+V+'"';if(O!=""){O=O.replace(/"/g,"&quot;");O=l(O,"*_");Z+=' title="'+O+'"'}Z+=">"+T+"</a>";return Z}function x(O){O=O.replace(/(!\[(.*?)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,w);O=O.replace(/(!\[(.*?)\]\s?\([ \t]*()<?(\S+?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,w);return O}function w(X,W,ab,Z,S,V,aa,P){var R=W;var Q=ab;var T=Z.toLowerCase();var U=S;var O=P;if(!O){O=""}if(U==""){if(T==""){T=Q.toLowerCase().replace(/ ?\n/g," ")}U="#"+T;if(j.get(T)!=undefined){U=j.get(T);if(K.get(T)!=undefined){O=K.get(T)}}else{return R}}Q=l(Q.replace(/"/g,"&quot;"),"*_[]()");U=l(U,"*_");var Y='<img src="'+U+'" alt="'+Q+'"';O=O.replace(/"/g,"&quot;");O=l(O,"*_");Y+=' title="'+O+'"';Y+=" />";return Y}function H(O){O=O.replace(/^(.+)[ \t]*\n=+[ \t]*\n+/gm,function(P,Q){return"<h1>"+y(Q)+"</h1>\n\n"});O=O.replace(/^(.+)[ \t]*\n-+[ \t]*\n+/gm,function(P,Q){return"<h2>"+y(Q)+"</h2>\n\n"});O=O.replace(/^(\#{1,6})[ \t]*(.+?)[ \t]*\#*\n+/gm,function(P,Q,S){var R=Q.length;return"<h"+R+">"+y(S)+"</h"+R+">\n\n"});return O}function e(P){P+="~0";var O=/^(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm;if(D){P=P.replace(O,function(Q,R,S){var U=R;var T=(S.search(/[*+-]/g)>-1)?"ul":"ol";var V=L(U,T);V=V.replace(/\s+$/,"");V="<"+T+">"+V+"</"+T+">\n";return V})}else{O=/(\n\n|^\n?)(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/g;P=P.replace(O,function(Q,R,S,T){var V=R;var W=S;var U=(T.search(/[*+-]/g)>-1)?"ul":"ol";var X=L(W,U);X=V+"<"+U+">\n"+X+"</"+U+">\n";return X})}P=P.replace(/~0/,"");return P}var u={ol:"\\d+[.]",ul:"[*+-]"};function L(S,R){D++;S=S.replace(/\n{2,}$/,"\n");S+="~0";var O=u[R];var P=new RegExp("(^[ \\t]*)("+O+")[ \\t]+([^\\r]+?(\\n+))(?=(~0|\\1("+O+")[ \\t]+))","gm");var Q=false;S=S.replace(P,function(U,V,W,X){var aa=X;var Z=V;var T=/\n\n$/.test(aa);var Y=T||aa.search(/\n{2,}/)>-1;if(Y||Q){aa=M(r(aa),true)}else{aa=e(r(aa));aa=aa.replace(/\n$/,"");aa=y(aa)}Q=T;return"<li>"+aa+"</li>\n"});S=S.replace(/~0/g,"");D--;return S}function g(O){O+="~0";O=O.replace(/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=~0))/g,function(Q,R,T){var P=R;var S=T;P=z(r(P));P=v(P);P=P.replace(/^\n+/g,"");P=P.replace(/\n+$/g,"");P="<pre><code>"+P+"\n</code></pre>";return"\n\n"+P+"\n\n"+S});O=O.replace(/~0/,"");return O}function h(O){O=O.replace(/(^\n+|\n+$)/g,"");return"\n\n~K"+(k.push(O)-1)+"K\n\n"}function F(O){O=O.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(P,Q,R,S,T){var U=S;U=U.replace(/^([ \t]*)/g,"");U=U.replace(/[ \t]*$/g,"");U=z(U);U=U.replace(/:\/\//g,"~P");return Q+"<code>"+U+"</code>"});return O}function z(O){O=O.replace(/&/g,"&amp;");O=O.replace(/</g,"&lt;");O=O.replace(/>/g,"&gt;");O=l(O,"*_{}[]\\",false);return O}function n(O){O=O.replace(/([\W_]|^)(\*\*|__)(?=\S)([^\r]*?\S[\*_]*)\2([\W_]|$)/g,"$1<strong>$3</strong>$4");O=O.replace(/([\W_]|^)(\*|_)(?=\S)([^\r\*_]*?\S)\2([\W_]|$)/g,"$1<em>$3</em>$4");return O}function m(O){O=O.replace(/((^[ \t]*>[ \t]?.+\n(.+\n)*\n*)+)/gm,function(Q,R){var P=R;P=P.replace(/^[ \t]*>[ \t]?/gm,"~0");P=P.replace(/~0/g,"");P=P.replace(/^[ \t]+$/gm,"");P=M(P);P=P.replace(/(^|\n)/g,"$1  ");P=P.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(S,T){var U=T;U=U.replace(/^  /mg,"~0");U=U.replace(/~0/g,"");return U});return h("<blockquote>\n"+P+"\n</blockquote>")});return O}function s(W,R){W=W.replace(/^\n+/g,"");W=W.replace(/\n+$/g,"");var V=W.split(/\n{2,}/g);var P=[];var U=/~K(\d+)K/;var O=V.length;for(var Q=0;Q<O;Q++){var T=V[Q];if(U.test(T)){P.push(T)}else{if(/\S/.test(T)){T=y(T);T=T.replace(/^([ \t]*)/g,"<p>");T+="</p>";P.push(T)}}}if(!R){O=P.length;for(var Q=0;Q<O;Q++){var S=true;while(S){S=false;P[Q]=P[Q].replace(/~K(\d+)K/g,function(Y,X){S=true;return k[X]})}}}return P.join("\n\n")}function o(O){O=O.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;");O=O.replace(/<(?![a-z\/?\$!])/gi,"&lt;");return O}function B(O){O=O.replace(/\\(\\)/g,f);O=O.replace(/\\([`*_{}\[\]()>#+-.!])/g,f);return O}function t(P){P=P.replace(/(^|\s)(https?|ftp)(:\/\/[-A-Z0-9+&@#\/%?=~_|\[\]\(\)!:,\.;]*[-A-Z0-9+&@#\/%=~_|\[\]])($|\W)/gi,"$1<$2$3>$4");var O=function(Q,R){return'<a href="'+R+'">'+G.plainLinkText(R)+"</a>"};P=P.replace(/<((https?|ftp):[^'">\s]+)>/gi,O);return P}function I(O){O=O.replace(/~E(\d+)E/g,function(P,R){var Q=parseInt(R);return String.fromCharCode(Q)});return O}function r(O){O=O.replace(/^(\t|[ ]{1,4})/gm,"~0");O=O.replace(/~0/g,"");return O}function v(O){if(!/\t/.test(O)){return O}var R=["    ","   ","  "," "],P=0,Q;return O.replace(/[\n\t]/g,function(T,S){if(T==="\n"){P=S+1;return T}Q=(S-P)%4;P=S+1;return R[Q]})}var J=/(?:["'*()[\]:]|~D)/g;function N(P){if(!P){return""}var O=P.length;return P.replace(J,function(R,Q){if(R=="~D"){return"%24"}if(R==":"){if(Q==O-1||/[0-9\/]/.test(P.charAt(Q+1))){return":"}}return"%"+R.charCodeAt(0).toString(16)})}function l(S,Q,P){var O="(["+Q.replace(/([\[\]\\])/g,"\\$1")+"])";if(P){O="\\\\"+O}var R=new RegExp(O,"g");S=S.replace(R,f);return S}function f(O,P){var Q=P.charCodeAt(0);return"~E"+Q+"E"}}})();(function(){var o={},t={},s={},f=window.document,q=window.RegExp,c=window.navigator,n={lineLength:72},b={isIE:/msie/.test(c.userAgent.toLowerCase()),isIE_5or6:/msie 6/.test(c.userAgent.toLowerCase())||/msie 5/.test(c.userAgent.toLowerCase()),isOpera:/opera/.test(c.userAgent.toLowerCase())};var u='<p><b>Insert Hyperlink</b></p><p>http://example.com/ "optional title"</p>';var k="<p><b>Insert Image</b></p><p>http://example.com/images/diagram.jpg \"optional title\"<br><br>Need <a href='http://www.google.com/search?q=free+image+hosting' target='_blank'>free image hosting?</a></p>";var d="http://";var p="http://";var j="Markdown Editing Help";Markdown.Editor=function(w,B,y){B=B||"";var x=this.hooks=new Markdown.HookCollection();x.addNoop("onPreviewRefresh");x.addNoop("postBlockquoteCreation");x.addFalse("insertImageDialog");this.getConverter=function(){return w};var z=this,A;this.run=function(){if(A){return}A=new a(B);var G=new r(x);var F=new i(w,A,function(){x.onPreviewRefresh()});var E,C;if(!/\?noundo/.test(f.location.href)){E=new e(function(){F.refresh();if(C){C.setUndoRedoButtonStates()}},A)}C=new v(B,A,E,F,G,y);C.setUndoRedoButtonStates();var D=z.refreshPreview=function(){F.refresh(true)};D()}};function l(){}l.prototype.findTags=function(y,w){var x=this;var z;if(y){z=o.extendRegExp(y,"","$");this.before=this.before.replace(z,function(A){x.startTag=x.startTag+A;return""});z=o.extendRegExp(y,"^","");this.selection=this.selection.replace(z,function(A){x.startTag=x.startTag+A;return""})}if(w){z=o.extendRegExp(w,"","$");this.selection=this.selection.replace(z,function(A){x.endTag=A+x.endTag;return""});z=o.extendRegExp(w,"^","");this.after=this.after.replace(z,function(A){x.endTag=A+x.endTag;return""})}};l.prototype.trimWhitespace=function(x){var z,y,w=this;if(x){z=y=""}else{z=function(A){w.before+=A;return""};y=function(A){w.after=A+w.after;return""}}this.selection=this.selection.replace(/^(\s*)/,z).replace(/(\s*)$/,y)};l.prototype.skipLines=function(w,x,A){if(w===undefined){w=1}if(x===undefined){x=1}w++;x++;var z;var y;if(navigator.userAgent.match(/Chrome/)){"X".match(/()./)}this.selection=this.selection.replace(/(^\n*)/,"");this.startTag=this.startTag+q.$1;this.selection=this.selection.replace(/(\n*$)/,"");this.endTag=this.endTag+q.$1;this.startTag=this.startTag.replace(/(^\n*)/,"");this.before=this.before+q.$1;this.endTag=this.endTag.replace(/(\n*$)/,"");this.after=this.after+q.$1;if(this.before){z=y="";while(w--){z+="\\n?";y+="\n"}if(A){z="\\n*"}this.before=this.before.replace(new q(z+"$",""),y)}if(this.after){z=y="";while(x--){z+="\\n?";y+="\n"}if(A){z="\\n*"}this.after=this.after.replace(new q(z,""),y)}};function a(w){this.buttonBar=f.getElementById("wmd-button-bar"+w);this.preview=f.getElementById("wmd-preview"+w);this.input=f.getElementById("wmd-input"+w)}o.isVisible=function(w){if(window.getComputedStyle){return window.getComputedStyle(w,null).getPropertyValue("display")!=="none"}else{if(w.currentStyle){return w.currentStyle.display!=="none"}}};o.addEvent=function(y,x,w){if(y.attachEvent){y.attachEvent("on"+x,w)}else{y.addEventListener(x,w,false)}};o.removeEvent=function(y,x,w){if(y.detachEvent){y.detachEvent("on"+x,w)}else{y.removeEventListener(x,w,false)}};o.fixEolChars=function(w){w=w.replace(/\r\n/g,"\n");w=w.replace(/\r/g,"\n");return w};o.extendRegExp=function(y,A,x){if(A===null||A===undefined){A=""}if(x===null||x===undefined){x=""}var z=y.toString();var w;z=z.replace(/\/([gim]*)$/,"");w=q.$1;z=z.replace(/(^\/|\/$)/g,"");z=A+z+x;return new q(z,w)};t.getTop=function(x,y){var w=x.offsetTop;if(!y){while(x=x.offsetParent){w+=x.offsetTop}}return w};t.getHeight=function(w){return w.offsetHeight||w.scrollHeight};t.getWidth=function(w){return w.offsetWidth||w.scrollWidth};t.getPageSize=function(){var y,z;var A,w;if(self.innerHeight&&self.scrollMaxY){y=f.body.scrollWidth;z=self.innerHeight+self.scrollMaxY}else{if(f.body.scrollHeight>f.body.offsetHeight){y=f.body.scrollWidth;z=f.body.scrollHeight}else{y=f.body.offsetWidth;z=f.body.offsetHeight}}if(self.innerHeight){A=self.innerWidth;w=self.innerHeight}else{if(f.documentElement&&f.documentElement.clientHeight){A=f.documentElement.clientWidth;w=f.documentElement.clientHeight}else{if(f.body){A=f.body.clientWidth;w=f.body.clientHeight}}}var B=Math.max(y,A);var x=Math.max(z,w);return[B,x,A,w]};function e(A,w){var z=this;var D=[];var E=0;var x="none";var G;var J;var H;var K=function(N,M){if(x!=N){x=N;if(!M){I()}}if(!b.isIE||x!="moving"){J=setTimeout(L,1)}else{H=null}};var L=function(M){H=new h(w,M);J=undefined};this.setCommandMode=function(){x="command";I();J=setTimeout(L,0)};this.canUndo=function(){return E>1};this.canRedo=function(){if(D[E+1]){return true}return false};this.undo=function(){if(z.canUndo()){if(G){G.restore();G=null}else{D[E]=new h(w);D[--E].restore();if(A){A()}}}x="none";w.input.focus();L()};this.redo=function(){if(z.canRedo()){D[++E].restore();if(A){A()}}x="none";w.input.focus();L()};var I=function(){var M=H||new h(w);if(!M){return false}if(x=="moving"){if(!G){G=M}return}if(G){if(D[E-1].text!=G.text){D[E++]=G}G=null}D[E++]=M;D[E+1]=null;if(A){A()}};var F=function(N){var P=false;if(N.ctrlKey||N.metaKey){var O=N.charCode||N.keyCode;var M=String.fromCharCode(O);switch(M){case"y":z.redo();P=true;break;case"z":if(!N.shiftKey){z.undo()}else{z.redo()}P=true;break}}if(P){if(N.preventDefault){N.preventDefault()}if(window.event){window.event.returnValue=false}return}};var y=function(N){if(!N.ctrlKey&&!N.metaKey){var M=N.keyCode;if((M>=33&&M<=40)||(M>=63232&&M<=63235)){K("moving")}else{if(M==8||M==46||M==127){K("deleting")}else{if(M==13){K("newlines")}else{if(M==27){K("escape")}else{if((M<16||M>20)&&M!=91){K("typing")}}}}}}};var B=function(){o.addEvent(w.input,"keypress",function(N){if((N.ctrlKey||N.metaKey)&&(N.keyCode==89||N.keyCode==90)){N.preventDefault()}});var M=function(){if(b.isIE||(H&&H.text!=w.input.value)){if(J==undefined){x="paste";I();L()}}};o.addEvent(w.input,"keydown",F);o.addEvent(w.input,"keydown",y);o.addEvent(w.input,"mousedown",function(){K("moving")});w.input.onpaste=M;w.input.ondrop=M};var C=function(){B();L(true);I()};C()}function h(z,w){var y=this;var x=z.input;this.init=function(){if(!o.isVisible(x)){return}if(!w&&f.activeElement&&f.activeElement!==x){return}this.setInputAreaSelectionStartEnd();this.scrollTop=x.scrollTop;if(!this.text&&x.selectionStart||x.selectionStart===0){this.text=x.value}};this.setInputAreaSelection=function(){if(!o.isVisible(x)){return}if(x.selectionStart!==undefined&&!b.isOpera){x.focus();x.selectionStart=y.start;x.selectionEnd=y.end;x.scrollTop=y.scrollTop}else{if(f.selection){if(f.activeElement&&f.activeElement!==x){return}x.focus();var A=x.createTextRange();A.moveStart("character",-x.value.length);A.moveEnd("character",-x.value.length);A.moveEnd("character",y.end);A.moveStart("character",y.start);A.select()}}};this.setInputAreaSelectionStartEnd=function(){if(!z.ieCachedRange&&(x.selectionStart||x.selectionStart===0)){y.start=x.selectionStart;y.end=x.selectionEnd}else{if(f.selection){y.text=o.fixEolChars(x.value);var B=z.ieCachedRange||f.selection.createRange();var A=o.fixEolChars(B.text);var D="\x07";var E=D+A+D;B.text=E;var F=o.fixEolChars(x.value);B.moveStart("character",-E.length);B.text=A;y.start=F.indexOf(D);y.end=F.lastIndexOf(D)-D.length;var C=y.text.length-o.fixEolChars(x.value).length;if(C){B.moveStart("character",-A.length);while(C--){A+="\n";y.end+=1}B.text=A}if(z.ieCachedRange){y.scrollTop=z.ieCachedScrollTop}z.ieCachedRange=null;this.setInputAreaSelection()}}};this.restore=function(){if(y.text!=undefined&&y.text!=x.value){x.value=y.text}this.setInputAreaSelection();x.scrollTop=y.scrollTop};this.getChunks=function(){var A=new l();A.before=o.fixEolChars(y.text.substring(0,y.start));A.startTag="";A.selection=o.fixEolChars(y.text.substring(y.start,y.end));A.endTag="";A.after=o.fixEolChars(y.text.substring(y.end));A.scrollTop=y.scrollTop;return A};this.setChunks=function(A){A.before=A.before+A.startTag;A.after=A.endTag+A.after;this.start=A.before.length;this.end=A.before.length+A.selection.length;this.text=A.before+A.selection+A.after;this.scrollTop=A.scrollTop};this.init()}function i(E,x,M){var Q=this;var G;var R;var w;var y=3000;var N="delayed";var J=function(S,T){o.addEvent(S,"input",T);S.onpaste=T;S.ondrop=T;o.addEvent(S,"keypress",T);o.addEvent(S,"keydown",T)};var C=function(){var S=0;if(window.innerHeight){S=window.pageYOffset}else{if(f.documentElement&&f.documentElement.scrollTop){S=f.documentElement.scrollTop}else{if(f.body){S=f.body.scrollTop}}}return S};var H=function(){if(!x.preview){return}var U=x.input.value;if(U&&U==w){return}else{w=U}var T=new Date().getTime();U=E.makeHtml(U);var S=new Date().getTime();R=S-T;L(U)};var P=function(){if(G){clearTimeout(G);G=undefined}if(N!=="manual"){var S=0;if(N==="delayed"){S=R}if(S>y){S=y}G=setTimeout(H,S)}};var A=function(S){if(S.scrollHeight<=S.clientHeight){return 1}return S.scrollTop/(S.scrollHeight-S.clientHeight)};var D=function(){if(x.preview){x.preview.scrollTop=(x.preview.scrollHeight-x.preview.clientHeight)*A(x.preview)}};this.refresh=function(S){if(S){w="";H()}else{P()}};this.processingTime=function(){return R};var F=true;var K=function(V){var U=x.preview;var S=U.parentNode;var T=U.nextSibling;S.removeChild(U);U.innerHTML=V;if(!T){S.appendChild(U)}else{S.insertBefore(U,T)}};var B=function(S){x.preview.innerHTML=S};var O;var z=function(T){if(O){return O(T)}try{B(T);O=B}catch(S){O=K;O(T)}};var L=function(U){var S=t.getTop(x.input)-C();if(x.preview){z(U);M()}D();if(F){F=false;return}var T=t.getTop(x.input)-C();if(b.isIE){setTimeout(function(){window.scrollBy(0,T-S)},0)}else{window.scrollBy(0,T-S)}};var I=function(){J(x.input,P);H();if(x.preview){x.preview.scrollTop=0}};I()}s.createBackground=function(){var y=f.createElement("div"),w=y.style;y.className="wmd-prompt-background";w.position="absolute";w.top="0";w.zIndex="1000";if(b.isIE){w.filter="alpha(opacity=50)"}else{w.opacity="0.5"}var x=t.getPageSize();w.height=x[1]+"px";if(b.isIE){w.left=f.documentElement.scrollLeft;w.width=f.documentElement.clientWidth}else{w.left="0";w.width="100%"}f.body.appendChild(y);return y};s.prompt=function(D,C,y){var B;var A;if(C===undefined){C=""}var x=function(E){var F=(E.charCode||E.keyCode);if(F===27){z(true)}};var z=function(E){o.removeEvent(f.body,"keydown",x);var F=A.value;if(E){F=null}else{F=F.replace("http://http://","http://");F=F.replace("http://https://","https://");F=F.replace("http://ftp://","ftp://");if(F.indexOf("http://")===-1&&F.indexOf("ftp://")===-1&&F.indexOf("https://")===-1){F="http://"+F}}B.parentNode.removeChild(B);y(F);return false};var w=function(){B=f.createElement("div");B.className="wmd-prompt-dialog";B.style.padding="10px;";B.style.position="fixed";B.style.width="400px";B.style.zIndex="1001";var H=f.createElement("div");H.innerHTML=D;H.style.padding="5px";B.appendChild(H);var F=f.createElement("form"),E=F.style;F.onsubmit=function(){return z(false)};E.padding="0";E.margin="0";E.cssFloat="left";E.width="100%";E.textAlign="center";E.position="relative";B.appendChild(F);A=f.createElement("input");A.type="text";A.value=C;E=A.style;E.display="block";E.width="80%";E.marginLeft=E.marginRight="auto";F.appendChild(A);var I=f.createElement("input");I.type="button";I.onclick=function(){return z(false)};I.value="OK";E=I.style;E.margin="10px";E.display="inline";E.width="7em";var G=f.createElement("input");G.type="button";G.onclick=function(){return z(true)};G.value="Cancel";E=G.style;E.margin="10px";E.display="inline";E.width="7em";F.appendChild(I);F.appendChild(G);o.addEvent(f.body,"keydown",x);B.style.top="50%";B.style.left="50%";B.style.display="block";if(b.isIE_5or6){B.style.position="absolute";B.style.top=f.documentElement.scrollTop+200+"px";B.style.left="50%"}f.body.appendChild(B);B.style.marginTop=-(t.getHeight(B)/2)+"px";B.style.marginLeft=-(t.getWidth(B)/2)+"px"};setTimeout(function(){w();var F=C.length;if(A.selectionStart!==undefined){A.selectionStart=0;A.selectionEnd=F}else{if(A.createTextRange){var E=A.createTextRange();E.collapse(false);E.moveStart("character",-F);E.moveEnd("character",F);E.select()}}A.focus()},0)};function v(z,x,w,E,I,F){var C=x.input,G={};H();var B="keydown";if(b.isOpera){B="keypress"}o.addEvent(C,B,function(M){if((M.ctrlKey||M.metaKey)&&!M.altKey){var L=M.charCode||M.keyCode;var K=String.fromCharCode(L).toLowerCase();switch(K){case"b":A(G.bold);break;case"i":A(G.italic);break;case"l":A(G.link);break;case"q":A(G.quote);break;case"k":A(G.code);break;case"g":A(G.image);break;case"o":A(G.olist);break;case"u":A(G.ulist);break;case"h":A(G.heading);break;case"r":A(G.hr);break;case"y":A(G.redo);break;case"z":if(M.shiftKey){A(G.redo)}else{A(G.undo)}break;default:return}if(M.preventDefault){M.preventDefault()}if(window.event){window.event.returnValue=false}}});o.addEvent(C,"keyup",function(K){if(K.shiftKey&&!K.ctrlKey&&!K.metaKey){var L=K.charCode||K.keyCode;if(L===13){fakeButton={};fakeButton.textOp=D("doAutoindent");A(fakeButton)}}});if(b.isIE){o.addEvent(C,"keydown",function(K){var L=K.keyCode;if(L===27){return false}})}function A(K){C.focus();if(K.textOp){if(w){w.setCommandMode()}var O=new h(x);if(!O){return}var N=O.getChunks();var M=function(){C.focus();if(N){O.setChunks(N)}O.restore();E.refresh()};var L=K.textOp(N,M);if(!L){M()}}if(K.execute){K.execute(w)}}function y(L,O){var K="0px";var N="-20px";var P="-40px";var M=L.getElementsByTagName("span")[0];if(O){M.style.backgroundPosition=L.XShift+" "+K;L.onmouseover=function(){M.style.backgroundPosition=this.XShift+" "+P};L.onmouseout=function(){M.style.backgroundPosition=this.XShift+" "+K};if(b.isIE){L.onmousedown=function(){if(f.activeElement&&f.activeElement!==x.input){return}x.ieCachedRange=document.selection.createRange();x.ieCachedScrollTop=x.input.scrollTop}}if(!L.isHelp){L.onclick=function(){if(this.onmouseout){this.onmouseout()}A(this);return false}}}else{M.style.backgroundPosition=L.XShift+" "+N;L.onmouseover=L.onmouseout=L.onclick=function(){}}}function D(K){if(typeof K==="string"){K=I[K]}return function(){K.apply(I,arguments)}}function H(){var L=x.buttonBar;var K="0px";var P="-20px";var T="-40px";var U=document.createElement("ul");U.id="wmd-button-row"+z;U.className="wmd-button-row";U=L.appendChild(U);var N=0;var O=function(X,W,Z,aa){var V=document.createElement("li");V.className="wmd-button";V.style.left=N+"px";N+=25;var Y=document.createElement("span");V.id=X+z;V.appendChild(Y);V.title=W;V.XShift=Z;if(aa){V.textOp=aa}y(V,true);U.appendChild(V);return V};var M=function(W){var V=document.createElement("li");V.className="wmd-spacer wmd-spacer"+W;V.id="wmd-spacer"+W+z;U.appendChild(V);N+=25};G.bold=O("wmd-bold-button","Strong <strong> Ctrl+B","0px",D("doBold"));G.italic=O("wmd-italic-button","Emphasis <em> Ctrl+I","-20px",D("doItalic"));M(1);G.link=O("wmd-link-button","Hyperlink <a> Ctrl+L","-40px",D(function(W,V){return this.doLinkOrImage(W,V,false)}));G.quote=O("wmd-quote-button","Blockquote <blockquote> Ctrl+Q","-60px",D("doBlockquote"));G.code=O("wmd-code-button","Code Sample <pre><code> Ctrl+K","-80px",D("doCode"));G.image=O("wmd-image-button","Image <img> Ctrl+G","-100px",D(function(W,V){return this.doLinkOrImage(W,V,true)}));M(2);G.olist=O("wmd-olist-button","Numbered List <ol> Ctrl+O","-120px",D(function(W,V){this.doList(W,V,true)}));G.ulist=O("wmd-ulist-button","Bulleted List <ul> Ctrl+U","-140px",D(function(W,V){this.doList(W,V,false)}));G.heading=O("wmd-heading-button","Heading <h1>/<h2> Ctrl+H","-160px",D("doHeading"));G.hr=O("wmd-hr-button","Horizontal Rule <hr> Ctrl+R","-180px",D("doHorizontalRule"));M(3);G.undo=O("wmd-undo-button","Undo - Ctrl+Z","-200px",null);G.undo.execute=function(V){if(V){V.undo()}};var R=/win/.test(c.platform.toLowerCase())?"Redo - Ctrl+Y":"Redo - Ctrl+Shift+Z";G.redo=O("wmd-redo-button",R,"-220px",null);G.redo.execute=function(V){if(V){V.redo()}};if(F){var Q=document.createElement("li");var S=document.createElement("span");Q.appendChild(S);Q.className="wmd-button wmd-help-button";Q.id="wmd-help-button"+z;Q.XShift="-240px";Q.isHelp=true;Q.style.right="0px";Q.title=F.title||j;Q.onclick=F.handler;y(Q,true);U.appendChild(Q);G.help=Q}J()}function J(){if(w){y(G.undo,w.canUndo());y(G.redo,w.canRedo())}}this.setUndoRedoButtonStates=J}function r(w){this.hooks=w}var m=r.prototype;m.prefixes="(?:\\s{4,}|\\s*>|\\s*-\\s+|\\s*\\d+\\.|=|\\+|-|_|\\*|#|\\s*\\[[^\n]]+\\]:)";m.unwrap=function(x){var w=new q("([^\\n])\\n(?!(\\n|"+this.prefixes+"))","g");x.selection=x.selection.replace(w,"$1 $2")};m.wrap=function(z,y){this.unwrap(z);var w=new q("(.{1,"+y+"})( +|$\\n?)","gm"),x=this;z.selection=z.selection.replace(w,function(B,A){if(new q("^"+x.prefixes,"").test(B)){return B}return A+"\n"});z.selection=z.selection.replace(/\s+$/,"")};m.doBold=function(x,w){return this.doBorI(x,w,2,"strong text")};m.doItalic=function(x,w){return this.doBorI(x,w,1,"emphasized text")};m.doBorI=function(B,A,z,E){B.trimWhitespace();B.selection=B.selection.replace(/\n{2,}/g,"\n");var x=/(\**$)/.exec(B.before)[0];var w=/(^\**)/.exec(B.after)[0];var y=Math.min(x.length,w.length);if((y>=z)&&(y!=2||z!=1)){B.before=B.before.replace(q("[*]{"+z+"}$",""),"");B.after=B.after.replace(q("^[*]{"+z+"}",""),"")}else{if(!B.selection&&w){B.after=B.after.replace(/^([*_]*)/,"");B.before=B.before.replace(/(\s?)$/,"");var D=q.$1;B.before=B.before+w+D}else{if(!B.selection&&!w){B.selection=E}var C=z<=1?"*":"**";B.before=B.before+C;B.after=C+B.after}}return};m.stripLinkDefs=function(w,x){w=w.replace(/^[ ]{0,3}\[(\d+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?[ \t]*\n?[ \t]*(?:(\n*)["(](.+?)[")][ \t]*)?(?:\n+|$)/gm,function(y,z,A,B,C){x[z]=y.replace(/\s*$/,"");if(B){x[z]=y.replace(/["(](.+?)[")]$/,"");return B+C}return""});return w};m.addLinkDef=function(B,y){var x=0;var E={};B.before=this.stripLinkDefs(B.before,E);B.selection=this.stripLinkDefs(B.selection,E);B.after=this.stripLinkDefs(B.after,E);var w="";var z=/(\[)((?:\[[^\]]*\]|[^\[\]])*)(\][ ]?(?:\n[ ]*)?\[)(\d+)(\])/g;var A=function(F){x++;F=F.replace(/^[ ]{0,3}\[(\d+)\]:/,"  ["+x+"]:");w+="\n"+F};var D=function(G,I,K,J,H,F){K=K.replace(z,D);if(E[H]){A(E[H]);return I+K+J+x+F}return G};B.before=B.before.replace(z,D);if(y){A(y)}else{B.selection=B.selection.replace(z,D)}var C=x;B.after=B.after.replace(z,D);if(B.after){B.after=B.after.replace(/\n*$/,"")}if(!B.after){B.selection=B.selection.replace(/\n*$/,"")}B.after+="\n\n"+w;return C};function g(w){return w.replace(/^\s*(.*?)(?:\s+"(.+)")?\s*$/,function(y,x,z){x=x.replace(/\?.*$/,function(A){return A.replace(/\+/g," ")});x=decodeURIComponent(x);x=encodeURI(x).replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29");x=x.replace(/\?.*$/,function(A){return A.replace(/\+/g,"%2b")});if(z){z=z.trim?z.trim():z.replace(/^\s*/,"").replace(/\s*$/,"");z=$.trim(z).replace(/"/g,"quot;").replace(/\(/g,"&#40;").replace(/\)/g,"&#41;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}return z?x+' "'+z+'"':x})}m.doLinkOrImage=function(z,y,w){z.trimWhitespace();z.findTags(/\s*!?\[/,/\][ ]?(?:\n[ ]*)?(\[.*?\])?/);var A;if(z.endTag.length>1&&z.startTag.length>0){z.startTag=z.startTag.replace(/!?\[/,"");z.endTag="";this.addLinkDef(z,null)}else{z.selection=z.startTag+z.selection+z.endTag;z.startTag=z.endTag="";if(/\n\n/.test(z.selection)){this.addLinkDef(z,null);return}var B=this;var x=function(D){A.parentNode.removeChild(A);if(D!==null){z.selection=(" "+z.selection).replace(/([^\\](?:\\\\)*)(?=[[\]])/g,"$1\\").substr(1);var E=" [999]: "+g(D);var C=B.addLinkDef(z,E);z.startTag=w?"![":"[";z.endTag="]["+C+"]";if(!z.selection){if(w){z.selection="enter image description here"}else{z.selection="enter link description here"}}}y()};A=s.createBackground();if(w){if(!this.hooks.insertImageDialog(x)){s.prompt(k,d,x)}}else{s.prompt(u,p,x)}return true}};m.doAutoindent=function(y,x){var w=this;y.before=y.before.replace(/(\n|^)[ ]{0,3}([*+-]|\d+[.])[ \t]*\n$/,"\n\n");y.before=y.before.replace(/(\n|^)[ ]{0,3}>[ \t]*\n$/,"\n\n");y.before=y.before.replace(/(\n|^)[ \t]+\n$/,"\n\n");if(/(\n|^)[ ]{0,3}([*+-]|\d+[.])[ \t]+.*\n$/.test(y.before)){if(w.doList){w.doList(y)}}if(/(\n|^)[ ]{0,3}>[ \t]+.*\n$/.test(y.before)){if(w.doBlockquote){w.doBlockquote(y)}}if(/(\n|^)(\t|[ ]{4,}).*\n$/.test(y.before)){if(w.doCode){w.doCode(y)}}};m.doBlockquote=function(C,B){C.selection=C.selection.replace(/^(\n*)([^\r]+?)(\n*)$/,function(J,G,H,I){C.before+=G;C.after=I+C.after;return H});C.before=C.before.replace(/(>[ \t]*)$/,function(G,H){C.selection=H+C.selection;return""});C.selection=C.selection.replace(/^(\s|>)+$/,"");C.selection=C.selection||"Blockquote";var z="",E="",A;if(C.before){var D=C.before.replace(/\n$/,"").split("\n");var y=false;for(var w=0;w<D.length;w++){var x=false;A=D[w];y=y&&A.length>0;if(/^>/.test(A)){x=true;if(!y&&A.length>1){y=true}}else{if(/^[ \t]*$/.test(A)){x=true}else{x=y}}if(x){z+=A+"\n"}else{E+=z+A;z="\n"}}if(!/(^|\n)>/.test(z)){E+=z;z=""}}C.startTag=z;C.before=E;if(C.after){C.after=C.after.replace(/^\n?/,"\n")}C.after=C.after.replace(/^(((\n|^)(\n[ \t]*)*>(.+\n)*.*)+(\n[ \t]*)*)/,function(G){C.endTag=G;return""});var F=function(H){var G=H?"> ":"";if(C.startTag){C.startTag=C.startTag.replace(/\n((>|\s)*)\n$/,function(I,J){return"\n"+J.replace(/^[ ]{0,3}>?[ \t]*$/gm,G)+"\n"})}if(C.endTag){C.endTag=C.endTag.replace(/^\n((>|\s)*)\n/,function(I,J){return"\n"+J.replace(/^[ ]{0,3}>?[ \t]*$/gm,G)+"\n"})}};if(/^(?![ ]{0,3}>)/m.test(C.selection)){this.wrap(C,n.lineLength-2);C.selection=C.selection.replace(/^/gm,"> ");F(true);C.skipLines()}else{C.selection=C.selection.replace(/^[ ]{0,3}> ?/gm,"");this.unwrap(C);F(false);if(!/^(\n|^)[ ]{0,3}>/.test(C.selection)&&C.startTag){C.startTag=C.startTag.replace(/\n{0,2}$/,"\n\n")}if(!/(\n|^)[ ]{0,3}>.*$/.test(C.selection)&&C.endTag){C.endTag=C.endTag.replace(/^\n{0,2}/,"\n\n")}}C.selection=this.hooks.postBlockquoteCreation(C.selection);if(!/\n/.test(C.selection)){C.selection=C.selection.replace(/^(> *)/,function(H,G){C.startTag+=G;return""})}};m.doCode=function(A,z){var B=/\S[ ]*$/.test(A.before);var x=/^[ ]*\S/.test(A.after);if((!x&&!B)||/\n/.test(A.selection)){A.before=A.before.replace(/[ ]{4}$/,function(C){A.selection=C+A.selection;return""});var y=1;var w=1;if(/\n(\t|[ ]{4,}).*\n$/.test(A.before)){y=0}if(/^\n(\t|[ ]{4,})/.test(A.after)){w=0}A.skipLines(y,w);if(!A.selection){A.startTag="    ";A.selection="enter code here"}else{if(/^[ ]{0,3}\S/m.test(A.selection)){A.selection=A.selection.replace(/^/gm,"    ")}else{A.selection=A.selection.replace(/^[ ]{4}/gm,"")}}}else{A.trimWhitespace();A.findTags(/`/,/`/);if(!A.startTag&&!A.endTag){A.startTag=A.endTag="`";if(!A.selection){A.selection="enter code here"}}else{if(A.endTag&&!A.startTag){A.before+=A.endTag;A.endTag=""}else{A.startTag=A.endTag=""}}}};m.doList=function(J,E,B){var I=/(\n|^)(([ ]{0,3}([*+-]|\d+[.])[ \t]+.*)(\n.+|\n{2,}([*+-].*|\d+[.])[ \t]+.*|\n{2,}[ \t]+\S.*)*)\n*$/;var F=/^\n*(([ ]{0,3}([*+-]|\d+[.])[ \t]+.*)(\n.+|\n{2,}([*+-].*|\d+[.])[ \t]+.*|\n{2,}[ \t]+\S.*)*)\n*/;var x="-";var w=1;var C=function(){var K;if(B){K=" "+w+". ";w++}else{K=" "+x+" "}return K};var G=function(K){if(B===undefined){B=/^\s*\d/.test(K)}K=K.replace(/^[ ]{0,3}([*+-]|\d+[.])\s/gm,function(L){return C()});return K};J.findTags(/(\n|^)*[ ]{0,3}([*+-]|\d+[.])\s+/,null);if(J.before&&!/\n$/.test(J.before)&&!/^\n/.test(J.startTag)){J.before+=J.startTag;J.startTag=""}if(J.startTag){var H=/\d+[.]/.test(J.startTag);J.startTag="";J.selection=J.selection.replace(/\n[ ]{4}/g,"\n");this.unwrap(J);J.skipLines();if(H){J.after=J.after.replace(F,G)}if(B==H){return}}var D=1;J.before=J.before.replace(I,function(K){if(/^\s*([*+-])/.test(K)){x=q.$1}D=/[^\n]\n\n[^\n]/.test(K)?1:0;return G(K)});if(!J.selection){J.selection="List item"}var y=C();var A=1;J.after=J.after.replace(F,function(K){A=/[^\n]\n\n[^\n]/.test(K)?1:0;return G(K)});J.trimWhitespace(true);J.skipLines(D,A,true);J.startTag=y;var z=y.replace(/./g," ");this.wrap(J,n.lineLength-z.length);J.selection=J.selection.replace(/\n/g,"\n"+z)};m.doHeading=function(A,z){A.selection=A.selection.replace(/\s+/g," ");A.selection=A.selection.replace(/(^\s+|\s+$)/g,"");if(!A.selection){A.startTag="## ";A.selection="Heading";A.endTag=" ##";return}var B=0;A.findTags(/#+[ ]*/,/[ ]*#+/);if(/#+/.test(A.startTag)){B=q.lastMatch.length}A.startTag=A.endTag="";A.findTags(null,/\s?(-+|=+)/);if(/=+/.test(A.endTag)){B=1}if(/-+/.test(A.endTag)){B=2}A.startTag=A.endTag="";A.skipLines(1,1);var w=B==0?2:B-1;if(w>0){var x=w>=2?"-":"=";var y=A.selection.length;if(y>n.lineLength){y=n.lineLength}A.endTag="\n";while(y--){A.endTag+=x}}};m.doHorizontalRule=function(x,w){x.startTag="----------\n";x.selection="";x.skipLines(2,1,true)}})();(function(){if(StackExchange.MarkdownEditor){return}var k,d;var A=[];function y(){for(var F=0;F<A.length;F++){A[F].refreshPreview()}}var x=b(y);StackExchange.MarkdownEditor=function(I){var J=I.postfix||"";k=$("#hlinks a").filter(function(){return $(this).text()=="main"}).attr("href");d=!!k;var F=new Markdown.Converter();F.hooks.chain("postConversion",x);F.hooks.chain("postConversion",u);F.hooks.chain("postConversion",C);F.hooks.chain("postConversion",r);F.hooks.chain("postConversion",l);var H=new s({postfix:J});var G=new Markdown.Editor(F,J,{handler:H.toggle});G.hooks.chain("postBlockquoteCreation",q);if(!StackExchange.options.disableImageUploads){G.hooks.set("insertImageDialog",D)}if(I.editorCreationCallback){I.editorCreationCallback(G)}A.push(G);G.run();if(I.immediatelyShowMarkdownHelp){H.showOnce(I)}else{if(I.autoShowMarkdownHelp){$("#wmd-input"+J).one("focus",function(){H.showOnce(I)})}}G.disableSubmission=function(){$("#submit-button"+J).attr("disabled","disabled");StackExchange.navPrevention.stop()};return G};StackExchange.MarkdownEditor.refreshAllPreviews=y;function q(H){var G=H.match(/^\s*>\s*!/mg);if(G&&G.length==H.split("\n").length){var F=false;H=H.replace(/(.*) (\w)/,function(K,J,I){F=true;return J+"\n> "+I});if(!F){H=H.replace(/^(\s*>\s*)!/m,"$1&#33;")}}return H}function r(I){var F=/\<blockquote\>[\n\s]*?\<p\>[\n\s]*?(![\s\S]*?)\<\/p\>[\n\s]*?\<\/blockquote\>/g;var H=/^\s*?[^\s!]/m;var G=/^\s*?!/gm;I=I.replace(F,function(K,L,M,J){if(H.test(L)){return K}K=K.replace(L,L.replace(G,""));K=K.replace("<blockquote>",'<blockquote class="spoiler">');return K});return I}function t(J){var H=[];var F=/<(a|code)[^>]*>/ig;var G;while((G=F.exec(J))!=null){H.push(G.index);var I=new RegExp("</"+G[1]+">","ig");I.lastIndex=F.lastIndex;var K=I.exec(J);if(K==null){break}H.push(I.lastIndex);F.lastIndex=I.lastIndex}return H}function l(H){if(!window.tagRendererRaw){return H}var F,G;H=H.replace(/\[(meta-)?tag:([a-z0-9#+.-]+)\]/gi,function(K,O,I,M){if(!d&&O){return K}if(!F){F=t(H);G=F.length}var L=false;for(var J=0;J<G;J++){if(F[J]>M){break}L=!L}if(L){return K}var N=null;if(d&&!O){N=k}return tagRendererRaw(I,N)});return H}var e;function u(G){var H,F,I,J;if(typeof e=="undefined"){e=StackExchange.options.styleCode}if(e){H=B(G);F=B(H+G);G=i(G,H,F)}var I=z(G);if(e){I=o(I,H,F)}return I}function z(F){return F.replace(/<[^>]*>?/gi,v)}StackExchange.MarkdownEditor.sanitizeHtml=z;var f=/^(<\/?(b|blockquote|code|del|dd|dl|dt|em|h1|h2|h3|i|kbd|li|ol|p|pre|s|sup|sub|strong|strike|ul)>|<(br|hr)\s?\/?>)$/i;var j=/^(<a\shref="((https?|ftp):\/\/|\/)[-A-Za-z0-9+&@#\/%?=~_|!:,.;\(\)]+"(\stitle="[^"<>]+")?\s?>|<\/a>)$/i;var a=/^(<img\ssrc="(https?:\/\/|\/)[-A-Za-z0-9+&@#\/%?=~_|!:,.;\(\)]+"(\swidth="\d{1,3}")?(\sheight="\d{1,3}")?(\salt="[^"<>]*")?(\stitle="[^"<>]*")?\s?\/?>)$/i;function v(F){if(F.match(f)||F.match(j)||F.match(a)){return F}else{return""}}function C(R){if(R==""){return""}var F=/<\/?\w+[^>]*(\s|$|>)/g;var I=R.toLowerCase().match(F);var H=(I||[]).length;if(H==0){return R}var G,J;var L="<p><img><br><li><hr>";var O;var K=[];var Q=[];var N=false;for(var P=0;P<H;P++){G=I[P].replace(/<\/?(\w+).*/,"$1");if(K[P]||L.search("<"+G+">")>-1){continue}J=I[P];O=-1;if(!/^<\//.test(J)){for(var M=P+1;M<H;M++){if(!K[M]&&I[M]=="</"+G+">"){O=M;break}}}if(O==-1){N=Q[P]=true}else{K[O]=true}}if(!N){return R}var P=0;R=R.replace(F,function(T){var S=Q[P]?"":T;P++;return S});return R}StackExchange.MarkdownEditor.balanceTags=C;function B(F){var J=0,G;var H=F.match(/~+/g);if(H){for(G=0;G<H.length;G++){J=Math.max(H[G].length,J)}}var I=[];I.length=J+2;return I.join("~")}var h={},E={},w=[];var c=StackExchange.helpers.DelayedReaction(function(){if(w.length==0){return}$.ajax("/api/tags/"+encodeURIComponent(w.join(";"))+"/syntax-highlight",{cache:true}).done(function(F){var G=false;for(tag in F){if(!F.hasOwnProperty(tag)){continue}h["c_"+tag]=F[tag];G=true}if(G){StackExchange.MarkdownEditor.refreshAllPreviews();styleCode()}});w=[]},2000,{sliding:true});function g(F){var G=w.length;if(G>0&&new RegExp("^"+w[G-1]).test(F)){w[G-1]=F}else{w.push(F)}c.trigger()}function m(G){if(/^lang-/.test(G)){return G}var H="c_"+G,F=h[H];if(F){return F}if(E[H]){return null}E[H]=true;g(G);return null}var n=/<!-- language: ([a-z0-9#+\-.]+) -->(\s*?<pre>\s*?<code>)/gi,p=/<!-- language-all: ([a-z0-9#+\-.]+) -->/gi;function i(G,H,F){G=G.replace(n,function(I,J,K){return H+J+H+K});return G.replace(p,function(I,J){return F+J+F})}function o(H,I,G){var F=new RegExp(I+"([a-z0-9#+.-]+)"+I+"(\\s*?<pre)","gi");H=H.replace(F,function(L,N,O){var M=m(N);if(!M){return O}return O+" class='"+M+" prettyprint-override'"});var J=new RegExp("("+G+"([a-z0-9#+.-]+)"+G+")|(<pre><code>)","gi");var K;return H.replace(J,function(M,L,O,P){if(L){K=O;return""}else{if(!K){return M}var N=m(K);if(!N){return M}return"<pre class='"+N+" prettyprint-override'><code>"}})}function s(Q){var H,G,F,V,T,U=false;var J=(Q||{}).postfix||"";var S=$("#wmd-input"+J);function K(){H.animate({height:G.height()-F})}function P(W){if(W.is(":animated")){return}W.animate({top:-15},400).animate({top:0},400).animate({top:-8},300).animate({top:0},300).animate({top:-4},200).animate({top:0},200).animate({top:-2},100).animate({top:0},100).animate({top:-1},50).animate({top:0},50)}function I(X){if(G){X();return}if(U){return}U=true;var aa=S.offset();F=aa.top-$("#wmd-button-row"+J).offset().top-$("#wmd-button-row"+J).outerHeight()-5;V=$("#wmd-help-button"+J);var W=V.offset().left+V.outerWidth(),Y=aa.left,ab=S.outerWidth()+Y,Z=Math.max(W,ab);T={right:W-Z,width:Z-Y,top:$("#wmd-button-row"+J).outerHeight()+5};V.addClass("active-help");H=$("<div style='clear:both' />").insertBefore(S);G=$('<div id="mdhelp'+J+'" class="mdhelp"><ul id="mdhelp-tabs'+J+'" class="mdhelp-tabs"><li /></ul></div>').find("li").addSpinner().end().css(T).insertAfter(V);K();$.get("/posts/markdown-help",{postfix:J}).done(function(ac){G.remove();G=$(ac).insertAfter(V).css(T);$("#mdhelp-tabs"+J).delegate("li:not(:last-child)","click",function(ah){var af=$(this).hasClass("selected");G.find(".mdhelp-tab").hide();$("#mdhelp-tabs"+J+" li").removeClass("selected");if(!af){$("#"+$(this).attr("data-tab")).show();$(this).addClass("selected");var ae=$(this).attr("data-buttons");if(ae){var ag=ae.split(",");for(var ad=0;ad<ag.length;ad++){P($("#wmd-"+ag[ad]+"-button"+J))}}}K()});U=false;X()})}var R=false;function M(){R=true;I(function(){V.addClass("active-help");G.show();K()})}function O(){if(!R){M()}}function L(){G.hide();H.animate({height:0});V.removeClass("active-help")}function N(){if(G&&G.is(":visible")){L()}else{M()}}this.toggle=N;this.showOnce=O}function b(J){var T=/<a href="((\S+)\/q(?:uestions)?\/(\d+)(?:|\/\S*?))">\1<\/a>/g,H=window.location.hostname.toLowerCase(),R=O(H);function O(Z){if(Z==="facebook.stackoverflow.com"){return"stackoverflow.com"}return Z}var Q={};function W(aa,Z){var ab=Q[aa+"|"+Z];if(ab){return ab}N(aa,Z);return null}var I={};var Y={};var K="0dvEahcfuUmsFU9QsLi5Zw";function N(aa,Z){if(I[aa+"|"+Z]){return}if(!X(O(aa))){return}I[aa+"|"+Z]=true;var ab=Y[aa];if(!ab){ab=Y[aa]=[]}ab.push(Z);F.trigger()}var F=StackExchange.helpers.DelayedReaction(function(){var ab=false;for(var aa in Y){if(!Y.hasOwnProperty(aa)){continue}var Z=M(aa);var ac;if(Y[aa].length>30){ac=Y[aa].splice(0,30).join(";")}else{ac=Y[aa].join(";");delete Y[aa]}ab=true;$("<script />").attr("src","http://api."+O(aa)+"/1.1/questions/"+ac+"?pagesize=30&jsonp="+Z+"&key="+K).appendTo("body");break}if(ab){F.trigger()}},1000,{sliding:true});var P;var V=false;function X(Z){if(Z===R){return true}if(P){return !!P[Z]}P={};if(R=="stackoverflow.com"){P={"meta.stackoverflow.com":true};return P[Z]}window.apiCallbacks._stackauth=function(ae){if(!(ae&&ae.api_sites)){return}var ag=/^meta\./.test(R);var af=ae.api_sites;var ad=af.length;for(var ab=0;ab<ad;ab++){var ac=af[ab].site_url.replace("http://","");if(R==="meta.stackoverflow.com"){P[ac]=true}else{if(R==ac||(ag&&(R==="meta."+ac))||(!ag&&("meta."+R===ac))){P[ac]=true}}}if(J){J()}};try{$("<script />").attr("src",'http://stackauth.com/sites?jsonp=apiCallbacks["_stackauth"]&key='+K).appendTo("body")}catch(aa){}}window.apiCallbacks={};function M(Z){var aa=Z.replace(/[^a-z0-9.]/g,"");if(!window.apiCallbacks[aa]){window.apiCallbacks[aa]=function(ab){L(ab,Z)}}return'apiCallbacks["'+aa+'"]'}var L=function(Z,ae){if(!(Z&&Z.questions)){return}var ac=Z.questions;var ab=ac.length;for(var aa=0;aa<ab;aa++){var ad=ac[aa];Q[ae+"|"+ad.question_id]=$("<span />").text(ad.title).html()}if(J){J()}};var G={};var S=/^meta\./.test(R)?40:10;function U(aa,Z){var ab=O(aa);if(ab===R){return true}var ac=G[aa];if(!ac){ac=G[aa]={count:0,ids:{}}}if(ac.ids[Z]){return true}if(ac.count>=S){return false}ac.count++;ac.ids[Z]=true;return true}return function(Z){G={};return Z.replace(T,function(ac,aa,ab,ad){ab=ab.toLowerCase().replace(/^http:\/\//,"");if(!U(ab,ad)){return ac}var ae=W(ab,ad);if(!ae){return ac}return'<a href="'+aa+'">'+ae+"</a>"})}}function D(G){var I;var H;var J="upload-iframe-"+new Date().getTime();var F=function(L){var M=(L.charCode||L.keyCode);if(M===27){K(null)}};I=$("<div style='top: 50%; left: 50%; display: block; padding: 10px; position: fixed; width:400px; z-index:1001' class='wmd-prompt-dialog'><div style='position: absolute; right: 20px; bottom: 5px; font-size: 10px;'>image hosting by <a title='imgur: the simple image sharer' href='http://imgur.com'>imgur.com</a></div><p><b>Insert an image</b></p><p style='padding-top: 10px;'><a href='#' class='wmd-mini-button selected' id='upload-image-button'>from my computer</a><a href='#' class='wmd-mini-button' id='upload-url-button'>from the web</a></p><iframe id='"+J+"' style='display:none;' src='about:blank' name='"+J+"'/><form action='/upload/image' method='post' enctype='multipart/form-data'><div style='position: relative;height: 40px;' id='upload-file-input'>  <img src='http://i.imgur.com/GKc7H.png' height='15px' width='15px' style='vertical-align:middle;margin-right:6px;'>  <input type='file' name='filename' id='filename-input' value='browse' style='border:0; vertical-align:middle;'></div><div id='upload-url-input' style='display:none;height:40px;'>    <input type='input' name='upload-url' value='' style='width: 250px;'></div><p id='upload-message' style='padding-top: 4px; margin:0; line-height: 16px;'></p><div class='ac_loading' id='image-upload-progress' style='background-color: transparent; display:none;'>Uploading ...</div><input type='submit' value='Upload' style='width: 7em; margin: 10px;'><input type='button' value='Cancel' id='close-dialog-button' style='width: 7em; margin: 10px 10px 20px;'></form></div>");var K=function(L){$("body").unbind("keydown",F);I.remove();G(L==undefined?null:L);return false};top.setTimeout(function(){I.appendTo("body");$("#close-dialog-button").click(function(){K()});var P=$("#upload-image-button");var M=$("#upload-url-button");var L=$("#upload-url-input");var N=L.parent();var R=$("#upload-file-input");L.remove().show();var Q=function(){$("#upload-message").text("click browse to choose an image from your computer")};Q();P.click(function(){M.removeClass("selected");P.addClass("selected");Q();L.remove();N.prepend(R);return false});M.click(function(){P.removeClass("selected");M.addClass("selected");$("#upload-message").text("paste the URL of your image above");N.prepend(L);R.remove();return false});P.add(M).keypress(function(S){if(S.which===13||S.which===32){$(this).click()}});var O=$("#"+J)[0];I.find("form").submit(function(){$("#upload-message").hide();$("#image-upload-progress").show();this.target=J;window.closeDialog=K;window.displayUploadError=function(S){$("#image-upload-progress").hide();$("#upload-message").css({color:"red",fontWeight:"bold"}).show().text(S)};return true});I.center();$("body").keydown(F);$("#filename-input").focus()},0);return true}})();StackExchange.editor=(function(){var a=function(d){d=d||{};var j=d.postfix||"";var i=d.heartbeatType,c=d.bindNavPrevention,l=$("#post-form"+j),g=$("#wmd-input"+j),e,h;if(StackExchange.options.newTagEditor){h=$("#title, #edit-comment, #m-address, .edit-comment");e=h.add(".tag-editor input")}else{e=h=$("#title, #tagnames, #edit-comment, #m-address, .edit-comment")}l.submit(function(){if(window.postSubmitCallback&&!window.postSubmitCallback()){return false}var n=true;var o=function(p){n=p};h.each(function(){StackExchange.helpers.hideHelpOverlay($(this))});if(n){StackExchange.helpers.disableSubmitButton(l);StackExchange.navPrevention.stop()}return n});$(".original-question").not(".processed").TextAreaResizer();g.not(".processed").TextAreaResizer();g.typeWatch({highlight:false,wait:5000,captureLength:5,callback:styleCode});var f=new StackExchange.MarkdownEditor(d);if(i){StackExchange.cardiologist.addHeart(i,g,f)}if(i=="ask"||i=="answer"){var k=g.add(e);var m=function(){StackExchange.helpers.loadTicks(l);k.unbind("keydown",m);return true};k.bind("keydown",m)}if(c){StackExchange.navPrevention.init(g)}l.find(".wmd-preview").click(function(){g.focus()});StackExchange.helpers.bindHelpOverlayEvents(h);if($("#ask-error-container").length==0&&$("#title").is("input")){$("#title").focus()}if(d.oncreated){d.oncreated(f)}};var b=function(c){if($("#show-editor-button"+((c||{}).postfix||"")).length==0&&$(".wmd-preview").length!=0){a(c);StackExchange.editor.finallyInit=function(){}}else{StackExchange.editor.finallyInit=function(){a(c)}}};return{init:a,initIfShown:b}})();StackExchange.cardiologist=(function(){var n=[],u,e=[],b,p,a=45,l=0,o=false,r=-2,s,j;function t(v){var w=(typeof v==="number")?v:(a+l)*1000;if(s){w=Math.max(w,6000-(new Date().getTime()-s))}if(j){clearTimeout(j)}j=setTimeout(c,w)}function c(){j=null;if(!e.length){q()}if(!e.length){t();return}var v=e.shift();if(v.checkActive()){v.beat()}else{t()}}function q(){var v;e=[];if(u&&!u.isDisabled&&u.beatCount<30){e.push(u)}for(var w=0;w<n.length;w++){v=n[w];if(v!=u&&!v.isDisabled&&v.beatCount<30){e.push(v)}}a=Math.max(15,Math.min(45,60/(e.length||1)))}var f={ask:function(v){if(v.relatedQuestions){var w=$("#how-to-format");var x=v.relatedQuestions!=p;if(x){w.hide()}w.empty().append("<h4>Similar Questions</h4>"+v.relatedQuestions);if(x){showFadingHelpText(w)}p=v.relatedQuestions}},answer:function(y,z){if(y&&!o){if(y.disableEditor){var w="This question has been "+y.message+" - no more answers will be accepted.";StackExchange.notify.show(w,r);o=true}else{var v=parseInt(y.message);if(v>0){var x=v+" new answer"+(v==1?" has":"s have")+" been posted - ";x+='<a id="load-new-answers">load new answers.</a>';StackExchange.notify.show(x,r);o=true;$("#load-new-answers").click(function(){i(z.postId)})}}}},edit:function(v){if(v&&v.message){var w=StackExchange.notify.getMessageText(r);if(w!=$("<span />").html(v.message).text()){StackExchange.notify.close(r);StackExchange.notify.show(v.message,r)}}}};function k(){}k.prototype={activate:function(){u=this;if(this.isActive){return}this.isActive=true;this.beatCount=0;n.push(this);if(n.length===1){t()}},checkActive:function(){if(!this.isActive||this.isDisabled){return false}if(!this.jTextarea.closest("body").length){delete this.jTextarea;this.isDisabled=true;return false}return true},beat:function(x){var w=this,y={type:"POST",url:"/posts/"+this.postId+"/editor-heartbeat/"+this.type,dataType:"json",data:{}};if(!x){y.success=function(A){w.success(A)};y.error=function(){w.error()};y.complete=function(){w.complete()}}if(this.shouldSendDraft()){var z={text:this.jTextarea.val()};if(this.type==="ask"){z.title=$("#title").val();z.tagnames=$("#tagnames").val()}if(!b||b.heart!==this||b.title!==z.title||b.tagnames!==z.tagnames||b.text!==z.text){y.data=z;b={heart:this,title:z.title,tagnames:z.tagnames,text:z.text}}}if(x&&!("text" in y.data)){return $.Deferred().resolve().promise()}if(this.revisionGuid){y.data.clientRevisionGuid=this.revisionGuid}if(this.type==="answer"){var v=$("#answers-header .answers-subheader h2").text().replace(/ answers?/i,"")||"0";y.data.clientCount=v}s=new Date().getTime();return $.ajax(y).promise()},shouldSendDraft:function(){return this.type!=="edit"&&u===this},success:function(v){f[this.type](v,this);if(v.disableEditor){this.editor.disableSubmission();this.isDisabled=true}if(v.draftSaved){d(this.jTextarea)}this.beatCount++;l=0},error:function(){$("#draft-saved").hide();if(u===this){e.unshift(this)}l=(new Date().getTime()%100)/10},complete:function(){t()}};var d=function(y){var v=$("#draft-saved");var w=function(){v.text("draft saved").fadeIn("fast")};if(v.is(":visible")){v.fadeOut("fast",w)}else{w()}var x=function(z){if(z.which!=115||!z.ctrlKey||z.shiftKey||z.altKey){y.unbind("keypress",x);$("#draft-saved").fadeOut("fast")}};y.bind("keypress",x)};function i(v){var w=[];$.get("/questions/"+v,function(z){var A=$(z);A.find("div.answer").each(function(){var D=this.id.substring("answer-".length);if($("#answer-"+D).length==0){w.push(this.id)}});if(w.length>0){var y="#"+w.join(",#");var C=A.find(y);var B=$("div.answer:last");if(B.length==0){B=$("#answers-header")}C.hide();B.after(C);C.fadeIn("slow");var x=$("div.answer").length;$(".subheader h2").text(x+" Answer"+(x>1?"s":""));StackExchange.vote.init(v);StackExchange.comments.init()}StackExchange.notify.close(r);o=false},"html")}function g(z,w,v){var y=new k(),A;y.type=z;y.jTextarea=w;switch(z){case"ask":A=0;break;case"answer":A=location.href.match(/\/questions\/(\d+)/i)[1];break;case"edit":A=$("#post-id").val()||w.closest(".question, .answer").find(".vote input").val();var x=w.closest(".inline-post");var B=null;if(x.length>0){B=x[0].action.split("/").pop()}if(!B){B=$("#client-revision-guid").val()}y.revisionGuid=B;break}y.postId=A;y.editor=v;w.keypress(function(){y.activate()})}function h(v){if(!u||!u.checkActive()){v();return}u.beat().done(v)}function m(){t(1)}return{addHeart:g,ensureDraftSaved:h,beatASAP:m}})();StackExchange.navPrevention=(function(){var c,e;var d=function(){var f=false;c.each(function(g){f=f||($(this).val()!==e[g])});return f};var b=function(f){window.onbeforeunload=f?function(){if(c&&d()){return f}}:null};var a=function(f){b("You have started writing or editing a post.")};return{init:function(f){c=f.one("keypress",a);e=[];f.each(function(){e.push($(this).val())})},stop:function(){if(!c){return}c.unbind("keypress",a);b(null);c=null},confirm:function(f){if(c&&d()){return confirm(f)}return true}}})();(function(f){var i,g;var c=0;var h=32;var b;f.fn.TextAreaResizer=function(){return this.each(function(){i=f(this).addClass("processed");g=null;f(this).parent().append(f('<div class="grippie"></div>').bind("mousedown",{el:this},j));var k=f("div.grippie",f(this).parent())[0];k.style.marginRight=(k.offsetWidth-f(this)[0].offsetWidth)+"px"})};function j(k){i=f(k.data.el);i.blur();c=d(k).y;g=i.height()-c;i.css("opacity",0.25);f(document).mousemove(e).mouseup(a);return false}function e(m){var k=d(m).y;var l=g+k;if(c>=(k)){l-=5}c=k;l=Math.max(h,l);i.height(l+"px");if(l<h){a(m)}return false}function a(k){f(document).unbind("mousemove",e).unbind("mouseup",a);i.css("opacity",1);i.focus();i=null;g=null;c=0}function d(k){return{x:k.clientX+document.documentElement.scrollLeft,y:k.clientY+document.documentElement.scrollTop}}})(jQuery);