% Sources : 
%   * http://tex.stackexchange.com/questions/35095/special-footnotes-for-url/35097#35097
%   * http://tex.stackexchange.com/questions/35043/how-to-reference-different-places-to-the-same-footnote
%	* http://tex.stackexchange.com/questions/35105/test-equality-between-number-of-the-current-page-and-the-one-of-one-reference-in
%	* http://tex.stackexchange.com/questions/35136/using-xstring-utilities-on-ref/35182#35182

\documentclass[10pt]{article}
	\usepackage[svgnames]{xcolor}
	\usepackage{manyfoot}
	\usepackage{hyperref}
	\usepackage{varioref}

	\makeatletter
% Breakable texttt
%
% Sources : 
%   * http://forum.mathematex.net/latex-f6/forcer-le-retour-a-la-ligne-dans-texttt-t13246.html#p127511
%   * http://tex.stackexchange.com/questions/33465/changing-the-catcode-of-in-one-command
		\newcommand\breakabletexttt{%
			\begingroup
				\@makeother\_\@makeother\#% To be completed
				\breakabletexttt@i
		}
		\newcommand\breakabletexttt@i[1]{%
				\ttfamily
				\breakabletexttt@ii#1\breakabletexttt@ii
			\endgroup
		}
		\newcommand\breakabletexttt@ii[1]{%
			\unless\ifx\breakabletexttt@ii#1%
				#1\hspace{0pt plus 0.1pt minus 0.1pt}\expandafter\breakabletexttt@ii
			\fi
		}

% Cosmetic
		\newcommand\textbftt[1]{\textbf{\texttt{#1}}}
		\newcommand\breakttbf[1]{\textbf{\breakabletexttt{#1}}}

		\hypersetup{urlcolor=blue}
		\definecolor{urlColor}{named}{DarkRed}

		\newcommand\urlText[2][\breakttbf]{\textcolor{urlColor}{#1{#2}}}

% Special footnote
		\newfootnote{Url}

		\newcount\cnt@footurl
		\newcommand\footnoteUrl{%
			\advance\cnt@footurl\@ne
%			\Footnotemark{\urlText[\emph]{\#\number\cnt@footurl}}\FootnotetextUrl{}%
			\Footnotemark{\urlText{\#\number\cnt@footurl}}\FootnotetextUrl{}%
		}

% New url
		\newcount\cnt@url
		\newcommand\newUrl[2][]{%
			\advance\cnt@url\@ne
			\expandafter\edef\csname url@@#1\endcsname{http://link-\number\cnt@url}%
			\expandafter\expandafter\expandafter\urlText\expandafter\expandafter\expandafter{%
				\csname url@@#1\endcsname/%
			}%
			\footnoteUrl{\,Full address \number\cnt@url:\ifx\@empty#1\@empty\else\label{#1}\fi{} \url{#2}}%
		}

% Old url
		\newcommand\oldUrl[1]{%
			\vrefpagenum{\urlpage}{#1}%
			\expandafter\expandafter\expandafter\urlText\expandafter\expandafter\expandafter{%
				\csname url@@#1\endcsname/%
			}%
			\textsuperscript{\textcolor{urlColor}{\textbftt{\ref{#1}}}} %
			\unless\ifnum\urlpage=\thepage\relax\urlText[\emph]{ (see\vpageref{#1})}\fi
		}
	\makeatother


\begin{document}

Let's try to indicate one URL \newUrl[linkGoogle]{http://www.google.fr/}
and another \newUrl{http://tex.stackexchange.com/}.
Let's try to indicate one old URL \oldUrl{linkGoogle}.
and one more \newUrl{http://tug.org/texlive/pkginstall.html}
and another \newUrl[ctan]{http://www.ctan.org/}
and then the same \oldUrl{ctan}.
I would like to indicate something \footnote{... but here !}.

\newpage

Just only old URLS \oldUrl{linkGoogle} and \oldUrl{ctan}.
I would like to indicate something \footnote{... but here !}.

\newpage

Just only old URLS \oldUrl{linkGoogle} and \oldUrl{ctan}.
I would like to indicate something \footnote{... but here !}.

\end{document}
