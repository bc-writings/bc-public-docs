% Source: https://tex.stackexchange.com/a/734136/6880

\documentclass{article}

\usepackage{tabularray}
\UseTblrLibrary{counter}

\ExplSyntaxOn
\NewDocumentEnvironment{chessmoves}{b}
 {
  % split the environment's contents into items at the \\ separator
  \seq_set_split:Nnn \l_chessmoves_lines_seq { \\ } {#1}
  \tl_set:Ne \l_chessmoves_body_tl
   {
    \seq_map_indexed_function:NN \l_chessmoves_lines_seq \__chessmoves_move:nn
   }

  \begin{tblr}[expand=\l_chessmoves_body_tl]{
      colspec={ *{6}{Q[l]} },
      column{odd} = {font=\bfseries},
      hlines, vlines
  }
      \l_chessmoves_body_tl
  \end{tblr}
 }{}

\seq_new:N \l_chessmoves_lines_seq
\tl_new:N \l_chessmoves_body_tl

\cs_new:Nn \__chessmoves_move:nn
 {
  #1 & #2 \int_compare:nTF { \int_mod:nn {#1}{3} == 0 } { \exp_not:N \\ } { & }
 }
\ExplSyntaxOff

\begin{document}

\begin{chessmoves}
e4 e5\\
Nf3 Nc6\\
Bb5 g6\\
Bxc6 dxc6\\
d4 exd4\\
Qxd4 Qxd4 \\
abc def
\end{chessmoves}

\end{document}
