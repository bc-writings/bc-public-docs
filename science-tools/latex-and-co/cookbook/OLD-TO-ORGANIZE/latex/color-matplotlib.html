<!DOCTYPE html>
<html data-lt-installed="true" lang="en-us"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Begin Jekyll SEO tag v2.7.1 -->
<title>A Better Guide On Producing High-Quality Figures in LaTeX Using matplotlib | Alan Xiang’s Blog</title>
<meta name="generator" content="Jekyll v4.2.0">
<meta property="og:title" content="A Better Guide On Producing High-Quality Figures in LaTeX Using matplotlib">
<meta name="author" content="Ziyue &quot;Alan&quot; Xiang">
<meta property="og:locale" content="en_US">
<meta name="description" content="In a previous post, I briefly introduced using matplotlib to generate vector graphics for scientific papers. I think some of the steps in that post is unclear. In this newer version, I am producing a better guide with more concrete instructions and some additional updates.">
<meta property="og:description" content="In a previous post, I briefly introduced using matplotlib to generate vector graphics for scientific papers. I think some of the steps in that post is unclear. In this newer version, I am producing a better guide with more concrete instructions and some additional updates.">
<link rel="canonical" href="https://www.alanshawn.com/tech/2022/05/16/matplotlib-latex-guide.html">
<meta property="og:url" content="https://www.alanshawn.com/tech/2022/05/16/matplotlib-latex-guide.html">
<meta property="og:site_name" content="Alan Xiang’s Blog">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2022-05-16T00:00:00-04:00">
<meta name="twitter:card" content="summary">
<meta property="twitter:title" content="A Better Guide On Producing High-Quality Figures in LaTeX Using matplotlib">
<script type="application/ld+json">
{"mainEntityOfPage":{"@type":"WebPage","@id":"https://www.alanshawn.com/tech/2022/05/16/matplotlib-latex-guide.html"},"author":{"@type":"Person","name":"Ziyue &quot;Alan&quot; Xiang"},"description":"In a previous post, I briefly introduced using matplotlib to generate vector graphics for scientific papers. I think some of the steps in that post is unclear. In this newer version, I am producing a better guide with more concrete instructions and some additional updates.","@type":"BlogPosting","url":"https://www.alanshawn.com/tech/2022/05/16/matplotlib-latex-guide.html","headline":"A Better Guide On Producing High-Quality Figures in LaTeX Using matplotlib","dateModified":"2022-05-16T00:00:00-04:00","datePublished":"2022-05-16T00:00:00-04:00","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->


  <!-- webtikz<link rel="stylesheet" type="text/css" href="http://tikzjax.com/v1/fonts.css">
    <script src="http://tikzjax.com/v1/tikzjax.js"></script>-->

    <link rel="stylesheet" href="color-matplotlib_fichiers/poole.css">
    <link rel="stylesheet" href="color-matplotlib_fichiers/hyde.css">
    <link rel="stylesheet" href="color-matplotlib_fichiers/styles.css">
    <link rel="stylesheet" href="color-matplotlib_fichiers/colorful.css">
    <link rel="stylesheet" href="color-matplotlib_fichiers/colorbox.css">
    <link rel="stylesheet" href="color-matplotlib_fichiers/button.css">

    <link rel="icon" type="image/jpeg" href="https://www.alanshawn.com/site_logo.jpg">

    <script src="color-matplotlib_fichiers/jquery-3.0.0.js"></script>
    <script src="color-matplotlib_fichiers/jquery-migrate-3.3.1.js"></script>

    

  <script src="color-matplotlib_fichiers/MathJax.js" async=""></script>

  <script type="text/x-mathjax-config;executed=true">
    MathJax.Hub.Config({
      messageStyle: "none",
      jax: ["input/TeX", "output/HTML-CSS"],
      extensions: [
        "tex2jax.js",
        "MathMenu.js",
        "MathZoom.js",
        "AssistiveMML.js",
        "a11y/accessibility-menu.js"
      ],
      TeX: {
        extensions: [
          "AMSmath.js",
          "AMSsymbols.js",
          "noErrors.js",
          "noUndefined.js"
        ],
        equationNumbers: { autoNumber: "AMS" },
        Macros: {
          bm: ["{\\boldsymbol #1}",1],
        }
      },
      "HTML-CSS": {
        preferredFont: "TeX",
        availableFonts: ["STIX","TeX"],
        scale: 80
      }
    });
  </script>

  <script src="color-matplotlib_fichiers/katex.min.js"></script>
  <link rel="stylesheet" href="color-matplotlib_fichiers/pseudocode.min.css">
  <script src="color-matplotlib_fichiers/pseudocode.min.js"></script><style type="text/css">.MathJax_Preview {color: #888}
#MathJax_Message {position: fixed; left: 1px; bottom: 2px; background-color: #E6E6E6; border: 1px solid #959595; margin: 0px; padding: 2px 8px; z-index: 102; color: black; font-size: 80%; width: auto; white-space: nowrap}
#MathJax_MSIE_Frame {position: absolute; top: 0; left: 0; width: 0px; z-index: 101; border: 0px; margin: 0px; padding: 0px}
.MathJax_Error {color: #CC0000; font-style: italic}
</style>

  

  
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async="" src="color-matplotlib_fichiers/js"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-161191068-1');
  </script>
  

  <script src="color-matplotlib_fichiers/myscript.js"></script>

<link type="application/atom+xml" rel="alternate" href="https://www.alanshawn.com/atom.xml" title="Alan Xiang's Blog">


<style type="text/css">#MathJax_Zoom {position: absolute; background-color: #F0F0F0; overflow: auto; display: block; z-index: 301; padding: .5em; border: 1px solid black; margin: 0; font-weight: normal; font-style: normal; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; -webkit-box-sizing: content-box; -moz-box-sizing: content-box; box-sizing: content-box; box-shadow: 5px 5px 15px #AAAAAA; -webkit-box-shadow: 5px 5px 15px #AAAAAA; -moz-box-shadow: 5px 5px 15px #AAAAAA; -khtml-box-shadow: 5px 5px 15px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_ZoomOverlay {position: absolute; left: 0; top: 0; z-index: 300; display: inline-block; width: 100%; height: 100%; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
#MathJax_ZoomFrame {position: relative; display: inline-block; height: 0; width: 0}
#MathJax_ZoomEventTrap {position: absolute; left: 0; top: 0; z-index: 302; display: inline-block; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
</style><style type="text/css">#MathJax_About {position: fixed; left: 50%; width: auto; text-align: center; border: 3px outset; padding: 1em 2em; background-color: #DDDDDD; color: black; cursor: default; font-family: message-box; font-size: 120%; font-style: normal; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 15px; -webkit-border-radius: 15px; -moz-border-radius: 15px; -khtml-border-radius: 15px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_About.MathJax_MousePost {outline: none}
.MathJax_Menu {position: absolute; background-color: white; color: black; width: auto; padding: 5px 0px; border: 1px solid #CCCCCC; margin: 0; cursor: default; font: menu; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 5px; -webkit-border-radius: 5px; -moz-border-radius: 5px; -khtml-border-radius: 5px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_MenuItem {padding: 1px 2em; background: transparent}
.MathJax_MenuArrow {position: absolute; right: .5em; padding-top: .25em; color: #666666; font-size: .75em}
.MathJax_MenuActive .MathJax_MenuArrow {color: white}
.MathJax_MenuArrow.RTL {left: .5em; right: auto}
.MathJax_MenuCheck {position: absolute; left: .7em}
.MathJax_MenuCheck.RTL {right: .7em; left: auto}
.MathJax_MenuRadioCheck {position: absolute; left: .7em}
.MathJax_MenuRadioCheck.RTL {right: .7em; left: auto}
.MathJax_MenuLabel {padding: 1px 2em 3px 1.33em; font-style: italic}
.MathJax_MenuRule {border-top: 1px solid #DDDDDD; margin: 4px 3px}
.MathJax_MenuDisabled {color: GrayText}
.MathJax_MenuActive {background-color: #606872; color: white}
.MathJax_MenuDisabled:focus, .MathJax_MenuLabel:focus {background-color: #E8E8E8}
.MathJax_ContextMenu:focus {outline: none}
.MathJax_ContextMenu .MathJax_MenuItem:focus {outline: none}
#MathJax_AboutClose {top: .2em; right: .2em}
.MathJax_Menu .MathJax_MenuClose {top: -10px; left: -10px}
.MathJax_MenuClose {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; font-family: 'Courier New',Courier; font-size: 24px; color: #F0F0F0}
.MathJax_MenuClose span {display: block; background-color: #AAA; border: 1.5px solid; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; line-height: 0; padding: 8px 0 6px}
.MathJax_MenuClose:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_MenuClose:hover span {background-color: #CCC!important}
.MathJax_MenuClose:hover:focus {outline: none}
</style><style type="text/css">.MJX_Assistive_MathML {position: absolute!important; top: 0; left: 0; clip: rect(1px, 1px, 1px, 1px); padding: 1px 0 0 0!important; border: 0!important; height: 1px!important; width: 1px!important; overflow: hidden!important; display: block!important; -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none}
.MJX_Assistive_MathML.MJX_Assistive_MathML_Block {width: 100%!important}
</style></head>


  <body data-new-gr-c-s-check-loaded="8.904.0" data-gr-ext-installed=""><div id="MathJax_Message" style="display: none;"></div>

    <div class="sidebar">
  <div class="container sidebar-sticky sidebar-base-font">

    <div style="color: white; font-size: 80%">
      “Any fool can know. The point is to understand.”
      <div style="text-align: right;">― Albert Einstein</div>
    </div>

    <div class="sidebar-about">
      <h2>
        <a href="https://www.alanshawn.com/">
          Alan Xiang's Blog
        </a>
      </h2>
      <p class="lead">Enjoy your transient life.</p>
    </div>

    <nav class="sidebar-nav sidebar-nav-font">

      
      
        
          
            <a class="sidebar-nav-item" href="https://www.alanshawn.com/about/">About Me</a>
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
          
            <a class="sidebar-nav-item" href="https://www.alanshawn.com/post_directory/">Post Directory</a>
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
      <a class="sidebar-nav-item" href="https://www.alanshawn.com/media/2021/cv_2021.pdf">CV</a>
        <a class="sidebar-nav-item" href="https://www.alanshawn.com/latex-service">LaTeX Service</a>

      <div class="sidebar-collections">
          <div style="text-align: center; color: #bbbbbb;">-Collections-</div>
          <a class="curated-button" id="btn1" href="https://www.alanshawn.com/sci_py_series">Scientific Python</a>
          <a class="curated-button" id="btn3" href="https://www.alanshawn.com/pyopengl_series">PyCG</a>
          <a class="curated-button" id="btn4" href="https://www.alanshawn.com/learn_julia">Learn Julia</a>
          <a class="curated-button" id="btn5" href="https://www.alanshawn.com/jupyter_notebooks">Jupyter Notebooks</a>
          <a class="curated-button" id="btn5" href="https://www.alanshawn.com/advanced-typesetting">Adv-Typeset</a>
          <a class="curated-button" id="btn6" href="https://www.alanshawn.com/random-life-hacks">Life Hacks</a>
          <a class="curated-button" id="btn2" href="https://www.alanshawn.com/su_lecture_notes">Lecture Notes @ SU</a>
          <a class="curated-button" id="btn8" href="https://www.alanshawn.com/purdue-notes">Notes @ Purdue</a>
          <a class="curated-button" id="btn7" href="https://www.alanshawn.com/latex3-tutorial">LaTeX3 Tutorial</a>

          


      </div>

    </nav>

    <div class="footer-note-text">
      Viewing on larger screens is advised.<br>
      <b>RESPECT ORIGINAL CONTENTS!</b> When using materials from this website, please give credits. 
      The opinions presented here are personal, they are not related to the author's employer or institution. Comments from
      other users do not represent the author's opinion.
      <br>
      在转载本网站内容时请注明内容的来源。本网站中的言论为作者的个人观点，其与作者的单位及院校无任何关联。其他用户的评论并不代表作者的观点。
    </div>

    <div class="footer-copyright">
      <a href="https://www.alanshawn.com/tech/2019/12/10/editing-cheat-sheet.html">Editing cheat sheet</a><br>
      Generated by Jekyll on Oct 24, 2022.<br>
      © 2018-2022 Ziyue Xiang, all rights reserved.<br>
      CONTACT: ZIYUE.ALAN.XIANG at GMAIL dot COM
    </div>

  </div>
</div>


    <div class="content container">
      <button onclick="topFunction()" id="top-button" title="Go to top" style="display: block;">TOP</button>
      <div class="post">
  <h1 class="post-title">A Better Guide On Producing High-Quality Figures in LaTeX Using matplotlib</h1>
  <span class="post-date">16 May 2022</span>
  <div id="table-of-contents">
    <ul id="toc" class="section-nav">
<li class="toc-entry toc-h2"><a href="#prerequisites">Prerequisites</a>
<ul>
<li class="toc-entry toc-h3"><a href="#preamble-of-latex-examples">Preamble of LaTeX Examples</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#plotting-using-color-blind-safe-color-templates">Plotting Using Color-Blind Safe Color Templates</a>
<ul>
<li class="toc-entry toc-h3"><a href="#examples">Examples</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#workflow">Workflow</a></li>
<li class="toc-entry toc-h2"><a href="#formatting-issues">Formatting Issues</a>
<ul>
<li class="toc-entry toc-h3"><a href="#math-equations">Math equations</a></li>
<li class="toc-entry toc-h3"><a href="#text-formatting">Text formatting</a></li>
</ul>
</li>
</ul>
  </div>
  <p>In a previous <a href="https://www.alanshawn.com/tech/2021/03/27/matplotlib-latex-style.html">post</a>, I briefly introduced using <code class="language-plaintext highlighter-rouge">matplotlib</code> to generate vector graphics for scientific papers. 
I think some of the steps in that post is unclear. 
In this newer version, I am producing a better guide with more concrete instructions and some additional updates.</p>

<!--more-->

<h2 id="prerequisites">Prerequisites</h2>

<ul>
  <li>Load <code class="language-plaintext highlighter-rouge">matplotlib</code> and set the parameters
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="n">plt</span>
  <span class="n">plt</span><span class="p">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s">'svg.fonttype'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'none'</span>

  <span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">set_matplotlib_formats</span>
  <span class="n">set_matplotlib_formats</span><span class="p">(</span><span class="s">'svg'</span><span class="p">)</span>

  <span class="c1"># # in newer versions of IPython, use 
</span>  <span class="c1"># import matplotlib_inline.backend_inline
</span>  <span class="c1"># matplotlib_inline.backend_inline.set_matplotlib_formats('svg')
</span></code></pre></div>    </div>

    <p>In Jupyter Lab, the figure can be viewed in the browser and saved
 as SVG using the Shift+Right Click approach descried in the previous <a href="https://www.alanshawn.com/tech/2021/03/27/matplotlib-latex-style.html">post</a>.
In other environments, the figure can be saved as SVG using <code class="language-plaintext highlighter-rouge">plt.savefig()</code> with the <code class="language-plaintext highlighter-rouge">.svg</code> extension.</p>
  </li>
  <li>Download the color-blind safe color template from <a href="https://personal.sron.nl/~pault/">Paul Tol</a>
    <ul>
      <li>The Python code <code class="language-plaintext highlighter-rouge">tol_colors.py</code> <a href="https://personal.sron.nl/~pault/data/tol_colors.py">[Paul Tol’s link]</a> <a href="https://www.alanshawn.com/media/2022/tol_colors.py">[backup]</a></li>
      <li>The documentation of Python code <a href="https://personal.sron.nl/~pault/data/colourschemes.pdf">[Paul Tol’s link]</a> <a href="https://www.alanshawn.com/media/2022/colourschemes.pdf">[backup]</a></li>
    </ul>

    <p>After downloading, import the Python module:</p>
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">tol_colors</span> <span class="kn">import</span> <span class="n">tol_cmap</span><span class="p">,</span> <span class="n">tol_cset</span>
</code></pre></div>    </div>
  </li>
</ul>

<h3 id="preamble-of-latex-examples">Preamble of LaTeX Examples</h3>

<div class="language-latex highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">\documentclass</span><span class="p">{</span>article<span class="p">}</span>
<span class="k">\usepackage</span><span class="na">[T1]</span><span class="p">{</span>fontenc<span class="p">}</span>
<span class="k">\usepackage</span><span class="p">{</span>newtxtext,newtxmath<span class="p">}</span>
<span class="k">\usepackage</span><span class="p">{</span>xcolor<span class="p">}</span>
<span class="k">\usepackage</span><span class="p">{</span>svg<span class="p">}</span>
<span class="k">\renewcommand</span><span class="p">{</span><span class="k">\ttdefault</span><span class="p">}{</span>qcr<span class="p">}</span>
</code></pre></div></div>

<h2 id="plotting-using-color-blind-safe-color-templates">Plotting Using Color-Blind Safe Color Templates</h2>

<p>According to <a href="https://davidmathlogic.com/colorblind/">David Nichols</a>, about 1 in 20 people suffers from color blindness.
People with such conditions see reduced color spaces, which may create issues when they are reading scientific figures.
Therefore, it is encouraged to use color-blind safe color templates in papers (e.g., the one provided by Paul Tol).</p>

<p><code class="language-plaintext highlighter-rouge">tol_colors</code> provides the following qualitative color maps:</p>

<p><img src="color-matplotlib_fichiers/color_scheme_qualitative.png" alt="tol_qualitative"></p>

<p><code class="language-plaintext highlighter-rouge">tol_colors</code> provides the following diverging color maps (circled colors are for bad data):</p>

<p><img src="color-matplotlib_fichiers/color_scheme_diverging.png" alt="tol_diverging"></p>

<p><code class="language-plaintext highlighter-rouge">tol_colors</code> provides the following sequential color maps (circled colors are for bad data):</p>

<p><img src="color-matplotlib_fichiers/color_scheme_sequential.png" alt="tol_sequential"></p>

<h3 id="examples">Examples</h3>

<!--with scroll bar-->
<iframe class="nb-iframe" src="color-matplotlib_fichiers/tol_color_test.html"></iframe>

<h2 id="workflow">Workflow</h2>

<p>To import figures from <code class="language-plaintext highlighter-rouge">matplotlib</code> to LaTeX, the standard steps are:</p>

<ol>
  <li>Load <code class="language-plaintext highlighter-rouge">matplotlib</code> and <code class="language-plaintext highlighter-rouge">tol_colors</code> using the code snippet provided above</li>
  <li>Plot the data and save the image in SVG format by either using the Shift+Right Click approach or using <code class="language-plaintext highlighter-rouge">plt.savefig()</code>; copy the SVG image to your LaTeX working directory</li>
  <li>
    <p>In LaTeX document, import the <code class="language-plaintext highlighter-rouge">svg</code> package in the preamble: <code class="language-plaintext highlighter-rouge">\usepackage{svg}</code>; next, load the SVG using <code class="language-plaintext highlighter-rouge">\includesvg{svg_image_name.svg}</code></p>

    <p>Note that the <code class="language-plaintext highlighter-rouge">svg</code> package requires <a href="https://tex.stackexchange.com/questions/88740/what-does-shell-escape-do">shell access</a> and installation of <a href="https://inkscape.org/">InkScape</a> on the system. 
 My experience is that the <code class="language-plaintext highlighter-rouge">svg</code>
 package cannot work on Windows due to the fact that the command line 
interface of InkScape on Windows is different from other operating 
systems. 
 On systems without shell access or proper InkScape CLI, one can convert
 the SVG image into LaTeX-friendly PDF files manually in InkScape GUI by
 clicking “File-&gt;Save As” and choosing PDF as the output format. 
 Then in the pop-up dialog, select “Omit text in PDF and create LaTeX 
file”.
 This will generate two files with extensions <code class="language-plaintext highlighter-rouge">.pdf</code> and <code class="language-plaintext highlighter-rouge">.pdf_tex</code>, respectively.
 Copy both files to the LaTeX working directory, and import the figure using <code class="language-plaintext highlighter-rouge">\input{svg_image_name.pdf_tex}</code> (the width can be controlled using <code class="language-plaintext highlighter-rouge">\resizebox</code>).</p>

    <p>Fortunately, the <code class="language-plaintext highlighter-rouge">svg</code> package works correctly on Overleaf.</p>
  </li>
</ol>

<h2 id="formatting-issues">Formatting Issues</h2>

<p>Sometimes, there are specific formatting issues that may affect the 
quality of the LaTeX output. Here, we discuss ways to fix these common 
issues.</p>

<h3 id="math-equations">Math equations</h3>

<p>To render math equations in native LaTeX fonts, all the math delimiters (<code class="language-plaintext highlighter-rouge">$</code>) in <code class="language-plaintext highlighter-rouge">matploblib</code> should be replaced by <code class="language-plaintext highlighter-rouge">\$</code>.</p>

<p>For example, if we generate and save the plot as SVG using the following code (assume <code class="language-plaintext highlighter-rouge">numpy</code> is imported as <code class="language-plaintext highlighter-rouge">np</code>):</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">sinc</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">title</span><span class="p">(</span><span class="sa">r</span><span class="s">'The plot of \$\operatorname{sinc}(x)=\frac{\sin \pi x}{\pi x}\$'</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">savefig</span><span class="p">(</span><span class="s">'sinc_plot.svg'</span><span class="p">)</span>
</code></pre></div></div>

<p>The resulting SVG plot will look like:
<img src="color-matplotlib_fichiers/sinc_plot.svg" alt="sinc_plot"></p>

<p>We can import this figure into LaTeX using the code below:</p>

<div class="language-latex highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">\begin{figure}</span>[ht]
    <span class="k">\centering</span>
    <span class="k">\includesvg</span><span class="na">[width=0.8\linewidth]</span><span class="p">{</span>sinc<span class="p">_</span>plot.svg<span class="p">}</span>
<span class="nt">\end{figure}</span>
</code></pre></div></div>

<p>In the compiled LaTeX document, it looks like:</p>

<p><img src="color-matplotlib_fichiers/sinc_plot_latex.png" alt="sinc_plot_latex"></p>

<p>Notice that the title is close to the plot border, which can be fixed by increasing the <a href="https://stackoverflow.com/questions/16419670/increase-distance-between-title-and-plot-in-matplolib">title padding</a>.</p>

<p>A downside of this approach is that <code class="language-plaintext highlighter-rouge">matplotlib</code>
 is no longer able to deduce the width of the math equation. This can be
 problematic in some scenarios. For example, if we generate a figure 
using the following Python code:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">sinc</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="sa">r</span><span class="s">'\$\frac{\sin \pi x}{\pi x}\$'</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="p">.</span><span class="n">savefig</span><span class="p">(</span><span class="s">'sinc_plot_legend.svg'</span><span class="p">)</span>
</code></pre></div></div>

<p>When the figure is rendered in LaTeX, it looks like:</p>

<p><img src="color-matplotlib_fichiers/sinc_plot_legend_latex.png" alt="sinc_plot_legend_latex"></p>

<p>Clearly the legend box is too wide, and the height of the legend box is too small.
To fix the width issue, we declare a command whose character width is approximately the same as the rendered equation (e.g., <code class="language-plaintext highlighter-rouge">\xxxx</code>) and use the command in the legend instead of the math equation.
To fix the height issue, we can increase the legend item spacing or increase the border padding value. 
After fine-tuning, the Python code is:</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">sinc</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="sa">r</span><span class="s">'\xxxx'</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">legend</span><span class="p">(</span><span class="n">borderpad</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">savefig</span><span class="p">(</span><span class="s">'sinc_plot_legend_new.svg'</span><span class="p">)</span>
</code></pre></div></div>

<p>Now, we need to change the corresponding LaTeX code to import the SVG:</p>

<div class="language-latex highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">\begin{figure}</span>[ht]
    <span class="k">\centering</span>
    <span class="k">\newcommand</span><span class="p">{</span><span class="k">\xxxx</span><span class="p">}{$</span><span class="nv">\frac</span><span class="p">{</span><span class="nv">\sin</span><span class="nb"> </span><span class="nv">\pi</span><span class="nb"> x</span><span class="p">}{</span><span class="nv">\pi</span><span class="nb"> x</span><span class="p">}$}</span>
    <span class="k">\includesvg</span><span class="na">[width=0.8\linewidth]</span><span class="p">{</span>sinc<span class="p">_</span>plot<span class="p">_</span>legend<span class="p">_</span>new.svg<span class="p">}</span>
<span class="nt">\end{figure}</span>
</code></pre></div></div>

<p>The corresponding result looks much better:</p>

<p><img src="color-matplotlib_fichiers/sinc_plot_legend_new_latex.png" alt="sinc_plot_legend_new_latex"></p>

<h3 id="text-formatting">Text formatting</h3>

<p>We can use LaTeX commands to better control the formatting of text in the figure.
For example, consider the following heatmap generated using Python:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">cmap</span><span class="o">=</span><span class="n">tol_cmap</span><span class="p">(</span><span class="s">'YlOrBr'</span><span class="p">)</span>
<span class="n">z</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">random</span><span class="p">.</span><span class="n">uniform</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">15</span><span class="p">))</span>
<span class="n">plt</span><span class="p">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">z</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">colorbar</span><span class="p">()</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">z</span><span class="p">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">z</span><span class="p">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
        <span class="n">plt</span><span class="p">.</span><span class="n">text</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="s">'{:0.1f}'</span><span class="p">.</span><span class="nb">format</span><span class="p">(</span><span class="n">z</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">]),</span> <span class="n">ha</span><span class="o">=</span><span class="s">'center'</span><span class="p">,</span> <span class="n">va</span><span class="o">=</span><span class="s">'center'</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">savefig</span><span class="p">(</span><span class="s">'heatmap.svg'</span><span class="p">)</span>
</code></pre></div></div>

<p>The SVG file looks like:</p>

<p><img src="color-matplotlib_fichiers/heatmap.svg" alt="heatmap"></p>

<p>It may look fine in the web browser, but in LaTeX, it looks really off:</p>

<p><img src="color-matplotlib_fichiers/heatmap_latex.png" alt="heatmap"></p>

<p>A good practice in general is to wrap the text information with a short LaTeX command (e.g., <code class="language-plaintext highlighter-rouge">\z</code>) in the Python code:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">cmap</span><span class="o">=</span><span class="n">tol_cmap</span><span class="p">(</span><span class="s">'YlOrBr'</span><span class="p">)</span>
<span class="n">z</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">random</span><span class="p">.</span><span class="n">uniform</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">15</span><span class="p">))</span>
<span class="n">plt</span><span class="p">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">z</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">colorbar</span><span class="p">()</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">z</span><span class="p">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">z</span><span class="p">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
        <span class="n">plt</span><span class="p">.</span><span class="n">text</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="s">'</span><span class="se">\\</span><span class="s">z{{{:0.1f}}}'</span><span class="p">.</span><span class="nb">format</span><span class="p">(</span><span class="n">z</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">]),</span> <span class="n">ha</span><span class="o">=</span><span class="s">'center'</span><span class="p">,</span> <span class="n">va</span><span class="o">=</span><span class="s">'center'</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">savefig</span><span class="p">(</span><span class="s">'heatmap.svg'</span><span class="p">)</span>
</code></pre></div></div>

<p>Then we can have find-grained control over the text formatting in LaTeX by defining <code class="language-plaintext highlighter-rouge">\z</code>:</p>

<div class="language-latex highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">\begin{figure}</span>[ht]
    <span class="k">\centering</span>
    <span class="k">\newcommand</span><span class="p">{</span><span class="k">\z</span><span class="p">}</span>[1]<span class="p">{</span>
    	<span class="k">\raisebox</span><span class="p">{</span>1pt<span class="p">}{</span>
    		<span class="k">\hspace*</span><span class="p">{</span>-2.1mm<span class="p">}</span>
    		<span class="k">\fontsize</span><span class="p">{</span>3<span class="p">}{</span>3<span class="p">}</span>
    		<span class="k">\selectfont</span>
    		<span class="k">\ttfamily</span>
    		<span class="k">\bfseries</span>
    		<span class="k">\color</span><span class="p">{</span>cyan<span class="p">}</span>
    		#1
    	<span class="p">}</span>
    <span class="p">}</span>
    <span class="k">\includesvg</span><span class="na">[width=0.8\linewidth]</span><span class="p">{</span>heatmap<span class="p">_</span>new.svg<span class="p">}</span>
<span class="nt">\end{figure}</span>
</code></pre></div></div>

<p>The resulting visual quality is greatly improved:</p>

<p><img src="color-matplotlib_fichiers/heatmap_new_latex.png" alt="heatmap_new_latex"></p>

<p>Note that the font sizes of all text in the SVG can be changed globally by using the <code class="language-plaintext highlighter-rouge">pretex</code> key. For example, we can shrink all text sizes using:</p>
<div class="language-latex highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">\includesvg</span><span class="na">[width=0.8\linewidth,pretex=\scriptsize]</span><span class="p">{</span>heatmap<span class="p">_</span>new.svg<span class="p">}</span>
</code></pre></div></div>

<p>Be creative with the use of LaTeX commands, and the 
plotting/formatting process can be greatly simplified.
Of course, when no Python/LaTeX based approach works, one can always 
modify the SVG manually with InkScape to acquire a desirable result.</p>

</div>









    <script>
      $(document).on('ready', adjustLinkPreviewHeight);
      $(window).on('resize', adjustLinkPreviewHeight);
    </script>
    
    </div>

  

</body><grammarly-desktop-integration data-grammarly-shadow-root="true"></grammarly-desktop-integration></html>