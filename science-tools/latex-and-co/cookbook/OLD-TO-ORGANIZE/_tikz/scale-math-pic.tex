% Source: https://tex.stackexchange.com/a/735643/6880

\documentclass{amsart}

\ExplSyntaxOn

\fp_new:N \l__mybox_scale_fp
\fp_new:N \l__mybox_sscale_fp
\fp_new:N \l__mybox_ssscale_fp
\box_new:N \l__mybox_scale_box

\keys_define:nn { mybox }
{
  scale .code:n = {
    \fp_set:Nn \l__mybox_scale_fp { #1 }
    \fp_set:Nn \l__mybox_sscale_fp { #1*0.6 }
    \fp_set:Nn \l__mybox_ssscale_fp { #1*0.2 }
  },
  scale .initial:n = 1,
}

% initialise the keys
\keys_set:nn { mybox } {}

\newcommand\MyBox[1][]
{
  \keys_set:nn { mybox } {#1}
  \mode_if_math:TF {
    \box_set_eq:NN \l_tmpa_box \l__mybox_scale_box
    \mathchoice
    {
      \box_use:N \l_tmpa_box
    }
    {
      \box_scale:Nnn \l_tmpa_box { \l__mybox_scale_fp } { \l__mybox_scale_fp }
      \box_use:N \l_tmpa_box
    }
    {
      \box_scale:Nnn \l_tmpa_box { \l__mybox_sscale_fp } { \l__mybox_sscale_fp }
      \box_use:N \l_tmpa_box
    } % rescale for scriptw
    {
      \box_scale:Nnn \l_tmpa_box { \l__mybox_ssscale_fp } { \l__mybox_ssscale_fp }
      \box_use:N \l_tmpa_box
    }
  } {
      \box_use:N \l__mybox_scale_box
  }
}

\hbox_set:Nn \l__mybox_scale_box
{
  \fbox { \phantom{\rule{10mm}{10mm}} }
}

\ExplSyntaxOff
\begin{document}

Normal text: \MyBox

Maths mode: $\MyBox$

Should be smaller as a subscript: $v_{\MyBox_{\MyBox}}$

\end{document}
