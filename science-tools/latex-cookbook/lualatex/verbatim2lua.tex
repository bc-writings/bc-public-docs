% Source: https://tex.stackexchange.com/a/669633/6880

\documentclass{article}

\NewDocumentCommand\passToLua{v}{\directlua{
     print ("\string\n======\string\n")
     print ([[#1]])
     print ("\string\n======\string\n")
    }}
\begin{document}

\passToLua{a string with # \ and %}

\end{document}