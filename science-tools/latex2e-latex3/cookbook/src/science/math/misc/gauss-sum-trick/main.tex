% Source.
%     + https://tex.stackexchange.com/a/655445/6880
%     + https://tex.stackexchange.com/a/730033/6880

\documentclass[border=3pt]{standalone}

\usepackage{tikz}
\usetikzlibrary{tikzmark}

\newcommand{\unitht}{.8ex}
\newcommand{\nubpre}{A}

\newcommand{\nub}[2]{%
  \tikzmark{a\nubpre#1}#2\tikzmark{b\nubpre#1}%
  %
  \llap{%
    \begin{tikzpicture}[remember picture, baseline=(current bounding box.north)]]
      \draw (pic cs:a\nubpre#1)  % Trait vertical à partir
            --++ (0,-#1*\unitht) % de la marque droite.
            -|                   % TikZ va tracer un "L"
            (pic cs:b\nubpre#1); % jusqu'à la marque de gauche.
    \end{tikzpicture}%
  }%
}

\begin{document}

\begin{minipage}{10cm}
La méthode demande de mettre à jour la commande \verb+\nubpre+
qui vaut \verb+A+ initialement.


$%
  \nub{5}{%
    11 + \nub{4}{%
      12 + \nub{3}{%
        13 + \nub{2}{%
          14 + \nub{1}{15 + 16} + %
          17} + %
        18} + %
      19} + %
    20}%
  = 31 \times 5 %
  = 155%
$


\medskip


Un nouvel exemple implique une nouvelle valeur pour \verb+\nubpre+.

\renewcommand{\nubpre}{B}

$%
  \nub{3}{%
    1 + \nub{2}{%
      3 + \nub{1}{%
        5 + \cdots + %
        95} + %
      97} + %
    99}%
  = 100 \times 25%
  = 2500%
$
\end{minipage}

\end{document}
