% Source: https://tex.stackexchange.com/a/729533/6880

\documentclass[tikz]{standalone}
\usepackage{forest}
\usepackage{skak}
\usetikzlibrary{backgrounds}
\ExplSyntaxOn\let\TikzChessAlphToInt\int_from_alph:n\ExplSyntaxOff
\newcommand*\tikzchessset{\pgfqkeys{/tikz/chess}}
\tikzchessset{
  every chess board/.style={x=+1em, y=+1em},
  rows/.initial=4, columns/.initial=4,
  background color odd/.initial=black!30,
  background color even/.initial=white,
  border/.style={thick, draw},
  node/.style 2 args={
    black, anchor=center, inner sep=+0pt,
    at={(\TikzChessAlphToInt{#1}-.5,.5-#2)}}}
\forestset{
  chess/.style={
    /tikz/every outer matrix/.append style={
      inner sep=+.5\pgflinewidth, draw, shape=rectangle, thick},
    content=\chessnode, matrix},
  declare toks={list}{},
  chessboard/.style={
    for tree={% edges on background
      +edge path=\noexpand\pgfonlayer{background},
      edge path+=\noexpand\endpgfonlayer,
      edge+={line cap=rect, ultra thick}},
    q/.style={list+={,##1}, for descendants={list+={,##1}}, chess},
    bad/.style=red, good/.style=green}}
\newcommand{\chessnode}{%
  \pgfpositionnodelater\relax % disable forest-ing
  \tikzset{chess/every chess board}%
  \foreach[count=\iRow from 0] \row in {1, ..., \pgfkeysvalueof{/tikz/chess/rows}}
    \foreach[count=\iCol from 0] \col in {1, ..., \pgfkeysvalueof{/tikz/chess/columns}}
       \fill[fill=\pgfkeysvalueof{/tikz/chess/background color
         \ifodd\pgfintmod{\iCol+\iRow}{2} odd\else even\fi}]
           (\iCol,-\iRow) rectangle + (1,-1);
  \foreach[expand list] \v in {\forestoption{list}}
    \path\if,\v,\else node[chess/node/.expanded=\v]{\symqueen}\fi;
  \pgfmatrixendrow}
\begin{document}
\begin{forest} chessboard
[, chess
  [, q=a1 [, q=c2, bad] [, q=d2        [, q=b3, bad ]]]
  [, q=b1 [, q=d2       [, q=a3        [, q=c4, good]]]]
  [, q=c1 [, q=a2       [, q=d3        [, q=b4, good]]]]
  [, q=d1 [, q=a2       [, q=c3, bad]] [, q=b2, bad ]]
]
\end{forest}
\end{document}
