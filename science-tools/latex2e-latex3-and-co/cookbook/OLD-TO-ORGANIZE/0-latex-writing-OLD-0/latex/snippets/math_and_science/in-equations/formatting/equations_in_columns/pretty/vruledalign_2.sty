% Source : http://forum.mathematex.net/latex-f6/mettre-plusieurs-equations-cote-a-cote-t9513.html#p121407

\ProvidesPackage{vruledalign}[2011/02/11 version 1]

\newcommand{\minialignwidth}{\linewidth}
\newenvironment{minialign}[1][\minialignwidth]{%
	\noindent\minipage[c]{#1-\tabcolsep}%
	\iffalse{\fi\ifnum`}=0\fi
	\start@align\@ne\st@rredtrue\m@ne
	\noalign{\vskip-\abovedisplayskip\vskip\abovedisplayshortskip}
}
{%
	\endalign\ifnum`{=0\fi\iffalse}\fi\endminipage
}

\newcounter{vruled@align@nb@cols}
\def\vruledalign{%
	\@ifnextchar(\first@scan@vruled@align\first@scan@vruled@align(1)%
}
\def\first@scan@vruled@align(#1){%
	\setcounter{vruled@align@nb@cols}{0}%
	\def\vrule@align@preamble{@{}>{\hsize=#1\hsize\centering\arraybackslash}X}%
	\@ifnextchar(\scan@vruled@align\@vruled@align
}
\def\scan@vruled@align(#1){%
	\stepcounter{vruled@align@nb@cols}%
	\ifnum\c@vruled@align@nb@cols>1
		\addto\vrule@align@preamble{|>{\hsize=#1\hsize\centering\arraybackslash}X}%
	\fi
	\@ifnextchar(\scan@vruled@align\@vruled@align
}
\def\@vruled@align{%
	\def\minialign{$\begin{aligned}[t]}%
	\def\endminialign{\end{aligned}$}%
	\par\addvspace{6pt}\noindent
	\def\minialignwidth{\hsize}%
	\addto\vrule@align@preamble{@{}}%
	\edef\TX@{\@currenvir}%
	{\ifnum0=`}\fi
	\setlength\TX@target{\linewidth}%
	\TX@typeout{Target width: \linewidth = \the\TX@target.}%
	\toks@{}\expandafter\TX@get@body\expandafter{%
	\vrule@align@preamble
}%
}
\def\endvruledalign{\par\addvspace{6pt}}

\endinput