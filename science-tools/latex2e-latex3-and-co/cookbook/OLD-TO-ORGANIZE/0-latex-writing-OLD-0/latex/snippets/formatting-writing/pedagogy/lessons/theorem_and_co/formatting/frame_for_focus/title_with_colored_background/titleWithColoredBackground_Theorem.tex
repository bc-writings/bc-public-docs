% Source : http://tex.stackexchange.com/questions/11098/nice-formatting-for-theorems

\documentclass{article}
	\usepackage{amsmath,tikz}
	\usepackage[
		framemethod=default,
		skipabove=\topskip,
		skipbelow=\topskip,
	]{mdframed}

	\usepackage{lipsum}

	\makeatletter
		\newcounter{theo}[section]
		\newcommand*\Mytheoremheader[1]{%
			\@afterindentfalse
			{\parindent \z@
			\setlength{\parfillskip}{\z@ plus 1fil}%
			\mdraggedtitle\nobreak%
			\makebox[\linewidth][l]{%
				\hspace*{-1\mdf@innerleftmargin@length}%
				\rlap{%
					\color{white}%
					\hspace*{-1\mdf@middlelinewidth@length}%
					\rule[\mdf@middlelinewidth@length]%
					{\dimexpr\linewidth+1\mdf@innerleftmargin@length%
					+\mdf@innerrightmargin@length
					+2\mdf@middlelinewidth@length\relax}%
					{\dimexpr\ht\strutbox+.3333em
					\relax}%
				}%
				\rlap{\color{blue!20}%
				\rule{\dimexpr\linewidth+\mdf@innerleftmargin@length%
				+\mdf@innerrightmargin@length\relax}%
				{\mdf@middlelinewidth@length}}%
				\hspace*{-1\mdf@middlelinewidth@length}%
				\tikz[
					remember picture,
					baseline
				] \node[
					,draw = none,
					text = black,
					fill = blue!20,
				]
				{\mdf@frametitlefont\strut Theorem~\thetheo#1};\relax%
			}%
			\par\kern.5\baselineskip}%
			\@afterheading}

		\newenvironment{theo}[1][]{%
			\let\mdframedtitleenv\Mytheoremheader%
			\stepcounter{theo}%
			\ifstrempty{#1}{\mdfsetup{frametitle={\strut}}}{\mdfsetup{frametitle={:~#1}}}%
			\begin{mdframed}[innertopmargin=0pt,linecolor=blue!20,linewidth=2pt,topline=false,]%
			}{\end{mdframed}}
	\makeatother


\begin{document}

\section{First section}

Text

\begin{theo}[Theorem lipsum]
	\lipsum[1]
\end{theo}

\begin{theo}
	\lipsum[2]
\end{theo}

\end{document}
