% Sources :
%	1) http://tex.stackexchange.com/questions/50772/not-display-the-content-of-one-environment-when-its-content-contains-one-special/50775#50775
%	2) https://groups.google.com/forum/?hl=fr&fromgroups#!topic/fr.comp.text.tex/3cJDTCIHscU

\documentclass{article}
	\usepackage{amsthm}
	\usepackage{environ}
	\usepackage{etoolbox}
	\usepackage{pgffor}

	\newtoggle{LinesMacroUsed}%

	\newtoggle{showLines}%
	\toggletrue{showLines}
	\togglefalse{showLines}

	\newcommand{\lines}[1]{%
		\global\toggletrue{LinesMacroUsed}
		\foreach \x in {1,...,#1}{\par\noindent\strut\hrulefill\par}
	}

	\newbox{\MyBody}
	\NewEnviron{MyProof}{%
		\global\togglefalse{LinesMacroUsed}%
		\savebox{\MyBody}{\BODY}%
		\iftoggle{showLines}{
% Using the \savebox here has issues for case of multiple lines
			\begin{proof}\BODY\end{proof}%
		}{
			\iftoggle{LinesMacroUsed}{}{%
% Using the \savebox here has issues for case of multiple lines
				\begin{proof}\BODY\end{proof}%
			}%
		}
	}{}%


\begin{document}

\begin{MyProof}
	bla, bla,...
	\lines{4}
	bla, bla,...
	\lines{7}
	bla, bla,...
\end{MyProof}


\begin{MyProof}
	bla, bla, (without using lines macro)

	bla, bla, (without using lines macro)

	bla, bla, (without using lines macro)
\end{MyProof}

\begin{proof}
	bla, bla, (without using lines macro)

	bla, bla, (without using lines macro)

	bla, bla, (without using lines macro)
\end{proof}

\begin{MyProof}
	bla, bla,...
	\lines{4}
	bla, bla,...
	\lines{7}
\end{MyProof}

\end{document}
