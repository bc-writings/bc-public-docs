"use strict";StackExchange.anonymous={};var gauth=function(){return{informStackAuth:function(g){if(!gauth.enabled()){return}var f=document.domain;if(f.substr(0,5)=="meta."){f=f.substr(4,f.length-4)}var e=$.cookie("gauth");if(e==null){$.cookie("gauth",null,{path:"/",domain:f});$.cookie("gauth",null,{path:"/",domain:document.domain});return}if(f.charAt(0)!="."){f="."+f}$.cookie("gauth",null,{path:"/",domain:f});$.cookie("gauth",null,{path:"/",domain:document.domain});var b=e.indexOf(":");var d=e.substr(0,b);var a=e.substr(b+1);var c=g+"/auth/global/write?authToken="+encodeURIComponent(d)+"&nonce="+encodeURIComponent(a);$(document).ready(function(){$("#footer").append("<iframe style='display:none' src='"+c+"'></iframe>")})},checkStackAuth:function(a){if(!gauth.enabled()){return}var b=$.cookie("gauthed");if(b!=null){return}$.cookie("gauthed","1",{path:"/"});var c=function(h){var g=h.origin;if(g!=a){return}if(h.data=="No Local Storage"){gauth.noGAuthStorage();return}if(h.data=="No Session"){gauth.noGAuthSession();return}var d=h.data.substr(0,h.data.indexOf(","));var f=h.data.substr(h.data.indexOf(",")+1);$.post("/users/login/global",{authToken:d,nonce:f},function(e,j,i){gauth.globallyAuthed(e)},"json")};if(window.attachEvent){window.attachEvent("onmessage",c)}else{window.addEventListener("message",c,false)}$.post("/users/login/global/request","",function(e,f,g){var d=a+"/auth/global/read?request="+encodeURIComponent(e.token)+"&nonce="+encodeURIComponent(e.nonce);$(document).ready(function(){$("#footer").append("<iframe id='global-auth-frame' style='display:none' src='"+d+"'></iframe>")})},"json")},enabled:function(){$.cookie("enabledCheck","1");if($.cookie("enabledCheck")==null){return false}$.cookie("enabledCheck",null);if(typeof(localStorage)=="undefined"){return false}return true},noGAuthStorage:function(){},noGAuthSession:function(){},globallyAuthed:function(d){if(!d||!d.Message){return}var f=d.Message+" ",a,g=false,e=""+window.location,b=e.indexOf("returnurl=");if(b!=-1){var c=e.indexOf("&",b);if(c==-1){c=e.length}a=decodeURIComponent(e.substring(b+"returnurl=".length,c))}if(e.indexOf("/users/login")!=-1){g=true;a=a||"/"}if(g){f+="<br>You are being redirected..."}else{f+=a?"<a href=\"javascript:window.location='"+a+"'\">Click here</a> to return to your last location.":'<a href="javascript:location.reload(true)">Click here</a> to refresh the page.'}StackExchange.helpers.showFancyOverlay({message:f,showClose:!g,complete:function(){if(g){window.location=a}}})}}}();var genuwine=function(){var m,c;var a="";var q;var p=function(){return $(".genu").hasClass("genu-on")};var r=function(){var y=$(".genu");var A=$("#seWrapper");if(A.length==0){d();A=$("#seWrapper");var z;if(q>0){z=$("#seTabInbox");o(z)}else{z=$("#seTabHot");k(z)}z.addClass("seCurrent")}var x=y.hasClass("genu-on");if(x){$(".unreadCountTab").hide();$(".itemBoxNew").removeClass("itemBoxNew");A.fadeOut("fast")}else{A.fadeIn("fast");$(".unreadCount").hide()}y.toggleClass("genu-on",!x);if(q==-1){$(y).ready(function(){$("#seTabInbox").hide()})}};var d=function(){var y='<div id="seWrapper" style="position:absolute; display:none;"><div class="seIntro"><a href="'+a+'">Stack Exchange</a> is a network of free, community-driven Q&A sites.</div><div class="seNav"><ul class="seNavLinks"><li><a id="seTabHot">Hot Questions</a></li><li><a id="seTabSites">All Sites</a></li><li><a id="seTabInbox">Inbox</a></li></ul></div><div class="seContainer"></div><div class="seFooter">';if(StackExchange.options.enableAccountEmails){y+='<div id="seTabEmail" class="seEmailAccount"><a>email settings</a></div>'}y+='<a id="seClose">close</a></div></div>';var x=$("#hlinks");var z=x.height()+x.offset().top+5;$(y).appendTo("#portalLink").css({top:z}).find("ul.seNavLinks a, #seTabEmail").click(function(){e($(this))});$("#seClose").live("click",r)};var e=function(x){$(".seNavLinks a").removeClass("seCurrent");x.addClass("seCurrent");switch(x.attr("id")){case"seTabHot":k(x);$("#seContainerSites, #seContainerInbox, #seContainerEmail").hide();$("#seContainerHot").fadeIn("fast");break;case"seTabSites":s(x);$("#seContainerHot, #seContainerInbox, #seContainerEmail").hide();$("#seContainerSites").fadeIn("fast");break;case"seTabInbox":o(x);$("#seContainerHot, #seContainerSites, #seContainerEmail").hide();$("#seContainerInbox").fadeIn("fast");break;case"seTabEmail":b(x);$("#seContainerHot, #seContainerSites, #seContainerInbox").hide();$("#seContainerEmail").fadeIn("fast");break}};var k=function(x){if($("#seContainerHot").length==0){j(x)}};var b=function(x){if($("#seContainerEmail").length==0){v(x)}};var v=function(x){f(x,"/accounts/email-settings","json",function(z,y){var B='<div id="seContainerEmail" style="display:none; font-size:11px;"><div class="itemBox" style="border-bottom: 0px"><p>Would you like to receive unread inbox notifications via email?</p><div>Email: <input id="email-notify" name="email-notify" style="width:300px;" value="'+y.verifiedEmail+'"></input></div><div><input type="radio" name="optIn" value="true" id="email-enable"'+(y.optIn==true?'checked="checked"':"")+'"> <label for="email-enable">Email me my unread inbox messages   <select id="email-freq"><option value="3">every 3 hours</option><option value="24">daily</option><option value="168">weekly</option></select> </label></div><div><input type="radio" name="optIn" value="false" id="email-disable"'+(y.optIn!=true?'checked="checked"':"")+'"> <label for="email-disable">Do not email me inbox messages</label></input></div><div><input type="button" name="save" id="email-save" value="Save" disabled="disabled"></input></div><div id="email-confirmation" style="display:none;"></div></div></div>';g(z,B);$("#email-freq").val(y.freq);$("#email-notify").focus().keyup(A);$("#email-enable, #email-disable, #email-freq").change(A);function A(){$("#email-save").removeAttr("disabled");$("#email-confirmation").html("")}$("#email-save").click(function(){t();$.post("/accounts/verified-email-set",{email:$("#email-notify").val(),fkey:StackExchange.options.user.fkey,optin:$("input[name=optIn]:checked").val(),freq:$("#email-freq").val()},function(C){StackExchange.helpers.removeSpinner();$("#email-confirmation").html(C.message).fadeIn();if(C.success){$("#email-save").attr("disabled","disabled")}},"json")})},true)};var j=function(x){f(x,a+"/genuwine?callback=?","jsonp",n)};var n=function(D,C){var B=$("<div/>");var A='<div id="seContainerHot" style="display:none">';for(var x=0;x<C.length;x++){var E=C[x];var F=E.SiteId;var z='href="http://'+F+"/questions/"+E.Id+'"';var y=parseInt(E.DisplayScore,10);A+='<div class="itemBox"><a '+z+' class="seNumAnswer">'+y+'</a><div class="siteInfo"><p><a '+z+">"+B.text(E.Title).html()+'</a></p><a href="http://'+F+'" class="siteLink">'+F+"</a></div></div>"}A+="</div>";g(D,A)};var s=function(x){if($("#seContainerSites").length==0){u(x)}};var u=function(x){var y=document.location.host;f(x,a+"/genuwine/sites?callback=?&host="+y+(!!m?("&guid="+m):""),"jsonp",h)};var h=function(x,C){var z='<div id="seContainerSites" style="display:none">';for(var y=0;y<C.length;y++){var D=C[y];var B=D.Name;var A='href="http://'+D.Id+'"';z+='<div class="itemBox"><a '+A+' class="siteFavicon"><img src="'+D.FaviconUrl+'" alt="'+B+'"></a><div class="siteInfo"><p><a '+A+">"+B+"</a></p><a "+A+' class="siteLink">'+D.Description+"</a></div></div>"}z+="</div>";g(x,z)};var o=function(x){if(q==-1){return}if($("#seContainerInbox").length==0){i(x)}if(q>0&&x.find(".unreadCountTab").length==0){x.prepend('<span class="unreadCountTab">'+q+"</span>")}};var i=function(x){f(x,"/inbox/genuwine","json",l,true)};var l=function(y,F){var B='<div id="seContainerInbox" style="display:none">';for(var x=0;x<F.length;x++){var H=F[x];var z='href="'+H.Url+'"';var C='title="'+H.CreationDate+'"';var A=H.Count;var G=H.IsNew?" itemBoxNew":"";B+='<div class="itemBox'+G+'"><a '+z+' class="siteLinkFavicon"><img src="'+H.FaviconUrl+'" alt="'+H.SiteUrl+'"></a><div class="siteInfo">';if(H.Type=="careers message"){B+="<p><a "+z+' style="font-weight:normal"><b>'+H.Title+"</b> wants to contact you on <b>Stack Overflow Careers</b></a></p>"}else{if(H.Type=="invitation"){var E=H.Count;var D="invitation"+(E>1?"s":"");B+="<p><a "+z+' style="font-weight:normal"><b>'+E+"</b> "+D+" awarded on <b>Stack Overflow Careers</b></a></p>"}else{B+="<p>"+(A>1?A+" ":"")+H.Type+" on <a "+z+" "+C+">"+H.Title+"</a></p>"}}B+='<p class="inboxSummary">'+(H.Summary||"")+"</p></div></div>"}if((c||m)&&F.length>=5){B+='<div class="itemMoreContainer"><div class="seIntro"><a href="http://stackexchange.com/users/'+(c||m)+'?tab=inbox">more inbox messages &hellip;</a></div></div>'}B+="</div>";g(y,B)};var w={};var f=function(B,A,x,D,z){var y=B.attr("id");if(w[y]){t();return}w[y]=true;t();var C=function(){w[y]=false;StackExchange.helpers.showErrorPopup($(".seContainer"),"An error occurred while loading - please try again.")};$.ajax({type:"GET",url:A,dataType:x,success:function(E){if(E&&(E.length>0||z)){D(B,E)}else{C()}},error:C,complete:StackExchange.helpers.removeSpinner()})};var g=function(x,z){var y=$(z);y.appendTo(".seContainer");if(x.hasClass("seCurrent")){y.fadeIn("fast")}};var t=function(){StackExchange.helpers.removeSpinner();StackExchange.helpers.addSpinner(".seContainer",{position:"relative",left:"10px",top:"10px"})};return{isVisible:p,click:r,init:function(x,A,y){var z=$(".genu");if(z.length>=1){z[0].onclick=null}m=x;c=A;a=z.attr("href");q=y;z.removeAttr("href").add(".unreadCount").click(r);$(document).click(function(B){if(p()&&!$.contains($("#portalLink")[0],B.target)){r()}})}}}();StackExchange.notify=(function(){var c=0;var i=-1;var h="m";function j(p,o){var q=$("#dismissed-messages");q.val(q.val()+"~"+p+(o?" "+o:"")+"~")}function l(p,o){var q=$("#dismissed-messages").val();if(!q){return false}return new RegExp("~"+p+(o?" "+o:"")+"~").test(q)}function f(s,p,r){var o=parseInt($("body").css("margin-top").match(/\d+/));var q=p*o/s;if(r){$("body:not(.no-message-slide)").animate({marginTop:q+"px"},"fast","linear")}else{$("body:not(.no-message-slide)").css("marginTop",q+"px")}}var m=function(q,p){var o=$("#notify-"+q+(p?"-"+p:""));if(q==i){d()}else{if(q>i){$.post("/messages/mark-as-read",{messagetypeid:q,id:(p?p:null)})}}j(q,p);c--;o.fadeOut("fast",function(){f(c+1,c,true);o.remove()})};var n=function(q){c++;if(l(q.messageTypeId,q.id)){return false}var o="";if(q.messageTypeId){o=' id="notify-'+q.messageTypeId+(q.id?"-"+q.id:"")+'"'}var p="<div"+o+' style="display:none"><span class="notify-close"><a title="dismiss this notification">&times;</a></span><span class="notify-text">'+q.text+"</span>";if(q.showProfile){var r=encodeURIComponent("/users/"+q.userId+"?tab=activity");p+=' See your <a href="/messages/mark-as-read?messagetypeid='+q.messageTypeId+"&returnurl="+r+'">profile</a>.'}p+="</div>";var s=$(p);s.find(".notify-close").click(function(){m(q.messageTypeId,q.id)});$("#notify-container").append(s);return true};var d=function(o){$.cookie(h,(o?o:"0"),{expires:90,path:"/"})};var e=function(){var o=parseInt($.cookie(h));if(isNaN(o)){o=0}if(o<5){b();d(++o)}};var k=function(){$("#notify-container div").fadeIn("slow")};var a=function(){$("body:not(.no-message-slide)").animate({marginTop:"2.5em"},"fast","linear")};var b=function(){$(".module.newuser:not(.sidebar-help)").show()};var g=function(p,o){var q=$('<div class="link-more"><a>view '+p+" more notification"+(p!=1?"s":"")+"</a></div>");$("#notify-container").append(q);q.click(function(){q.detach();for(var r=0;r<o.length;r++){n(o[r])}k()})};return{showFirstTime:function(o){if($.cookie(h)){e()}else{b();if(!/\/users\/(login|authenticate)/i.test(window.location)){a();n({messageTypeId:i,text:"Welcome to "+o+' &mdash; check out the <a onclick="StackExchange.notify.closeFirstTime(); return false;" href="/faq">FAQ</a>!'});k()}}},showMessages:function(t,r){var p=0;var q=r?2:t.length;for(var o=0;o<q&&o<t.length;o++){if(n(t[o])){p++}}f(c,p,false);k();if(r&&p<t.length){var s=t.slice(q);g(t.length-p,s)}},show:function(o,p){a();n({text:o,messageTypeId:p});k()},close:m,closeFirstTime:function(){d();document.location="/faq"},getMessageText:function(o){return $("#notify-"+o+" .notify-text").text()}}})();function moveScroller(){var b=$("#scroller").width();var a=function(){var e=$(window).scrollTop();var d=$("#scroller-anchor").offset().top;var c=$("#scroller");if(e>d){if(c.height()>$(window).height()){c.css({position:"fixed",top:"",bottom:"0px",width:b})}else{c.css({position:"fixed",top:"0px",bottom:"",width:b})}}else{if(e<=d){c.css({position:"relative",top:"",bottom:""})}}};$(window).scroll(a).resize(a);a()}var styleCode=(function(){function a(b){var c=$("#prettify-lang").text();if(c!=""){b.addClass(c);return true}return false}return function(){if(typeof MathJax!="undefined"){MathJax.Hub.Queue(["Typeset",MathJax.Hub])}var b=false;$("pre code").parent().each(function(){if($(this).hasClass("prettyprint-override")){$(this).removeClass("prettyprint-override").addClass("prettyprint");b=true}if(!$(this).hasClass("prettyprint")){if(a($(this))){$(this).addClass("prettyprint");b=true}}});if(b){if(typeof jtab!="undefined"){jtab.renderimplicit();return}StackExchange.using("prettify",function(){StackExchange.prettify.applyCodeStyling()})}}})();StackExchange.helpers.MagicPopup=function(g){var e,c,f,h,d={};function b(i,k){var p=$("<div id='"+g.id+"'/>").html(k);var m=$("<div />").css({overflow:"hidden",position:"absolute",width:1,height:1,top:0,left:0}).append(p).appendTo("body");var o=g.showing(i,p);var j={left:o.left};if(o.hasOwnProperty("bottom")){j.bottom=o.bottom;j.top="auto"}else{j.top=o.top}var l;if(g.shown){l=function(){g.shown(i,p)}}m.css(j).animate({height:p.outerHeight()+8,width:p.outerWidth()+8},300,l);e=function(){m.stop().remove();if(g.removed){g.removed(i,p)}f=null;e=null};f=StackExchange.helpers.DelayedReaction(e,5);var n=m;if(o.additional){n=n.add(o.additional)}n.hover(f.cancel,f.trigger)}var a=StackExchange.helpers.DelayedReaction(function(i,k){if(h||!i){return}var j;if(g.cache&&("c_"+i in d)){j=$.Deferred().resolve(d["c_"+i])}else{j=$.ajax({type:"GET",url:i,dataType:"html"});if(g.cache){j.done(function(l){d["c_"+i]=l})}}j.done(function(l){if(e){e()}if(l==""){return}b(k,l)})},500);$(document).delegate(g.selector,{mouseenter:function(){if(f&&this===c){f.cancel();return}c=this;a.trigger(g.getUrl(this),this);h=false;return false},mouseleave:function(){h=true;a.cancel();if(f){f.trigger()}}})};StackExchange.tagmenu=(function(){var c,e;var a=function(f){c=f;if(e){return}e=true;if(StackExchange.options.isMobile){return}StackExchange.helpers.MagicPopup({selector:".post-tag:not(.user-tag)",id:"tag-menu",getUrl:d,showing:b,shown:function(g,h){if(c){c(h,$(g).text())}}});$("#interesting-tags .post-tag").addClass("user-tag")};return{init:a};function d(h){var f=$(h);var i=f.attr("href");if(!i||i.charAt(0)!="/"){return null}var g=f.text();if(g.indexOf("*")>-1){return null}f.attr("title","");return"/tags/"+encodeURIComponent(g)+"/subscriber-info"}function b(h,l){var f=$(h),i=f.offset(),g=f.outerHeight(),k={left:i.left},j=i.top+g;if(l.height()+j>$(window).height()+$(window).scrollTop()){k.bottom=$(window).height()-i.top-8}else{k.top=j}return k}})();StackExchange.usermenu=(function(){var e,a;var b=function(){if(e){return}e=true;if(StackExchange.options.isMobile){return}StackExchange.helpers.MagicPopup({selector:".user-hover .user-gravatar48, .user-hover .user-gravatar32",getUrl:f,cache:true,id:"user-menu",showing:c,removed:d});function f(h){var g=$(h),l=g.closest(".user-hover"),k=l.find(".user-details a").attr("href"),j=new RegExp("/users/([^/]+).*$"),i=j.exec(k);if(!i){return null}return"/users/user-info/"+i[1]}};return{init:b};function c(j,h){var k=$(j),o=k.find("img:first"),f=o.offset(),r=o.height(),p=o.width(),n=Math.max(p,r),i=64*r/n,q=64*p/n,g=h.find("img:first").css({width:q,height:i});var m=g.offset();g.css("visibility","hidden");a=o.clone().css({position:"absolute",zIndex:300,left:f.left,top:f.top,width:p,height:r}).appendTo("body");var l=function(){if(!g[0].complete){setTimeout(l,500);return}g.css("visibility","visible");a.fadeOutAndRemove()};a.animate({width:q,height:i,top:f.top+m.top},200,l);return{top:f.top,left:f.left-m.left,additional:a}}function d(f,g){a.remove()}})();StackExchange.chatAd=(function(){var a,b,o=180,m=30,k=480,g=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];if(/^\/questions\/\d+/i.test(window.location.pathname)){k=0}return{init:function(r){a=r.chatUrl;b=r.reloadUrl;if(r.tagBased){var s=h();if(!s){return}b+=(/\?/.test(b)?"&":"?")+"tags="+encodeURIComponent(s)}if(r.preloadData===null){e()}else{l(r.preloadData,null,null)}}};function h(){var r=$(".question .post-taglist .post-tag");if(!r.length){return null}return r.map(function(t,s){return $(s).text()}).get().join(" ")}function j(r){return r<10?"0"+r:r}function q(r){var s=new Date();s.setTime(r*1000);return[s.getUTCFullYear(),"-",j(s.getUTCMonth()+1),"-",j(s.getUTCDate())," ",j(s.getUTCHours()),":",j(s.getUTCMinutes()),":",j(s.getUTCSeconds()),"Z"].join("")}function n(s){var u=Math.floor((new Date()).getTime()/1000);var y=u-s;var w=y%60;var r=Math.floor(y/60);var t=Math.floor(y/3600);if(y<1){return"just now"}if(y<60){return w==1?"1 sec ago":w+" secs ago"}if(y<3600){return r==1?"1 min ago":r+" mins ago"}if(y<86400){return t==1?"1 hour ago":t+" hours ago"}var x=Math.floor(y/86400);if(x==1){return"yesterday"}else{if(x<=2){return x+" days ago"}}var v=new Date(s*1000);return g[v.getMonth()]+" "+v.getDate()+" at "+v.getHours()+":"+j(v.getMinutes())}function f(r){var s=$("<div />");s.text(r);return s.html().replace('"',"&quot;")}function e(){$.get(b,null,function(r,t,s){l(r,t,s)})}function d(r){var s=$('<div class="ad502-users" />');for(var u=0;u<r.length&&u<7;u++){var x=r[u];var t=x.name;if(x.lastPost){t+=": "+n(x.lastPost)}var v=a+"/users/"+x.id;var y="http://www.gravatar.com/avatar/"+x.emailhash+"?s=23&d=identicon&r=PG";var w=$('<a href="'+v+'" />');$("<img />").attr("title",t).attr("src",y).appendTo(w);s.append(w)}return s}function c(r){return $('<div class="ad502-users"><img src="'+a+"/rooms/users/"+r+'.jpeg" /></div>')}function p(s){var t=s.user;var r=s.userid;if(r){return'<a href="'+a+"/users/"+r+'">'+f(t)+"</a>"}return f(t)}function i(){if(o<=k){window.setTimeout(e,o*1000)}o+=m}function l(r,u,t){var w=$("#ad502-rooms");if(r.error){i();return}w.html("");var y=r.rooms;for(var s=0;s<y.length&&s<2;s++){var v=y[s];var z=a+"/rooms/"+v.id;var x=$('<div class="ad502-room"></div>');x.append($('<h3 class="ad502-room-h3"><span class="ad502-room-title" title="'+f(v.name)+'"><a href="'+z+'">'+f(v.name)+"</a></span></h3>"));if(v.messages&&v.messages.length>0){x.append($('<span title="'+q(v.lastPost)+'" class="ad502-last-message">'+n(v.lastPost)+" - "+p(v.messages[0])+"</span><br>"))}if(v.singleImage){x.append(c(v.id))}else{x.append(d(v.users))}w.append(x)}if(r.activeUsers>1){$("#h-chat-link").text(r.activeUsers+" People Chatting")}else{$("#h-chat-link").text("Visit Chat")}$("#h-chat-link").attr("title",r.activeUsers+" users active in "+r.activeRooms+" rooms the last 60 minutes");i()}})();StackExchange.helpers.noDiacritics=(function(){var a={"àåáâäãåą":"a","èéêëę":"e","ìíîïı":"i","òóôõöøő":"o","ùúûü":"u","çćč":"c","żźž":"z","śşš":"s","ñń":"n","ýŸ":"y","ł":"l","đ":"d","ß":"ss","ğ":"g","Þ":"th"};return function(b){for(var c in a){if(a.hasOwnProperty(c)){b=b.replace(new RegExp("["+c+"]"),a[c])}}return b}})();function sanitizeAndSplitTags(b,g){b=$.trim(b).replace(/([A-Za-z0-9])\+(?=[A-Za-z0-9])/g,"$1 ");var d=b.split(/[\s|,;]+/);var f=[];for(var c=0;c<d.length;c++){var e=StackExchange.helpers.noDiacritics(d[c].toLowerCase()).replace(/_/g,"-");var a="[^a-z0-9.#+"+(g?"*":"")+"-]";e=e.replace(new RegExp(a,"g"),"");e=e.replace(/^[#+-]+/,"");e=e.replace(/[.-]+$/,"");if(e.length>0&&$.inArray(e,f)==-1){f.push(e)}}return f}StackExchange.question=(function(){var c=function(h){if(/^#comment/.test(window.location.hash)){var j=window.location.hash.indexOf("_");var k=+window.location.hash.substring(8,j);var i=+window.location.hash.substring(j+1);var f=$("#comments-link-"+i);var g="#comment-"+k;var l=$(g).length!=0;var m=function(){$(g).css({backgroundColor:h.highlightColor});$(g).animate({backgroundColor:h.backgroundColor},2000,"linear",function(){$(this).css("background-color","")});$(g)[0].scrollIntoView(true)};if(l){m()}else{StackExchange.comments.loadAll(f).done(m)}}};var a=function(){return $("div.share-tip a[id^='link-post-']")};var e=function(g,k){var i=g!=null;if(!g){g=$('div.question div.post-menu a:contains("link")')}var l=g.closest(".post-menu, .help-menu");if(g.hasClass("share-link")){l.find(".close-share-tip").click()}else{g.addClass("share-link");var j=g.attr("id").substring("link-post-".length);var f=g.closest(".col-section").length?"section":(g.closest("div.question").length?"question":"answer");var h=$('<div class="share-tip" style="display:none">share a link to this '+f+'<input type="text" value="http://'+document.location.host+g.attr("href")+'" style="display:block; width:292px;"><a class="close-share-tip" style="float:right">close</a></div>');if(k){h.find(".close-share-tip").before('<a id="link-post-'+j+'" style="float:left">cite</a>')}h.appendTo(l).fadeIn(i?"fast":0).bind("removing",function(){g.removeClass("share-link")}).find(".close-share-tip").click(function(){h.fadeOutAndRemove()}).end().find("input[type=text]").select()}};var d=function(r){var f=$("#post-form h2:first"),g=f.wrap("<div />").parent(),i=g.wrap("<div />").parent(),j=$("<div />").prependTo(i),k=i.height(),q=$("<div />"),p=$(r),l=parseInt(f.css("margin-bottom")),m=$("#content"),h=$("#wmd-input").outerWidth(),n=1000,o=m.offset().left>f.offset().left-5&&m.css("overflow-x")!="visible";q.css({height:0,overflowY:"hidden"}).appendTo(g).append(p);i.css({height:k,position:"relative"});g.css({position:"absolute",bottom:-l,width:h});j.addClass("answer-help-background").css({position:"absolute",bottom:-l,height:0,width:h});if(o){j.css("left",0);g.animate({paddingLeft:5},n)}q.animate({height:p.height()+l+10},n);j.animate({height:p.height()+l+10+k},n);$("<div style='float:right;margin-top:10px;'><a href='#'>ok</a></div>").hide().prependTo(g).fadeIn(1000).find("a").one("click",function(t){var s=$(this).parent();setTimeout(function(){s.remove()},1);q.animate({height:0},n,function(){q.add(j).remove();f.unwrap().unwrap()});j.animate({height:0},n);if(o){g.animate({paddingLeft:0},n)}t.preventDefault()})};var b=function(){$.get("/posts/answer-help").then(d)};return{showShareTip:e,init:function(h){if(StackExchange.question.fullInit){StackExchange.question.fullInit(h)}else{StackExchange.question.bindAnonymousVoteDisclaimers()}StackExchange.comments.init({autoShowCommentHelp:h.autoShowCommentHelp});if(h.showShareTip){e()}$("input.anon-vote").live("click",function(){var j=$(this);var l=j.postId();var k=j.parent();k.closest(".question,.answer").unbind("mouseenter.helpful").unbind("mouseleave.helpful");k.text("sending feedback ...");setTimeout(function(){k.text("Thank you for your feedback.")},500);$.ajax({type:"POST",url:"/vote/anon/"+l,data:{votetypeid:(j.val()=="Yes"?2:3)},complete:function(){}})});var g=$(".was-this-helpful");var i=g.css("color");var f=$(".post-text").css("color");g.each(function(){var m=$(this);var l=m.text();var k="Was this post useful to you? &nbsp;&nbsp;<input style='display:none;' class='anon-vote' type='button' value='Yes'/> &nbsp;<input style='display:none;' class='anon-vote' type='button' value='No'/>";var n=function(){m.html(k).animate({color:f},"fast","linear").find("input").fadeIn("fast")};var j=function(){m.text(l).animate({color:i},"fast","linear")};m.closest(".answer, .question").bind("mouseenter.helpful",n).bind("mouseleave.helpful",j)});$('.post-menu a:contains("link")').live("click",function(j){if(!j.ctrlKey&&!j.metaKey){e($(this),h.showCitation);return false}});if(h.showAnswerHelp){$("#wmd-input").one("focus",b)}if(h.showCitation){a().live("click",function(){var j=$(this).closest(".post-menu");j.find(".close-share-tip").click();citation.show($(this))})}$(function(){c(h)})}}})();StackExchange.question.bindAnonymousVoteDisclaimers=function(){function a(b){return function(d){var c='Please <a href="/users/login?returnurl='+escape(document.location)+'">login or register</a> to '+b+" this post.";StackExchange.helpers.showErrorPopup($(this).parent(),c);d.preventDefault()}}$(".vote-up-off, .vote-down-off").click(a("vote for"));$("div.post-menu a[id^='flag-post-']").unbind("click").click(a("flag"));$(".star-off:not(.disabled)").live("click",a("favorite"))};StackExchange.comments=(function(){var d={};function a(g,h){this.postId=g;this.jDiv=h;this.jCommentsLink=$("#comments-link-"+g)}var f=function(){};a.prototype={checkDiscussion:f,ensureInput:f,addShow:function(i){var g=this;this.loadAllComments().done(function(){g.jCommentsLink.hide();g.checkDiscussion()});var h=this.ensureInput();if(h&&!i){h.focus()}},ajax:function(j,g,i){if(i){StackExchange.helpers.addSpinner(i,{"margin-left":"10px"})}var h=this;return $.ajax(j).fail(function(k){$(".error-notification").fadeOut("fast",function(){$(this).remove()});var l=k.responseText;if(!l||l.length>=100){l="An error occured"+(g?" "+g:"")}StackExchange.helpers.showErrorPopup(i||h.jDiv,l);if(i){StackExchange.helpers.removeSpinner()}}).done(StackExchange.helpers.removeSpinner).promise()},showComments:function(g){this.jDiv.find(" > table > tbody").html(g);this.jCommentsLink.text("add comment");if(typeof MathJax!="undefined"){MathJax.Hub.Queue(["Typeset",MathJax.Hub])}},loadAllComments:function(h){this.jDiv.removeClass("dno");if(!h&&!/more comment/.test($("#comments-link-"+this.postId).text())){return $.Deferred().resolve().promise()}var g=this;return this.ajax({type:"GET",url:"/posts/"+this.postId+"/comments",dataType:"html"},"while fetching comments").done(function(i){g.showComments(i)}).promise()}};function e(j){var k=j.constructor===$?j:$(j);var h=k.closest(".question, .answer, div[id^='post-']").find(".comments");var g=h.attr("id").replace(/^comments-/,"");if(d[g]){return d[g]}var i=new a(g,h);d[g]=i;return i}function c(g){$("a[id^='comments-link-']").click(function(){e(this).addShow()})}function b(h){for(var g in h){if(h.hasOwnProperty(g)){a.prototype[g]=h[g]}}}return{init:c,loadAll:function(g){return e(g).loadAllComments(true)},extendPostUi:b,uiForPost:e}})();StackExchange.share=(function(){function a(c,d,b){if(!window.open(c,d,b)){window.location.href=c}}return{twitter:function(c,b,d){c.click(function(){a("http://twitter.com/share?url="+b+"&ref=twitbtn&text="+d,"sharetwitter","toolbar=1,status=1,resizable=1,scrollbars=1,width=800,height=526")})},facebook:function(c,b,d){c.click(function(){a("http://www.facebook.com/sharer.php?u="+b+"&ref=fbshare&t="+d,"sharefacebook","toolbar=1,status=1,resizable=1,scrollbars=1,width=626,height=436")})}}})();function initTagRenderer(b,a){if(window.tagRenderer){return}window.tagRendererRaw=function(c,f){f=f||"";var e="";if(!f){if(b&&$.inArray(c,b)>-1){e=" required-tag"}else{if(a&&$.inArray(c,a)>-1){e=" moderator-tag"}}}var d="<a class='post-tag"+e+"' href='"+f+"/questions/tagged/"+encodeURIComponent(c)+"' title=\"show questions tagged '"+c+"'\" rel='tag'>"+c+"</a>";return d};window.tagRenderer=function(d,c){return $(tagRendererRaw(d,c))}}function showFadingHelpText(a){a.wrap('<div class="dno" />').show().parent().fadeIn("slow",function(){$(this).children().unwrap()})}function initFadingHelpText(){var b={"wmd-input":"#how-to-format",tagnames:"#how-to-tag","tag-editor":"#how-to-tag",title:"#how-to-title"};var a=$("#wmd-input, #tagnames, #title, .tag-editor input");var c=function(e){var d=$(e);if(d.parent().hasClass("tag-editor")){return b["tag-editor"]}return b[$(e).attr("id")]};a.focus(function(){var e=c(this);a.each(function(){var f=c(this);if(f!=e){$(f).hide()}});var d=$(e);if(!d.is(":visible")){showFadingHelpText(d)}})}$.fn.extend({postId:function(){var a=this.first();if(!a.hasClass("answer")||!a.hasClass("question")){a=a.closest(".answer, .question")}return parseInt(a.find(".vote input")[0].value)}});StackExchange.newsletterAd=(function(){function c(d){var e=$('<div id="lightbox-panel" class="popup" style="display:block"></div>').append('<div class="popup-close"><a title="close this popup (or hit Esc)">&times;</a></div>').append(d);$('<div id="lightbox"></div>').appendTo($("body")).css("height",$(document).height()).fadeIn("fast");e.appendTo($("body")).center().fadeIn("fast").find(".popup-close").click(function(){$("#lightbox, #lightbox-panel").fadeOutAndRemove()})}function b(){var e=StackExchange.options.site.name;var d=$(['<div style="text-align: left;">','<h2 style="margin-bottom: 15px;">Subscribe to the '+e+" weekly newsletter</h2>",'<p><strong><a href="/users/login?returnurl=/newsletter/signup/redirect">Create an account on '+e+'</a> or <a href="/users/login?returnurl=/newsletter/signup/redirect">log in</a> if you already have one.</strong></p>','<form><label for="newsletter-email-input">Or, send newsletter emails to:</label> <input type="text" id="newsletter-email-input" maxlength="100" title="your email address" /> <input type="submit" value="Subscribe" id="newsletter-email-submit" /></form>',"</div>"].join(""));d.find("form").submit(function(){var g=$(this);var f=$.trim(d.find("#newsletter-email-input").val());if(f.length==0){return false}StackExchange.helpers.addSpinner(g);$.ajax({url:"/newsletter/signup/anon",type:"POST",dataType:"json",data:{email:f},success:function(i,j,h){if(i.status=="confirmed"&&!i.error){g.find("#newsletter-email-input").attr("disabled",true);g.find("#newsletter-email-submit").replaceWith('<span style="line-height: 120%; text-align: center;"><strong>Subscribed!</strong></span>');$("#newsletter-signup-container").replaceWith('<div style="line-height: 200%; text-align: center;"><strong>Subscribed!</strong></div>')}else{if(i.status=="unconfirmed"&&!i.error){g.find("#newsletter-email-input").attr("disabled",true);g.find("#newsletter-email-submit").replaceWith('<span style="line-height: 120%; text-align: center;"><strong>Subscribed!</strong></span>');g.append("<br /><br/><p><em>Please click the link in the confirmation email to activate your subscription.</em></p>");$("#newsletter-signup-container").replaceWith('<span style="line-height: 120%;"><strong>Success!</strong> Please click the link in the confirmation email to activate your subscription.</span>')}else{g.showErrorPopup(i.error||"there was a problem signing up for the newsletter<br />please try again later")}}},error:function(h,i,j){g.showErrorPopup("there was a problem signing up for the newsletter<br />please try again later")},complete:function(){StackExchange.helpers.removeSpinner(g)}});return false});c(d)}function a(){$("#newsletter-signup").click(function(){var d=$(this);if(StackExchange.options.user.isAnonymous){b();return false}StackExchange.helpers.addSpinner("#newsletter-signup-container");$.ajax({url:"/newsletter/signup",type:"POST",dataType:"json",success:function(f,g,e){if(f.url){window.location.href=f.url}else{if(f.status=="confirmed"){$("#newsletter-signup-container").replaceWith('<div style="line-height: 200%; text-align: center;"><strong>Subscribed!</strong></div>')}else{if(f.status=="unconfirmed"){$("#newsletter-signup-container").replaceWith('<span style="line-height: 120%;"><strong>Success!</strong> Please click the link in the confirmation email to activate your subscription.</span>')}else{d.parent().showErrorPopup("there was a problem signing up for the newsletter<br />please try again later")}}}},error:function(e,f,g){d.parent().showErrorPopup("there was a problem signing up for the newsletter<br />please try again later")},complete:function(){StackExchange.helpers.removeSpinner("#newsletter-signup-container")}})});$("#newsletter-preview").click(function(){var d=$(window).height();var f=Math.min(600,d-100);var e=['<div id="newsleter-preview-pane" style="overflow: hidden; width: 660px; height: ',f,'px;">','<iframe src="',$(this).attr("href"),'" width="660" height="',f,'" frameborder="0"></iframe>',"</div>"].join("");c(e);return false})}return{init:a}})();(function(c,d,a,b){c.fn.caret=function(k,i){var j,m,o=this[0],n=c.browser.msie;if(typeof k==="object"&&typeof k.start==="number"&&typeof k.end==="number"){j=k.start;m=k.end}else{if(typeof k==="number"&&typeof i==="number"){j=k;m=i}else{if(typeof k==="string"){if((j=o.value.indexOf(k))>-1){m=j+k[d]}else{j=null}}else{if(Object.prototype.toString.call(k)==="[object RegExp]"){k=k.exec(o.value);if(k!=null){j=k.index;m=j+k[0][d]}}}}}if(typeof j!="undefined"){if(n){n=this[0].createTextRange();n.collapse(true);n.moveStart("character",j);n.moveEnd("character",m-j);n.select()}else{this[0].selectionStart=j;this[0].selectionEnd=m}this[0].focus();return this}else{if(n){m=document.selection;if(this[0].tagName.toLowerCase()!="textarea"){n=this.val();j=m[a]()[b]();j.moveEnd("character",n[d]);var p=j.text==""?n[d]:n.lastIndexOf(j.text);j=m[a]()[b]();j.moveStart("character",-n[d]);var e=j.text[d]}else{j=m[a]();m=j[b]();m.moveToElementText(this[0]);m.setEndPoint("EndToEnd",j);p=m.text[d]-j.text[d];e=p+j.text[d]}}else{p=o.selectionStart;e=o.selectionEnd}j=o.value.substring(p,e);return{start:p,end:e,text:j,replace:function(f){return o.value.substring(0,p)+f+o.value.substring(e,o.value[d])}}}}})(jQuery,"length","createRange","duplicate");StackExchange.loggedIn={};var profileLink=function(){var r;var a;var t;var e=false;var k;var s;var h;var p=function(){return $(".profile-link")};var f=function(){return $(".profile-triangle")};var n=function(){return $(".profile-popup")};var l=function(u){if(!u){u=p()}return u.hasClass("profile-link-on")};var m=function(v,u){u.toggleClass("profile-link-on",v);f().toggleClass("profile-triangle-on",v)};var b=function(u){var v=$('<div class="profile-popup" style="position:absolute; display:none;"><div class="profile-wrapper"><div class="profile-gravatar"><a href="'+r+'">'+a+'</a><ul class="profile-links"><li><a href="'+k+'">activity</a></li>'+(u.hasClass("child-meta")?"":'<li><a href="/privileges">privileges</a></li>')+'<li><a href="/users/logout">log out</a></li></ul></div><div class="profile-stats"></div><div class="profile-footer"><span class="popup-clock"></span> <a>close</a></div></div></div>');v.insertBefore(u).find(".profile-footer").click(profileLink.click);if(!e){o(v)}return v};var i=function(u){if(u.data("loading")){return}u.data("loading",true);var v=u.find(".profile-stats");v.addSpinner();$.ajax({type:"GET",url:"/users/profile-link-stats",dataType:"html",success:function(w){$(w).hide().appendTo(v).fadeIn("fast")},error:function(w,y,x){u.data("loading",false)},complete:StackExchange.helpers.removeSpinner})};var q=function(){var w=new Date();w.setTime(w.getTime()+h*1000);var u=w.getUTCHours(),v=w.getUTCMinutes();if(u<10){u="0"+u}if(v<10){v="0"+v}$(".profile-popup .popup-clock").text("UTC time "+u+":"+v)};var j=function(){if(t){return}t=setInterval(q,20000);q()};var d=function(){if(!t){return}clearInterval(t);t=null};var c=StackExchange.helpers.DelayedReaction(function(){profileLink.show()},450,{always:function(){g.cancel()}});var g=StackExchange.helpers.DelayedReaction(function(){profileLink.hide()},1000,{always:function(){c.cancel()}});var o=function(u){u.hover(c.trigger,g.trigger)};return{init:function(x,z,v,y){var u=p(),w=f();r=u.attr("href");a=x;e=z;k=v;h=y||0;w.click(profileLink.click);if(!z){o(u.add(w))}$(document).click(function(A){if(l(u)&&A.target!=u[0]&&A.target!=w[0]&&!$.contains($(".profile-wrapper")[0],A.target)){profileLink.hide()}})},click:function(){var u=p();g.cancel();c.cancel();if(l(u)){profileLink.hide()}else{profileLink.show()}},show:function(u,v){if(!u||typeof u=="number"){u=p()}if(!v){v=n()}if(!v.length){v=b(u)}if(!l(u)){v.fadeIn("fast");i(v);m(true,u);s=new Date()}j()},hide:function(u,v){if(!s||new Date().getTime()-s.getTime()<500){return}if(!u||typeof u=="number"){u=p()}if(!v){v=n()}if(l(u)){v.fadeOut("fast");m(false,u)}d()}}}();StackExchange.tagPreferences=(function(){var h=function(k){var j="";var i="";k.each(function(){var l=false;i=$(this).text();if(i.indexOf("#")>-1){i=i.replace(/#/g,"ñ")}if(i.indexOf("+")>-1){i=i.replace(/\+/g,"ç")}if(i.indexOf(".")>-1){i=i.replace(/\./g,"û")}if(i.indexOf("*")>-1){l=true}if(l){j+="div.tags:regex(class, t-"+i.replace(/\*/g,".*")+"),"}else{j+="div.t-"+i+","}});if(j.length>0){j=j.substring(0,j.length-1)}return j};function e(l,i,k){var j="";if(typeof forUserId!="undefined"){j=forUserId}$.post("/users/save-preference",{fkey:StackExchange.options.user.fkey,key:l,value:i,forUserId:j},k)}var d=function(k,t,r,o,s,j){var n=$(k).val();var q=sanitizeAndSplitTags(n,true);var p=false;for(var l=0;l<q.length;l++){if($.trim(q[l]).length!=0){$(t).children().each(function(){if($(this).text()==q[l]){$(this).fadeTo(500,0.1).fadeTo(500,1);p=true;return}});if(!p){var m=$.URLEncode(q[l]);$(t).append('<a id="'+q[l]+'" href="/questions/tagged/'+m+'" class="'+o+'" title="show questions tagged \''+q[l]+"'\">"+q[l]+"</a> ");b(r)}p=false}}$(k).val("");if(s){$(k).focus()}if(!j){e(r,$(t).text())}a()};var b=function(k){var i='<span class="delete-tag" title="remove this tag"></span>',j=(k==20?"#interestingTags > .post-tag:last":k==25?"#ignoredTags > .post-tag:last":"#interestingTags > .post-tag, #ignoredTags > .post-tag");$(j).append(i).click(function(p){var l=$(p.target);if(l.is("[class^=delete-tag]")){var m=l.closest(".post-tag"),o=m.closest("div"),n=o.is("#ignoredTags")?25:20;m.remove();e(n,o.text());a();return false}})};var a=function(j,r){var u=$("#ignoredTags > a");var t=$("#interestingTags > a");var l=$("#inferredTags > a");if(j&&u.length==0&&t.length==0&&l.length==0){return}$("div.question-summary").removeClass("tagged-ignored tagged-ignored-hidden tagged-interesting");var m=h(u);var s=h(t);var k=h(l);if(r){for(var n=0;n<r.length;n++){var p=r[n];if(p.indexOf("#")>-1){p=p.replace(/#/g,"ñ")}if(p.indexOf("+")>-1){p=p.replace(/\+/g,"ç")}if(p.indexOf(".")>-1){p=p.replace(/\./g,"û")}var o=new RegExp("div.t-"+p+"(,|$)","g");m=m.replace(o,"");s=s.replace(o,"");k=k.replace(o,"")}}if(m.length>0){var q=$("#hideIgnored").is(":checked")?"tagged-ignored-hidden":"tagged-ignored";$(m).closest("div.question-summary").addClass(q)}if(s.length>0){$(s).closest("div.question-summary").addClass("tagged-interesting")}if(k.length>0){$(k).closest("div.question-summary").addClass("tagged-interesting")}};var c=function(l,j){var k=$("#tag-menu");if(j=="favorite"){var i=$("#ignoredTags a").filter(function(){return $(this).text()==l});i.add(i.next()).remove();$("#interestingTag").val(l);d("#interestingTag","#interestingTags",20,"post-tag",false,true)}if(j=="ignore"){var i=$("#interestingTags a").filter(function(){return $(this).text()==l});i.add(i.next()).remove();$("#ignoredTag").val(l);d("#ignoredTag","#ignoredTags",25,"post-tag",false,true)}if(j=="clear"){var i=$("#ignoredTags a").filter(function(){return $(this).text()==l});i.add(i.next()).remove();var i=$("#interestingTags a").filter(function(){return $(this).text()==l});i.add(i.next()).remove();a()}StackExchange.helpers.addSpinner(k);$.ajax({type:"POST",url:"/tags/"+encodeURIComponent(l)+"/favorite",data:{action:j,fkey:StackExchange.options.user.fkey},dataType:"html",success:function(m){g(k.html($(""+m)),l)},error:function(m,o,n){},complete:StackExchange.helpers.removeSpinner})};var f=function(i,j){var k=$("#tag-menu");StackExchange.helpers.addSpinner(k);$.ajax({type:"POST",url:"/tags/"+encodeURIComponent(i)+"/subscription",data:{unsubscribe:j,fkey:StackExchange.options.user.fkey},dataType:"html",success:function(l){g(k.html($(""+l)),i)},error:function(l,n,m){},complete:StackExchange.helpers.removeSpinner})};var g=function(i,j){i.find(".tm-se-subscription").click(function(){f(j,$(this).hasClass("tm-se-unsubscribe"))}).end().find(".tm-favorite, .tm-favorite-clear, .tm-favorite-ignore").click(function(){if($(this).hasClass("tm-favorite")){c(j,"ignore")}else{if($(this).hasClass("tm-favorite-clear")){c(j,"favorite")}else{if($(this).hasClass("tm-favorite-ignore")){c(j,"clear")}}}})};return{applyPrefs:a,init:function(){StackExchange.tagmenu.init(g);if($("#interestingTags").length==0){return}b();$("#ignoredAdd").click(function(){d("#ignoredTag","#ignoredTags",25,"post-tag user-tag",true)});$("#interestingAdd").click(function(){d("#interestingTag","#interestingTags",20,"post-tag user-tag",true)});$("#hideIgnored").click(function(){e(30,$(this).is(":checked"));a()});StackExchange.using("tagAutocomplete",function(){bindTagFilterAutoComplete("#ignoredTag");bindTagFilterAutoComplete("#interestingTag")})}}})();StackExchange.question.fullInit=function(d){window.votesCast=d.votesCast;StackExchange.vote.init(d.questionId);StackExchange.suggestedEdits.bindPopupLinks();if(d.canViewVoteCounts){StackExchange.vote.bindFetchVoteCounts()}StackExchange.vote_bounty.init(d);if(/^#autocomment/.test(window.location.hash)){var b=$(".comments-link:first");var a="#comment-"+window.location.hash.substring(12);var c=function(){var f=$(a);var e=$("<span><b>Trivial answer converted to comment</b></span>");f.find(".comment-date").append($("<br>")).append(e);f.css({backgroundColor:d.highlightColor});f.animate({backgroundColor:d.backgroundColor},2000,"linear",function(){$(this).css("background-color","")});$(a)[0].scrollIntoView(true)};if(!!d.totalCommentCount&&!!d.shownCommentCount&&d.totalCommentCount!=d.shownCommentCount){StackExchange.comments.loadAll(b).done(c)}else{c()}}};StackExchange.vote=(function(){var k=StackExchange.helpers;var j={informModerator:-1,undoMod:0,acceptedByOwner:1,upMod:2,downMod:3,offensive:4,favorite:5,close:6,reopen:7,bountyClose:9,deletion:10,undeletion:11,spam:12};var C="View upvote and downvote totals";var y=function(J){if(!J){J="div.vote"}$(J).find(".vote-up-off").unbind("click").click(function(){l($(this))});$(J).find(".vote-down-off").unbind("click").click(function(){i($(this))})};var x=function(J){var K=J?J.closest("div.vote"):$("div.vote");return K.find(".vote-up-off, .vote-down-off").unbind("click")};var c=function(J){$.each(J,function(){var K=$("div.vote:has(input[value="+this.PostId+"])");switch(this.VoteTypeId){case j.upMod:K.find(".vote-up-off").addClass("vote-up-on");break;case j.downMod:K.find(".vote-down-off").addClass("vote-down-on");break;case j.favorite:K.find(".star-off").addClass("star-on");K.find("div.favoritecount b").addClass("favoritecount-selected");break;default:StackExchange.debug.log("site.vote.js > highlightExistingVotes has no case for "+this.VoteTypeId);break}});votesCast=null};var v=function(J){$.ajax({type:"GET",url:"/posts/"+J+"/votes",dataType:"json",success:c})};var l=function(O){var M=O.parent().find(".vote-up-off");var J=O.parent().find(".vote-down-off");var K=f(M);var N=G(J);var L=K?-1:(N?2:1);n(O,L);s(M,J);if(!K){M.addClass("vote-up-on")}m(O,K?j.undoMod:j.upMod)};var i=function(O){var M=O.parent().find(".vote-up-off");var J=O.parent().find(".vote-down-off");var K=G(J);var N=f(M);var L=K?1:(N?-2:-1);n(O,L);s(M,J);if(!K){J.addClass("vote-down-on")}m(O,K?j.undoMod:j.downMod)};var q=function(){return $("div.vote a[id^='vote-accepted-']")};var d=function(){return $("div.post-menu a[id^='lock-post-']")};var g=function(){return $("div.post-menu a[id^='flag-post-']")};var o=function(){return $("div.post-menu a[id^='protect-post-']")};var D=function(){return $("div.post-menu a[id^='unprotect-post-']")};var f=function(J){return J.hasClass("vote-up-on")};var G=function(J){return J.hasClass("vote-down-on")};var b=function(J){return J.hasClass("star-on")};var z=function(J){return J.closest("div.vote").find("input").val()};var s=function(K,J){K.removeClass("vote-up-on");J.removeClass("vote-down-on")};var n=function(O,M){var L=O.siblings("span.vote-count-post");var N;if(L.find(".vote-count-separator").length>0){var J=parseInt(L.children(":first").text(),10);var K=Math.abs(parseInt(L.children(":last").text(),10));N=J-K;L.css("cursor","pointer").unbind("click").attr("title",C).click(function(){w($(this))})}else{N=parseInt(L.text(),10)}L.text(N+M)};var m=function(J,K){x(J);var L=z(J);u(J,L,K,B)};var u=function(R,O,N,L,K,M){var P={fkey:StackExchange.options.user.fkey};if(K){for(var Q in K){P[Q]=K[Q]}}var J=function(){$.ajax({type:"POST",url:"/posts/"+O+"/vote/"+N,data:P,dataType:"json",success:function(S){if(S.Warning){if(confirm(S.Message)){P.ignoreWarnings="true";J()}else{if(M){M()}}}else{L(R,O,S);if(M){M()}}},error:function(){a(R,"An error has occurred - please retry your request.");if(M){M()}}})};J()};var B=function(J,L,K){if(K.Success){if(K.Message){h(J,K.Message)}if(K.ShowShareTip){StackExchange.question.showShareTip()}}else{if(window.console&&window.console.firebug&&(!K.Message||K.Message.length<5)){a(J,"FireBug seems to be enabled, which can sometimes interfere with voting;<br>please refresh the page to see if your vote was processed.<br><br>If this persists, consider disabling FireBug for this site.")}else{a(J,K.Message);s(J,J);J.parent().find("span.vote-count-post").text(K.NewScore);if(K.LastVoteTypeId){I(J,K.LastVoteTypeId)}}}y(J.parent())};var I=function(J,K){var M,L;if(K==j.upMod){M=".vote-up-off";L="vote-up-on"}else{if(K==j.downMod){M=".vote-down-off";L="vote-down-on"}}if(M){J.closest("div.vote").find(M).addClass(L)}};var a=function(J,K){k.showErrorPopup(J.parent(),K)};var h=function(J,K){k.showErrorPopup(J.parent(),K,true)};var p=function(){$(".star-off:not(.disabled)").live("click",function(J){e($(this));J.preventDefault()})};var e=function(K){if(K.data("loading")){return}K.data("loading",true);var N=z(K)||K.siblings("input[type=hidden]").val();var M=K.parent().find("div.favoritecount b");var J=parseInt("0"+M.text().replace(/^\s+|\s+$/g,""),10);var L=function(){if(b(K)){K.removeClass("star-on");M.removeClass("favoritecount-selected").text((J--<=0)?"":J)}else{K.addClass("star-on");M.addClass("favoritecount-selected").text(++J)}};L();u(K,N,j.favorite,function(O,Q,P){K.data("loading",false);if(!P.Success){L();K.parent().showErrorPopup(P.Message)}})};var F=function(J){$("div.post-menu *[id^='delete-post-'], table.flagged-posts *[id^='delete-post-']").unbind("click").die("click").live("click",function(K){K.preventDefault();E($(this),J)})};var E=function(J,L){var M=J.attr("id").substring("delete-post-".length);var K=J.text().indexOf("undelete")>-1;if(confirm("Vote to "+(K?"un":"")+"delete this post?")){u(J,M,(K?j.undeletion:j.deletion),L||t)}};var t=function(P,O,K){var M=P.text().indexOf("undelete")>-1;if(K&&K.Success){P.text(K.Message);if(K.NewScore<0){var N=$(".question:has(a[id='delete-post-"+O+"'])").length>0;var J=N?".question, div.answer":"#answer-"+O;H($(J),!M)}else{a(P,"This post still needs "+K.NewScore+" vote(s) from other users to "+(M?"un":"")+"delete")}}else{var L=(K&&K.Message)?K.Message:"A problem occurred during "+(M?"un":"")+"deletion";k.showErrorPopup(P.parent(),L)}};var H=function(K,J){if(J){$("div.question-status:has(span:contains('delete'))").show();K.addClass("deleted-answer").find("a[id^='delete-post-']").addClass("deleted-post").end().find("div[id^='comments-']").addClass("comments-container-deleted").end().find("a[id^='comments-link-']").addClass("comments-link-deleted")}else{document.location.reload(true)}};var r=function(J){var K=J.attr("id").substring("vote-accepted-".length);q().unbind("click");u(J,K,j.acceptedByOwner,function(L,O,N){if(N.Success){$(".vote-accepted-off").removeClass("vote-accepted-on");var M=parseInt(N.Message,10);if(M==j.acceptedByOwner){L.addClass("vote-accepted-on")}else{L.removeClass("vote-accepted-on")}}else{a(L,N.Message)}q().click(function(){r($(this))})})};var w=function(J){var K=J.closest("div.vote").children('input[type="hidden"]').val();StackExchange.helpers.addSpinner(J);$.ajax({type:"GET",url:"/posts/"+K+"/vote-counts",dataType:"json",success:function(L){$(".error-notification").fadeOut("fast",function(){$(this).remove()});var M='<div style="color:green">'+L.up+'</div><div class="vote-count-separator"></div><div style="color:maroon">'+L.down+"</div>";J.html(M).unbind("click").css("cursor","default").attr("title",(L.up+" up / "+L.down+" down"))},error:function(L,N,M){StackExchange.helpers.removeSpinner();k.showErrorPopup(J.parent(),(L.responseText&&L.responseText.length<100?L.responseText:"An error occurred during vote count fetch"))}})};var A=function(){var J=$(".vote-count-post");$.each(J,function(M,L){var N=$(L);N.attr("title",C).css("cursor","pointer").unbind("click");var K=function(){w(N)};if(N.hasClass("mobile-vote-count")){return}else{N.click(K)}})};return{init:function(K){var J=!(StackExchange.options.user.isRegistered);if(J){StackExchange.question.bindAnonymousVoteDisclaimers()}else{if(votesCast==null){v(K)}else{c(votesCast)}y();o().unbind("click").click(function(M){M.preventDefault();var L=this.id.substring("protect-post-".length);if(confirm("Are you sure you want to protect this question?")){$.ajax({type:"POST",url:"/question/protect",data:{id:L,fkey:StackExchange.options.user.fkey},success:function(N){location.reload(true)}})}return false});D().unbind("click").click(function(M){M.preventDefault();var L=this.id.substring("unprotect-post-".length);if(confirm("Are you sure you want to unprotect this question?")){$.ajax({type:"POST",url:"/question/unprotect",data:{id:L,fkey:StackExchange.options.user.fkey},success:function(N){location.reload(true)}})}return false});StackExchange.vote_closingAndFlagging.init();p()}q().unbind("click").click(function(){r($(this))});F()},up:l,down:i,favorite_init:p,delete_init:F,bindFetchVoteCounts:A,highlightExistingVotes:c,submit:u,voteTypeIds:j,getPostId:z}})();StackExchange.vote_closingAndFlagging=(function(){var i=StackExchange.vote.voteTypeIds;var h;var f=function(){return $("div.post-menu a[id^='flag-post-'], div.flag-options .flag-post")};var w=function(x){var z=x.text().indexOf("open")>-1;var y=x.attr("id").substring("close-question-".length);if(z){if(confirm("Nominate this question for reopening?")){StackExchange.vote.submit(x,y,i.reopen,r)}}else{a(x,y)}};var a=function(z,B,A,y){var x=z.parent();if(!A){z.addSpinnerAfter({padding:"0 3px"})}$.ajax({type:"GET",url:"/posts/popup/close/"+B+(A?"?isForFlagging=1":""),dataType:"html",success:function(C){var D=$(C);if(y){y.fadeOut("fast");p=D}D.appendTo(x);q(D,z,y);D.center().fadeIn("fast")},error:function(){x.showErrorPopup("Unable to load popup - please try again")},complete:StackExchange.helpers.removeSpinner})};var q=function(z,D,B){z.find(".popup-close").click(function(){z.fadeOutAndRemove();if(B){B.remove()}});var x=z.find(".popup-actions-cancel");if(B){x.text("back").click(function(){z.fadeOut("fast");B.fadeIn("fast")})}else{x.click(function(){z.fadeOutAndRemove()})}var C=z.find(".popup-submit");z.find('input[type=radio]:not(input[name="existing-close"])').click(function(){var E=$(this);var F=E.closest("li");if(F.hasClass("action-selected")){return}if(!d(E)){C.enable();z.find(".popup-active-pane li.action-selected").removeClass("action-selected");F.addClass("action-selected")}});var y=$("#duplicate-question");var A=$("#duplicate-question-id");y.helpOverlay().typeWatch({highlight:false,wait:750,captureLength:-1,callback:function(){j(C,y,questionId,A)}});$("#close-question-form").submit(function(){n(z,D,$(this),A,C);return false})};var n=function(z,D,y,C,B){if(B.attr("disabled")){return}$("#remaining-votes").addSpinner({position:"absolute",margin:"3px 0 0 5px"});B.disable();var x=(z.find("input[name=isForFlagging]").length>0),A=C.val();$.ajax({type:"POST",url:y.attr("action"),dataType:"json",data:{fkey:StackExchange.options.user.fkey,isForFlagging:x,"close-reason-id":$("#pane-main input[type=radio]:checked").val(),"migration-site-id":$('input[type=radio][id^="close-offtopic-"]:checked, input#migrate-anywhere:checked').val(),"duplicate-question-id":A},success:function(E){r(D,questionId,E,x,!!A)},error:function(E,G,F){D.parent().showErrorPopup("A problem occurred when trying to "+D.text().indexOf("open")>-1?"reopen":"close")},complete:function(){StackExchange.helpers.removeSpinner();z.fadeOutAndRemove()}})};var r=function(D,B,x,y,C){if(!y&&D.is("[id^='flag-post-']")){D=D.parent().find("a[id^='close-question']")}var A=(D&&D.text().indexOf("open")>-1)?"reopen":"close";if(x.Success){if(x.Message){var z=D.parent();if(y){z.showErrorPopup(x.Message)}else{D.text(D.text().replace(/\w?\(\d\)/,"")+" "+x.Message);z.showErrorPopup("This question still needs "+x.NewScore+" vote(s) from other users to "+A)}if(C){if(!D.closest(".mod-post-header").length){StackExchange.comments.loadAll(D)}}}else{if(h&&h.closeCallback&&h.closeCallback(D)){}else{if(x.RedirectTo){location.href=x.RedirectTo}else{location.reload(true)}}}}else{D.parent().showErrorPopup(x.Message||"A problem occurred when trying to "+A)}};var d=function(y){var x=y.attr("id").substr("close-".length);var z=$("#pane"+x);if(z.length==0){return false}$("#pane-main").removeClass("popup-active-pane").hide();z.addClass("popup-active-pane").show();$.each(z.find(".auto-load"),function(){$(this).removeClass("auto-load").addSpinner();if($(this).attr("id").indexOf("suggested-duplicates-")==0){$(this).load("/posts/popup/close-suggestions/"+$(this).attr("id").substr(21),function(){var A=$("#duplicate-question");$(this).find(".existing-linked-questions input[type=radio]").click(function(){A.hideHelpOverlay().val($(this).parent().attr("title")).keydown()})})}});y.closest("div.popup").find(".popup-actions-cancel").html("back").unbind("click").click(g);window["pane"+x]();return true};var g=function(){$(".popup-subpane").removeClass("popup-active-pane").hide();$("#pane-main").addClass("popup-active-pane").show().find("input[type=radio]:checked").removeAttr("checked").end().find("li.action-selected").removeClass("action-selected");$(".popup").find(".popup-submit").disable().end().find(".popup-actions-cancel").html("cancel").unbind("click").click(function(){$(".popup").fadeOutAndRemove()})};var j=function(B,z,y,x){var A=z.parent().find(".selected-master-preview");B.disable();A.html("");if($.trim(z.val()).length==0){return}StackExchange.helpers.addSpinner(A);$.ajax({type:"GET",url:"/posts/validate-duplicate-question/"+y,data:{val:z.val()},dataType:"json",success:function(C){if(C.success){x.val(C.id);t(A,C);B.enable()}else{if(C.title){A.html(C.title)}else{A.html("")}}},error:function(C,E,D){StackExchange.helpers.removeSpinner();StackExchange.helpers.showErrorPopup(z.parent(),(C.responseText&&C.responseText.length<100?C.responseText:"An error occurred during duplicate validation"))}})};var t=function(z,y){var x='<div class="post-text" style="max-height: 400px; overflow: auto;"><h3><a href="'+y.url+'" target="_blank">'+y.title+"</a></h3><p>"+y.body+"</p></div><p>"+y.tags+"</p>";z.html(x)};var p;var m;var s=function(x){var y=x.attr("id").substring("flag-post-".length);x.loadPopup({url:"/posts/popup/flag/"+y+(x.hasClass("show-invalid")?"?showInvalid=true":""),loaded:c,hideDescriptions:true,actionSelected:b,subformShow:e})};var c=function(x){p=null;u(x);x.find("form").submit(function(){l(x);return false});$("#flag-load-close").unbind("click").click(function(){if(m){m(x,$(this))}else{o(x,$(this))}})};var b=function(y){var z=y.find("input:radio").attr("id").substr("flag-".length);var x=z==i.offensive||z==i.spam;$(".flag-remaining-spam").toggle(x);$(".flag-remaining-inform").toggle(!x)};var u=function(y){var z=y.find(".popup-submit");var x=y.find('textarea[name="flag-reason"]');x.focus(function(){x.hideHelpOverlay();var B=x.closest("li").find("input:radio");if(!B.is(":checked")){B.attr("checked","checked")}}).charCounter({min:10,max:500,setIsValid:function(B){if(x.closest("li").find("input[type=radio][value=other]").is(":checked")){z.enable(B)}}});var A=x.closest(".action-subform");A.find("input.flag-prefilled").click(function(){z.enable()});A.find('input[value="other"]').click(function(){x.focus()});A.find("label, input:radio").css("cursor","pointer")};var e=function(y){if(!y.is(".mod-attention-subform")){return}var x=y.find('textarea[name="flag-reason"]');x.helpOverlay();if(y.find("input[value=other]:checked").length){x.focus()}else{if(!y.find("input:radio:checked").length){y.closest(".popup").find(".popup-submit").disable()}}};var o=function(z,A){A.closest("li").siblings("li").trigger("hide-action");if(p){z.fadeOut("fast");p.fadeIn("fast")}else{A.siblings(".action-name").addSpinner({margin:"0 5px"});var B=z.attr("id").substr("flag-popup-".length);var y=$("#flag-post-"+B);var x=$("#flag-isClosePopupForFlagging").val()=="true";a(y,B,x,z)}z.find(".popup-submit").disable();A.removeAttr("checked")};var l=function(z){z.find(".popup-submit").disable().siblings(".spinner-container").addSpinner();var A=z.attr("id").substr("flag-popup-".length);var y=$("#flag-post-"+A);var x=z.find('input[name="flag-post"]:checked').val();if(x==i.informModerator){k(z,A,y)}else{StackExchange.vote.submit(y,A,x,v,null,function(){z.fadeOutAndRemove()})}};var k=function(y,z,A){var C=y.find(".mod-attention-subform");var x=C.find("input:radio:checked");var B=x.val()=="other"?C.find('textarea[name="flag-reason"]').val():x.val();$.ajax({type:"POST",url:"/messages/inform-moderator-about-post/"+z,dataType:"json",data:{fkey:StackExchange.options.user.fkey,msg:B},success:function(D){A.parent().showErrorPopup(D.Message)},error:function(D,F,E){A.parent().showErrorPopup(D.responseText&&D.responseText.length<100?D.responseText:"An error occurred during submission")},complete:function(){y.fadeOutAndRemove()}})};var v=function(y,z,x){if(x.Refresh){location.reload(true)}else{y.parent().showErrorPopup(x.Message)}};return{on_close_click:function(x){m=x},flag_actionSelected:b,flag_subformShow:e,close_initPopup:q,flag_loaded:c,init:function(x){if(!h){h=x}var y=$("div.post-menu a[id^='close-question-'], table.flagged-posts input[id^='close-question-']");y.unbind("click").die("click").live("click",function(z){z.preventDefault();w($(this))});f().unbind("click").die("click").live("click",function(z){z.preventDefault();s($(this))})}}})();(function(){var i,b=StackExchange.comments,h=b.uiForPost;b.extendPostUi({ensureInput:function(){var l=this.jDiv.find('form[id^="add-comment-"]'),m=this;if(l.children().length){l.add(l.prev()).show();return l.find("textarea")}else{return k(l,"Add Comment",false,function(){m.submitNewComment()})}},submitNewComment:function(){var l=this.jDiv.find('form[id^="add-comment-"]'),n=l.find("textarea"),m=this,o=l.find('input[type="submit"]').parent();this.ajax({type:"POST",url:"/posts/"+this.postId+"/comments",dataType:"html",data:{comment:n.val(),fkey:StackExchange.options.user.fkey}},"during comment submission",o).done(function(p){m.showComments(p);n.val("").keyup().blur();StackExchange.helpers.enableSubmitButton(l);l.add(l.prev()).hide();m.jCommentsLink.show()}).fail(function(){StackExchange.helpers.enableSubmitButton(l)})},checkDiscussion:function(){var o=this.jDiv.find("tr.is-comment-discussion"),m=this;if(!o.length){return}o.remove();var n=this.jDiv.find(".comment-form");if(n.find(".discussion-info").length){return}var l=$("<div style='margin:12px 0 3px; font-weight:bold' class='discussion-info'>Please avoid extended  discussions in comments. Would you like to <a href='#'>automatically move this discussion to chat?</a></div>").find("a").click(function(p){$(this).unbind("click");p.preventDefault();m.ajax({url:"/posts/"+m.postId+"/move-discussion-to-chat",data:{fkey:StackExchange.options.user.fkey},type:"POST"},"when trying to move the discussion to chat",n).done(function(q){if(q.success){window.location.href=q.message}else{StackExchange.helpers.showErrorPopup(n,q.message)}})}).end().prependTo(n);o.remove()}});function j(m,l){this.commentId=m;this.jComment=l;this.postUi=h(l)}j.prototype={voteUp:function(){var m=this.jComment.find(".comment-up").addClass("comment-up-on").removeClass("comment-up"),l=this;this.submitVote(2).done(function(n){m.removeClass("comment-up-off").closest("tr").siblings("tr").remove();l.renderScore(n.NewScore)}).fail(function(){m.removeClass("comment-up-on").addClass("comment-up")})},"delete":function(){var l=this;if(confirm("Really delete this comment?")){this.submitVote(10).done(function(){l.jComment.remove()})}},flag:function(){var l=this;function m(r){var p=r.find("#comment-popup-other-text").charCounter({min:6,max:200,setIsValid:function(s){q()}}),o=r.find("#comment-popup-other").click(function(){q();p.focus()}),n=r.find(".text-counter"),q=function(){var s=r.find('input[name="comment-reason"]:checked').length==0;if(o.is(":checked")){var t=p.show().val().length;n.show();s=t<6||t>200}else{p.hide();n.hide()}r.find(".popup-submit").attr("disabled",s)};r.find("input").click(q);q();r.find("form").submit(function(){var s=(o.is(":checked")?p:r.find('input[name="comment-reason"]:checked')).val();r.fadeOutAndRemove();l.submitVote(4,s).done(function(t){if(t.NewScore===-1){l.jComment.remove()}else{l.jComment.find(".comment-flag, .comment-up").fadeOutAndRemove()}});return false})}this.jComment.find(".comment-flag").loadPopup({url:"/posts/comments/popup/flag/"+this.commentId,loaded:m})},edit:function(){var n=this.jComment,l=n.find('form[id^="edit-comment-"]'),m=this;n.find(" > td > *").not(l).hide();n.find("td:last").addClass("comment-form");var o=k(l,"Save Edits",true,function(){m.submitEdit()});o.val(l.find("div").text());l.show();o.focus()},cancelEdit:function(){var l=this.jComment,m=l.find('form[id^="edit-comment-"]');m.children("table").remove();m.hide();l.find("td:last").removeClass("comment-form");l.find(" > td > *").not(m).show()},submitEdit:function(){var l=this.jComment.find('form[id^="edit-comment-"]'),o=l.find("textarea"),n=o.val(),m=this;this.postUi.ajax({type:"POST",url:"/posts/comments/"+this.commentId+"/edit",dataType:"html",data:{comment:n,fkey:StackExchange.options.user.fkey}},"during comment submission",l).done(function(p){m.postUi.showComments(p)}).fail(function(){StackExchange.helpers.enableSubmitButton(l)})},submitVote:function(l,n){var m={type:"POST",url:"/posts/comments/{commentId}/vote/{voteTypeId}".format({commentId:this.commentId,voteTypeId:l}),dataType:"json",data:{fkey:StackExchange.options.user.fkey,text:n}};return this.postUi.ajax(m,"during voting",this.jComment.find(".comment-actions"))},renderScore:function(l){var n="";if(l&&l>0){var m=l<5?"":l<=15?"warm":l<=30?"hot":"supernova";n+='<span title="number of \'great comment\' votes received" class="'+m+'">'+l+"</span>"}this.jComment.find(".comment-score").html(n)}};var a=function(l){l.find("textarea").keyup(function(m){if(m.which==13&&!m.shiftKey&&!$(this).prev("#tabcomplete:visible").length){l.submit()}}).keypress(function(m){if(m.which==13&&!m.shiftKey){return false}})};var k=function(s,m,p,r){var o;if(s.hasClass("mobile-comment-form")){o='<textarea name="comment" rows="2"></textarea><input type="submit" value="'+m+'"/>'}else{o='<table><tr><td><textarea name="comment" cols="68" rows="3"></textarea></td><td><input type="submit" value="'+m+'"/>'+(p?'<a class="edit-comment-cancel">cancel</a>':"")+'<br/><a class="comment-help-link">help</a></td></tr><tr><td colspan="2"><span class="text-counter"></span><span class="form-error"></span></td></tr></table>'}s.append(o);if(p){s.find(".edit-comment-cancel").click(function(){d(s).cancelEdit()})}var q=false;var l=function(t){q=t};var n=s.find("textarea");n.charCounter({min:15,max:600,setIsValid:l}).focus(function(){StackExchange.comments.tabCompleter.init($(this))});s.find(".comment-help-link").click(c);if(i){n.one("focus",c)}s.submit(function(){if(q){StackExchange.helpers.disableSubmitButton(s);r(s)}else{s.find("span.text-counter").animate({opacity:0},100,function(){$(this).animate({opacity:1},100)})}return false});if(!StackExchange.options.desc){a(s)}return n};var c=function(q){var r=$(this).closest("tbody");var m=r.find(".comment-help-link");var s=$(".comment-help",r);var p;if(q.type=="click"){p=s.length==0||!s.is(":visible");if(!p){c.manualOnly=true}}else{if(c.manualOnly){return}else{p=true}}var l=function(){m.text(p?"hide help":"help")};if(s.length>0){if(p){s.slideDown(l)}else{s.slideUp(l)}return}if(!p){return}var n=$("<tr />").appendTo(r);var o=$("<td colspan='2' />").appendTo(n);if(c.helpText){o.html(c.helpText);$(".comment-help",o).slideDown(l)}else{StackExchange.helpers.addSpinner(m);o.load("/posts/comment-help",function(t){c.helpText=t;StackExchange.helpers.removeSpinner();$(".comment-help",this).slideDown(l)})}};function d(n){var o=n.constructor===$?n:$(n),m=o.hasClass("comment")?o:o.closest(".comment"),l=m.attr("id").replace(/^comment-/,"");return new j(l,m)}function e(l,m){if(!/Android/.test(navigator.userAgent)){return}$(l).bind("touchstart",function(p){var n=$(p.target);if(!n.is(m)){return true}var o=n.data("events");if(o&&o.click&&o.click.length){return true}n.click(function(){}).attr("data-nothing-to-see-here","X");return true})}function g(l,m){$(".comments").delegate(l,"click",function(){d(this)[m]()});e(".comments",l)}var f=b.init;b.init=function(l){f();i=l&&l.autoShowCommentHelp;g(".comment-up","voteUp");g(".comment-delete","delete");g(".comment-flag","flag");g(".comment-edit","edit");$("form.comment-form-expanded").each(function(){h(this).addShow(true)})}})();StackExchange.comments.tabCompleter=(function(){var l;var h;var i=null;function g(m){return StackExchange.helpers.noDiacritics(m.replace(/ /g,"").toLowerCase())}function b(n){var m=$("#tabcomplete");m.empty();if(n.length>5||!n.length){return}$.each(n,function(o,q){var p=$("<li/>").text(q).appendTo(m);if(q.toLowerCase()==i.toLowerCase()){p.addClass("chosen")}})}function f(){var n=h.caret().start;var p=h.val();var r=false;if(/@[^\s!?();:+"].*@/.test(p)){if(!/`/.test(p)){return null}r=true}var o=p.substring(n).search(/[\s!?();:+"\[\]\\]/);if(o==-1){o=p.length-n}var t=p.substring(0,n+o).match(/@[^\s!?();:+"\[\]\\]+$/);if(!t){return null}var q=t[0].substr(1);var m=n+o;var s=m-q.length;if(r&&/@[^\s!?();:+"]/.test(p.substr(0,s-1))){return null}return{start:s,pos:n,end:m,name:q}}function j(m){var n=f();if(n.name===m){if(!h.is(":focus")){h.focus()}return}var o=h.val();h.val(o.substring(0,n.start)+m+o.substring(n.end));newpos=n.start+m.length;h.caret(newpos,newpos)}$("#tabcomplete > li").live("click",function(){$(this).parent().find("li.chosen").removeClass("chosen");j($(this).addClass("chosen").text())});function d(q){var p;if(q.which==9){var o=$("#tabcomplete li");if(!o.length){return}var n=o.filter(".chosen").removeClass("chosen");var m=q.shiftKey?n.prev():n.next();if(!m.length){m=q.shiftKey?o.last():o.first()}p=m.addClass("chosen").text()}else{if(q.which==27){var o=$("#tabcomplete li");if(!o.length){return}p=i;i=null}else{return}}q.preventDefault();j(p)}function k(s){if(s.which){switch(s.which){case 9:case 16:case 17:case 18:case 220:return}}var n=f();if(!n){i=null;b([]);return}if(i==n.name){return}var m=[];i=n.name;var o=new RegExp("^"+g(n.name).replace(/\./g,"\\."),"i");var r=l.length;for(var p=0;p<r;p++){var t=l[p];var q=t.name;var u=g(q);if(u.match(o)){m.push(q.replace(/ /g,""))}}b(m)}function c(m){if(!m){return null}return parseInt(m.replace(/^\/users\/(\d+)\/.*$/,"$1"),10)||null}var e=c($("#hlinks a.profile-link").attr("href"));function a(t){if(!StackExchange.options.enableTabCompletion||StackExchange.options.isMobile){return}var s=t.closest("div.comments");var p=s.closest(".question, .answer").find(".post-signature:last .user-details a[href^='/users/']");var m=c(p.attr("href"));var n=[];s.find("a.comment-user").each(function(x,y){var v=y.firstChild;if(v.nodeType!==3){StackExchange.debug.log("unexpected structure in comment owner link");return}var u=v.nodeValue;var w=c($(y).attr("href"));if(w===e){return}n.push({id:w,name:u})});l=[];var q={};for(var o=n.length-1;o>=0;o--){var r=n[o];if(!q[r.id]){l.push(r);q[r.id]=true}}$("#tabcomplete").remove();if(h){h.unbind($.browser.opera?"keypress":"keydown",d).unbind("keyup click",k)}if(l.length===0||(l.length===1&&l[0].id===m)){h=null;return}h=t;i=null;$("<ul id='tabcomplete' />").insertBefore(t);t.bind("keydown",d).bind("keyup click",k)}return{init:a}})();StackExchange.suggestedEdits=(function(){var c={};var i=function(j){return $(j).closest(".suggested-edit").attr("id").substring("suggested-edit-".length)};var a=function(k,n,j,m){var o=i(k);var l=k.closest("form");if(l.data("working")){return}l.data("working",true).find("input[type=button]").disable();k.addSpinnerAfter({padding:"0 3x"});$.ajax({url:"/suggested-edit/{editId}/vote/{type}".format({editId:o,type:n}),data:{fkey:StackExchange.options.user.fkey,reasonId:j,customReason:m},dataType:"json",type:"POST",success:function(p){h(l,k,n,p)},error:function(p,q,r){d(l,k,"An error has occurred when trying to "+n+" - please try again")},complete:StackExchange.helpers.removeSpinner})};var h=function(j,k,l,m){if(!m.Success){d(j,k,m.Message);return}if(c.popup){if(l=="approve"){location.href=m.RedirectTo}$("#lightbox, #lightbox-panel").fadeOutAndRemove()}else{if(c.refreshPageOnActionSuccess){location.reload(true)}else{f(k,m.MiniHtml)}}};var f=function(k,j){k.closest(".suggested-edit").fadeOut("slow",function(){if(j){$(".suggested-edit:first").before(j).fadeIn("fast")}$(this).remove()});b()};var b=function(){$("#hlinks-nav .mod-flag-indicator.hotbg, #tabs .youarehere .mod-flag-indicator.hotbg").each(function(){var j=$(this);j.text((j.text()||0)-1);if(j.text()<1){j.hide()}})};var d=function(j,l,k){StackExchange.helpers.removeSpinner();j.find("input[type=button]").not(l).fadeOut("fast");l.fadeOut("fast",function(){if(!c.hideRefreshButton){$('<input type="button" class="refresh-button" onclick="location.reload(true)" value="Refresh Page" style="display:none">').appendTo(j).fadeIn("fast")}j.closest("table").find(".form-error").html(k).fadeIn("fast",function(){if(c.popup){var m=j.closest(".popup-suggested-edit");if(m.scrollTop()>0){m.scrollTop(m.find(".suggested-edit").height())}}})})};var e=function(j){c=j||{};$(".approve-edit").unbind("click").click(function(){a($(this),"approve");return false});$(".reject-edit").unbind("click").click(function(){var n=i($(this));var k=$(this);var m=$("#rejection-prototype").clone(false).find("*").each(function(){if(this.id){this.id+="-"+n}var o=this.getAttribute("for");if(o){this.setAttribute("for",o+"-"+n)}}).end().find(".popup-submit").disable().end().appendTo($(this).closest("#content")).center().css("z-index","2000").fadeIn("fast");var l=m.find(".popup-submit");m.find(".static-reason").change(function(){l.enable()});m.find(".custom-reason-text").helpOverlay().charCounter({min:20,max:150,setIsValid:function(o){if(o){l.enable()}else{l.disable()}}});m.find(".popup-close a, .popup-actions-cancel").click(function(){m.fadeOut("fast",function(){m.remove()})});m.submit(function(){m.fadeOut("fast",function(){m.remove()});a(k,"reject",m.find("input:radio[name=rejection-reason]:checked").val(),m.find(".custom-reason-text").val());return false});return false});$(".improve-edit").unbind("click").click(function(){window.window.location.href="/posts/"+$(this).closest(".suggested-edit").find(".post-id").text()+"/edit";return false});$(".suggested-edit .action:not(.link)").unbind("click").click(function(){var l=$(this);var m=l.hasClass("full-diff")?"full-diff":"full-html-diff";var k=l.closest(".suggested-edit").find(".body-diffs");k.find("table:visible").hide();k.find("."+m).show();l.siblings(".action.selected").removeClass("selected");l.addClass("selected");$.post("/users/save-preference",{key:71,value:m==="full-diff"?"SideBySideMarkdown":"SideBySideHtml",fkey:StackExchange.options.user.fkey});return false});StackExchange.vote.delete_init(function(k,n,m){if(m&&m.Success){f(k)}else{var l=(m&&m.Message)?m.Message:"A problem occurred during deletion";k.parent().showErrorPopup(l)}})};var g=function(k){if(k.data("working")){return}k.data("working",true).addSpinnerAfter({padding:"3px 0"});var j=k.parent();var l=k.attr("id").substring("edit-pending-".length);$.ajax({type:"GET",url:"/suggested-edits/popup/"+l,dataType:"html",success:function(n){var p=$('<div id="lightbox-panel" class="popup" style="display:block"><div class="popup-close"><a title="close this popup (or hit Esc)">&times;</a></div><div class="popup-suggested-edit">'+n+"</div></div>");var m=$(window).height();var o=p.find(".popup-suggested-edit").css({"max-height":m-100});$('<div id="lightbox"/>').appendTo($("body")).css("height",$(document).height()).fadeIn("fast");p.appendTo(j).center().fadeIn("fast").find(".popup-close").click(function(){$("#lightbox, #lightbox-panel").fadeOutAndRemove()});e({popup:true})},error:function(m,o,n){j.showErrorPopup(m.responseText&&m.responseText.length<200?m.responseText:"Unable to load suggested edit - please try again")},complete:function(){StackExchange.helpers.removeSpinner();k.removeData("working")}});return false};return{init:e,bindPopupLinks:function(){$("div.post-menu a[id^='edit-pending-']").unbind("click").click(function(){g($(this));return false})}}})();StackExchange.inlineEditing={init:function(){function a(b,e,c,d){e.fadeIn(c,d);b.hide();return}$(".post-menu .edit-post").live("click",function(g){if(g.ctrlKey||g.altKey||g.metaKey||g.shiftKey){return}var i=$(this),f=i.closest(".question, .answer");if(f.find("#edit-tags-cancel").length){StackExchange.inlineTagEditing.restoreCurrentTags(true)}$("#show-editor-button").hide();i.addSpinner();var h="";var c=f.hasClass("answer");if(c){h=" class='answer'"}var d=f.find(".postcell,.answercell");var b=d.find("> *");var j=$('<div class="inline-editor"/>').hide().appendTo(d);j.load(i.attr("href")+"-inline",function(k,x,y){var e;j.find("[tabindex]").each(function(){$(this).attr("tabindex",parseInt($(this).attr("tabindex")-20))});StackExchange.helpers.removeSpinner();if(f.offset().top<$(window).scrollTop()){$("html, body").animate({scrollTop:$(f).offset().top-55},200)}if(x=="error"){StackExchange.helpers.showErrorPopup(d,"The post could not be loaded");j.remove()}else{a(b,j,300);var s=function(r){if(StackExchange.navPrevention){if(!StackExchange.navPrevention.confirm("You have started editing this post. Abandon this edit?")){return false}StackExchange.navPrevention.stop()}$("#show-editor-button").show();a(j,r,300,function(){j.remove()});if(r.offset().top<$(window).scrollTop()){$("html, body").animate({scrollTop:$(f).offset().top-55},200)}return false};var v=function(){t.unbind("keyup",q);p.trigger(e)};var q=function(r){p.trigger(t[0].value);return true};j.find(".cancel-edit").click(function(){v();s(b)});var w=StackExchange.helpers.DelayedReaction(function(r){$.ajax({type:"POST",data:{hide:r},url:"/user/save-pref/hide-preview-for-inline-editing"})},1000,{sliding:true});var n=j.find(".hide-preview");n.click(function(){var r=j.find(".wmd-preview");var z=r.is(":visible");if(z){r.slideUp();n.text("show preview")}else{r.slideDown();n.text("hide preview")}w.trigger(z);return false});var o=j.find('input[type="submit"]');var m=o.attr("id").replace("submit-button","");var u=j.find("form");var t=j.find("#title");var l=$("#question-header a");e=t.val();var p=StackExchange.helpers.DelayedReaction(function(r){l.text(r);if(typeof MathJax!="undefined"){MathJax.Hub.Queue(["Typeset",MathJax.Hub,l[0]])}},{sliding:true});t.keyup(q);j.find("#title,.wmd-input,#tagnames,.edit-comment").keydown(function(r){if(r.ctrlKey===true&&r.keyCode==13){u.submit();return false}if(r.keyCode==27){v();s(b);return false}});u.submit(function(){var r=$(this).serialize();r.fkey=StackExchange.options.user.fkey;if(StackExchange.navPrevention){StackExchange.navPrevention.stop()}o.parent().addSpinner();$.ajax({type:"POST",dataType:"json",data:r,url:u[0].action,success:function(A){if(A.success){var z=A.html;var B=$(z).hide();d.replaceWith(B);if(!c){$("#question-header a").text(A.title)}$("html").trigger("inline-edit-complete",[B,A.title]);styleCode();s(B)}else{if(A.redirect){window.location=A.redirect}else{StackExchange.helpers.showErrorPopup(o.parent(),A.message)}}},error:function(){StackExchange.helpers.showErrorPopup(o.parent(),"An error occurred saving the edit")},complete:StackExchange.helpers.removeSpinner});return false})}});return false})}};StackExchange.vote_bounty=(function(){var g;var c=function(q,m,h){var j=$(".bounty-vote");if(h.Success){$(".bounty-notification").remove();g=false;var n=q.closest("td.votecell").parent().find("span.reputation-score:last");if(h.Message){var p=$(h.Message);n.text(p.text()).attr("title",p.attr("title"))}var o=q.closest("div.vote").find(".bounty-award-container");if(o.length>1){var k=o.filter(":first").find(".bounty-award");var i=parseInt(k.text(),10);var l=parseInt(q.text(),10);k.text("+"+(i+l));j.remove()}else{q.unbind("mouseenter mouseleave").removeClass("bounty-vote bounty-vote-off");j.not(q).remove()}}else{StackExchange.helpers.showErrorPopup(q.parent(),h.Message);j.removeClass("disabled")}};var a=function(h){if(g){return confirm("Are you sure you want to award your bounty to this answer? THIS CANNOT BE UNDONE!")}return true};var d=function(h){var i=StackExchange.vote.getPostId(h);if(!a(i)){return}$(".bounty-vote").addClass("disabled");StackExchange.vote.submit(h,i,StackExchange.vote.voteTypeIds.bountyClose,c)};var e=function(){$(".bounty-vote").hover(function(){$(this).removeClass("bounty-vote-off")},function(){$(this).addClass("bounty-vote-off")});$(".bounty-vote:not(.disabled)").live("click",function(){d($(this))})};var b=function(h){h.addSpinnerAfter({padding:"0 3px"});var i=$(h).closest(".question").find("div.vote input").val();$.ajax({type:"GET",url:"/posts/bounty/"+i,dataType:"html",success:function(j){var k=$(j);k.appendTo(h.parent());k.find(".popup-close").click(function(){k.fadeOutAndRemove()});k.center().fadeIn("fast")},error:function(){h.parent().showErrorPopup("Unable to load popup - please try again")},complete:StackExchange.helpers.removeSpinner})};var f=function(){var h=$(".bounty-link");h.click(function(){b(h)})};return{init:function(h){g=!!h.hasOpenBounty;if(h.canOpenBounty){f()}if(h.hasOpenBounty){e()}}}})();