% Source : http://tex.stackexchange.com/questions/31909/compress-a-list-of-page-references

\documentclass{article}
	\makeatletter
		\let\dotlessi\i
		\newcount\last
		\def\range#1{%
			\last 0\relax
			\def\temp{}
			\def\first{}
			\@for\i:=#1\do{%
				\ifnum\the\last=0%start
					\edef\temp{\i}%
				\else%
					\advance\last 1\relax%
					\ifnum\last=\i%
						\ifx\first\empty%
							\let\@temp\temp%
							\edef\temp{\@temp--}%
							\def\first{x}%
						\else%
						\fi%
					\else%
						\ifx\first\empty%
							\let\@temp\temp%
							\let\j\i%
							\edef\temp{\@temp,\j}
						\else%
							\advance\last -1\relax%
							\let\@temp\temp%
							\let\j\i%
							\edef\temp{\@temp\the\last,\j}%
						\fi%
					\fi%
				\fi%
				\last \i\relax%
			}%
			[\temp]%
		}
	\makeatother

	\let\i\dotlessi


\begin{document}

\noindent
Some test ranges
\\
\range{1,2,3,4,7}
\\
\range{1,3,5,7}
\\
\range{1,3,4,5,7}
\\
\range{}

\end{document}
