% Source : http://forum.mathematex.net/latex-f6/des-exemples-t12322.html#p119450

\documentclass[12pt]{article}
	\usepackage[utf8]{luainputenc}
	\parindent = 0pt

	\newcommand{\euclide}[2]{%
		\begin{center}
			\begin{tabular}{|c|c|c|}
				\hline
				\directlua{
					a,b = #1,#2
					if a < b then a,b = b,a end
					r = a-math.floor(a/b)*b

					tex.sprint(a .. "&" .. b .. "&" .. r .. [[\noexpand\\]])
					while r > 0 do
						a,b = b,r
						r = a-math.floor(a/b)*b
						tex.sprint(a .. "&" .. b .. "&" .. r .. [[\noexpand\\]])
					end
				}
				\hline
			\end{tabular}
		\end{center}
	}

\begin{document}

\euclide{587}{389}

\end{document}