% Source: https://tex.stackexchange.com/a/500952/6880

\documentclass{article}

\usepackage{luacode}
\usepackage{amsmath}

\begin{luacode}
function MatMul( m1, m2, matrixtype)
  if #m1[1] ~= #m2 then
    return nil
  end

  local res = {}

  for i = 1, #m1 do
    res[i] = {}
    for j = 1, #m2[1] do
      res[i][j] = 0
      for k = 1, #m2 do
        res[i][j] = res[i][j] + 12 * m1[i][k] * m2[k][j]
      end
    end
  end

-- LaTex output...

  tex.sprint("\\begin{" .. matrixtype .. "}")

  for i = 1, #res do
    for j = 1, #res[1] do
      tex.sprint( res[i][j] )
      
      if j < #res[1] then
        tex.sprint(" & ")
      end
    end
    tex.sprint("\\\\")
  end
  
  tex.sprint("\\end{" .. matrixtype .. "}")
end
\end{luacode}

\newcommand\matrixmult[3][matrix]{\directlua{MatMul(#2,#3,"#1")}} % Input the default matrix-environment here ("matrix")


\begin{document}

Display math, with default \verb|matrix|-environment:

\begin{equation}
\matrixmult{%
	{{1 , 2 , 3} ,%
	 {4 , 5 , 6}}%
}{%
	{{1 , 2} ,%
	 {3 , 4} ,%
	 {5 , 6}}%
}
\end{equation}


Matrix with parentheses:
$\matrixmult[pmatrix]{%
	{{1 , 2 , 3} ,%
	 {4 , 5 , 6}}%
}{%
	{{1 , 2} ,%
	 {3 , 4} ,%
	 {5 , 6}}%
}$


Matrix with braces:
$\matrixmult[Bmatrix]{%
	{{1 , 2 , 3} ,%
	 {4 , 5 , 6}}%
}{%
	{{1 , 2} ,%
	 {3 , 4} ,%
	 {5 , 6}}%
}$


Matrix with brackets:
$\matrixmult[bmatrix]{%
	{{1 , 2 , 3} ,%
	 {4 , 5 , 6}}%
}{%
	{{1 , 2} ,%
	 {3 , 4} ,%
	 {5 , 6}}%
}$

\end{document}